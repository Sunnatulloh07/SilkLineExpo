<%- include('./partials/header', { title: title || 'Settings - SLEX', lng: lng || 'uz', user: user }) %>
<%- include('./partials/sidebar', { user: user, currentPage: 'settings' }) %>

<!-- Main Content -->
<main class="admin-main buyer-settings">
  <div class="admin-content">
    
    <!-- Settings Header -->
    <div class="settings-header animate-fade-in">
      <div class="settings-header-content">
        <div class="settings-title-section">
          <h1 class="settings-main-title">
            <i class="fas fa-cog"></i>
            <%- t('buyerSettings.title') %>
          </h1>
          <p class="settings-subtitle"><%- t('buyerSettings.subtitle') %></p>
        </div>
      </div>
    </div>

    <!-- Settings Content -->
    <div class="settings-content-grid animate-fade-in">
      
      <!-- Settings Navigation -->
      <div class="settings-nav">
        <div class="nav-item active" data-section="profile">
          <i class="fas fa-user-circle"></i>
          <span><%- t('buyerSettings.profile') %></span>
        </div>
        <div class="nav-item" data-section="account">
          <i class="fas fa-lock"></i>
          <span><%- t('buyerSettings.account') %></span>
        </div>
        <div class="nav-item" data-section="notifications">
          <i class="fas fa-bell"></i>
          <span><%- t('buyerSettings.notifications') %></span>
        </div>
        <div class="nav-item" data-section="preferences">
          <i class="fas fa-sliders-h"></i>
          <span><%- t('buyerSettings.preferences') %></span>
        </div>
        <div class="nav-item" data-section="security">
          <i class="fas fa-shield-alt"></i>
          <span><%- t('buyerSettings.security') %></span>
        </div>
      </div>

      <!-- Settings Sections -->
      <div class="settings-sections">
        
        <!-- Profile Settings -->
        <div class="settings-section active" id="profile-section">
          <h3><%- t('buyerSettings.profileSettings') %></h3>
          <form id="profileSettingsForm">
            <div class="form-row">
              <div class="form-group">
                <label for="companyName"><%- t('buyerSettings.companyName') %></label>
                <input type="text" id="companyName" name="companyName" value="<%= user.companyName || '' %>">
              </div>
              <div class="form-group">
                <label for="contactPerson"><%- t('buyerSettings.contactPerson') %></label>
                <input type="text" id="contactPerson" name="contactPerson" value="<%= user.contactPerson || '' %>">
              </div>
            </div>
            
            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" id="email" name="email" value="<%= user.email || '' %>">
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="phone"><%- t('buyerSettings.phone') %></label>
                <input type="tel" id="phone" name="phone" value="<%= user.phone || '' %>">
              </div>
              <div class="form-group">
                <label for="website"><%- t('buyerSettings.website') %></label>
                <input type="url" id="website" name="website" value="<%= user.website || '' %>">
              </div>
            </div>
            
            <div class="form-group">
              <label for="address"><%- t('buyerSettings.address') %></label>
              <textarea id="address" name="address" rows="3"><%= user.address || '' %></textarea>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="city"><%- t('buyerSettings.city') %></label>
                <input type="text" id="city" name="city" value="<%= user.city || '' %>">
              </div>
              <div class="form-group">
                <label for="country"><%- t('buyerSettings.country') %></label>
                <input type="text" id="country" name="country" value="<%= user.country || '' %>">
              </div>
            </div>
            
            <div class="form-group">
              <label for="bio"><%- t('buyerSettings.bio') %></label>
              <textarea id="bio" name="bio" rows="4" placeholder="<%- t('buyerSettings.bioPlaceholder') %>"><%= user.bio || '' %></textarea>
            </div>
            
            <div class="form-actions">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                <%- t('buyerSettings.saveChanges') %>
              </button>
            </div>
          </form>
        </div>

        <!-- Account Settings -->
        <div class="settings-section" id="account-section">
          <h3><%- t('buyerSettings.accountSettings') %></h3>
          <form id="accountSettingsForm">
            <div class="form-group">
              <label for="currentPassword"><%- t('buyerSettings.currentPassword') %></label>
              <input type="password" id="currentPassword" name="currentPassword" required>
            </div>
            
            <div class="form-group">
              <label for="newPassword"><%- t('buyerSettings.newPassword') %></label>
              <input type="password" id="newPassword" name="newPassword" required>
            </div>
            
            <div class="form-group">
              <label for="confirmPassword"><%- t('buyerSettings.confirmPassword') %></label>
              <input type="password" id="confirmPassword" name="confirmPassword" required>
            </div>
            
            <div class="form-actions">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-key"></i>
                <%- t('buyerSettings.changePassword') %>
              </button>
            </div>
          </form>
          
          <div class="settings-section-divider">
            <h4><%- t('buyerSettings.accountManagement') %></h4>
          </div>
          
          <div class="account-actions">
            <div class="action-item">
              <div class="action-info">
                <h5><%- t('buyerSettings.twoFactorAuth') %></h5>
                <p><%- t('buyerSettings.twoFactorAuthDesc') %></p>
              </div>
              <div class="action-toggle">
                <label class="switch">
                  <input type="checkbox">
                  <span class="slider"></span>
                </label>
              </div>
            </div>
            
            <div class="action-item">
              <div class="action-info">
                <h5><%- t('buyerSettings.loginAlerts') %></h5>
                <p><%- t('buyerSettings.loginAlertsDesc') %></p>
              </div>
              <div class="action-toggle">
                <label class="switch">
                  <input type="checkbox" checked>
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Notification Settings -->
        <div class="settings-section" id="notifications-section">
          <h3><%- t('buyerSettings.notificationSettings') %></h3>
          
          <div class="notification-preferences">
            <div class="preference-item">
              <div class="preference-info">
                <h5><%- t('buyerSettings.orderUpdates') %></h5>
                <p><%- t('buyerSettings.orderUpdatesDesc') %></p>
              </div>
              <div class="preference-toggle">
                <label class="switch">
                  <input type="checkbox" checked>
                  <span class="slider"></span>
                </label>
              </div>
            </div>
            
            <div class="preference-item">
              <div class="preference-info">
                <h5><%- t('buyerSettings.messageNotifications') %></h5>
                <p><%- t('buyerSettings.messageNotificationsDesc') %></p>
              </div>
              <div class="preference-toggle">
                <label class="switch">
                  <input type="checkbox" checked>
                  <span class="slider"></span>
                </label>
              </div>
            </div>
            
            <div class="preference-item">
              <div class="preference-info">
                <h5><%- t('buyerSettings.rfqResponses') %></h5>
                <p><%- t('buyerSettings.rfqResponsesDesc') %></p>
              </div>
              <div class="preference-toggle">
                <label class="switch">
                  <input type="checkbox" checked>
                  <span class="slider"></span>
                </label>
              </div>
            </div>
            
            <div class="preference-item">
              <div class="preference-info">
                <h5><%- t('buyerSettings.promotionalEmails') %></h5>
                <p><%- t('buyerSettings.promotionalEmailsDesc') %></p>
              </div>
              <div class="preference-toggle">
                <label class="switch">
                  <input type="checkbox">
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Preferences Settings -->
        <div class="settings-section" id="preferences-section">
          <h3><%- t('buyerSettings.preferenceSettings') %></h3>
          
          <div class="form-group">
            <label for="language"><%- t('buyerSettings.language') %></label>
            <select id="language" name="language">
              <option value="uz" <%= (lng === 'uz' || !lng) ? 'selected' : '' %>><%- t('buyerSettings.uzbek') %></option>
              <option value="en" <%= lng === 'en' ? 'selected' : '' %>><%- t('buyerSettings.english') %></option>
              <option value="ru" <%= lng === 'ru' ? 'selected' : '' %>><%- t('buyerSettings.russian') %></option>
              <option value="tr" <%= lng === 'tr' ? 'selected' : '' %>><%- t('buyerSettings.turkish') %></option>
              <option value="fa" <%= lng === 'fa' ? 'selected' : '' %>><%- t('buyerSettings.persian') %></option>
              <option value="zh" <%= lng === 'zh' ? 'selected' : '' %>><%- t('buyerSettings.chinese') %></option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="timezone"><%- t('buyerSettings.timezone') %></label>
            <select id="timezone" name="timezone">
              <option value="UTC+5"><%- t('buyerSettings.timezoneUTC5') %></option>
              <option value="UTC+0"><%- t('buyerSettings.timezoneUTC0') %></option>
              <option value="UTC-5"><%- t('buyerSettings.timezoneUTC5Minus') %></option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="dateFormat"><%- t('buyerSettings.dateFormat') %></label>
            <select id="dateFormat" name="dateFormat">
              <option value="DD/MM/YYYY">DD/MM/YYYY</option>
              <option value="MM/DD/YYYY">MM/DD/YYYY</option>
              <option value="YYYY-MM-DD">YYYY-MM-DD</option>
            </select>
          </div>
          
          <div class="form-group">
            <label><%- t('buyerSettings.theme') %></label>
            <div class="theme-options">
              <label class="theme-option">
                <input type="radio" name="theme" value="light" checked>
                <div class="theme-preview light">
                  <div class="preview-header"></div>
                  <div class="preview-content"></div>
                </div>
                <span><%- t('buyerSettings.light') %></span>
              </label>
              
              <label class="theme-option">
                <input type="radio" name="theme" value="dark">
                <div class="theme-preview dark">
                  <div class="preview-header"></div>
                  <div class="preview-content"></div>
                </div>
                <span><%- t('buyerSettings.dark') %></span>
              </label>
            </div>
          </div>
        </div>

        <!-- Security Settings -->
        <div class="settings-section" id="security-section">
          <h3><%- t('buyerSettings.securitySettings') %></h3>
          
          <div class="security-info">
            <div class="info-item">
              <div class="info-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div class="info-content">
                <h5><%- t('buyerSettings.lastLogin') %></h5>
                <p>Oct 12, 2024 14:30</p>
              </div>
            </div>
            
            <div class="info-item">
              <div class="info-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <div class="info-content">
                <h5><%- t('buyerSettings.lastLoginLocation') %></h5>
                <p>Tashkent, Uzbekistan</p>
              </div>
            </div>
            
            <div class="info-item">
              <div class="info-icon">
                <i class="fas fa-user-lock"></i>
              </div>
              <div class="info-content">
                <h5><%- t('buyerSettings.accountStatus') %></h5>
                <p class="status active"><%- t('buyerSettings.active') %></p>
              </div>
            </div>
          </div>
          
          <div class="security-actions">
            <button class="btn btn-outline">
              <i class="fas fa-history"></i>
              <%- t('buyerSettings.viewLoginHistory') %>
            </button>
            <button class="btn btn-outline">
              <i class="fas fa-key"></i>
              <%- t('buyerSettings.manageAPIKeys') %>
            </button>
            <button class="btn btn-danger">
              <i class="fas fa-sign-out-alt"></i>
              <%- t('buyerSettings.logoutAllDevices') %>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Settings JavaScript -->
<script src="/js/buyer/settings.js"></script>