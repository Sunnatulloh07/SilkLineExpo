<%- include('../partials/header', { title: title, lng: lng, admin: admin, user: user }) %>
<%- include('../partials/sidebar', { admin: admin, user: user }) %>

<!-- Main Content -->
<main class="admin-main">
  <div class="admin-content">
    
    <!-- Platform Status Banner (Real Backend Data) -->
    <div class="platform-status animate-fade-in <%= typeof stats !== 'undefined' && stats.platformStatus && stats.platformStatus.healthy ? 'status-healthy' : 'status-warning' %>">
      <div class="status-content">
        <div class="status-icon">
          <i class="fas <%= typeof stats !== 'undefined' && stats.platformStatus && stats.platformStatus.healthy ? 'fa-check' : 'fa-exclamation-triangle' %>"></i>
        </div>
        <div>
          <div class="status-text">
            <%= typeof stats !== 'undefined' && stats.platformStatus && stats.platformStatus.healthy ? 
                (typeof t !== 'undefined' ? t('admin.dashboard.platform_working') : 'SilkInExpo platform is working') :
                'Platform experiencing issues' %>
          </div>
          <div class="status-subtext">
            <%= typeof stats !== 'undefined' && stats.platformStatus && stats.platformStatus.message ? 
                stats.platformStatus.message : 
                (typeof t !== 'undefined' ? t('admin.dashboard.all_services_operational') : 'All services are working fine') %>
          </div>
        </div>
      </div>
      
      <div class="status-metrics">
        <div class="status-metric">
          <div class="status-metric-value">
            <%= typeof stats !== 'undefined' && stats.systemHealth && stats.systemHealth.uptime ? 
                stats.systemHealth.uptime : '99.9%' %>
          </div>
          <div class="status-metric-label">
            <%= typeof t !== 'undefined' ? t('admin.dashboard.uptime') : 'Uptime' %>
          </div>
        </div>
        <div class="status-metric">
          <div class="status-metric-value">
            <%= typeof stats !== 'undefined' && stats.systemHealth && stats.systemHealth.responseTime ? 
                stats.systemHealth.responseTime : '&lt; 50ms' %>
          </div>
          <div class="status-metric-label">
            <%= typeof t !== 'undefined' ? t('admin.dashboard.response_time') : 'Response Time' %>
          </div>
        </div>
        <div class="status-metric">
          <div class="status-metric-value">
            <%= typeof stats !== 'undefined' && stats.systemHealth && stats.systemHealth.memory ? 
                stats.systemHealth.memory.percent + '%' : '78%' %>
          </div>
          <div class="status-metric-label">Memory</div>
        </div>
      </div>
    </div>
    
    <!-- Statistics Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-lg mb-lg">
      
      <!-- Total Users -->
      <div class="stat-card animate-fade-in" data-stat="totalUsers">
        <div class="stat-header">
          <h3 class="stat-title">
            <%= typeof t !== 'undefined' ? t('admin.dashboard.total_users') : 'Total Users' %>
          </h3>
          <div class="stat-icon">
            <i class="fas fa-users"></i>
          </div>
        </div>
        <div class="stat-value">
          <%= typeof stats !== 'undefined' && stats.overview && stats.overview.totalUsers ? stats.overview.totalUsers.toLocaleString() : '0' %>
        </div>
        <div class="stat-change <%= typeof stats !== 'undefined' && stats.trends && stats.trends.usersChange && stats.trends.usersChange.isPositive ? 'positive' : (stats.trends && stats.trends.usersChange && stats.trends.usersChange.value !== 0 ? 'negative' : '') %>">
          <i class="fas fa-arrow-<%= typeof stats !== 'undefined' && stats.trends && stats.trends.usersChange && stats.trends.usersChange.isPositive ? 'up' : (stats.trends && stats.trends.usersChange && stats.trends.usersChange.value !== 0 ? 'down' : 'right') %> stat-change-icon"></i>
          <span><%= typeof stats !== 'undefined' && stats.trends && stats.trends.usersChange ? (stats.trends.usersChange.isPositive ? '+' : '') + stats.trends.usersChange.value + '%' : '0%' %> 
            <%= typeof t !== 'undefined' ? t('admin.dashboard.from_last_month') : 'from last month' %>
          </span>
        </div>
      </div>
      
      <!-- Active Users -->
      <div class="stat-card success animate-fade-in" data-stat="activeUsers">
        <div class="stat-header">
          <h3 class="stat-title">
            <%= typeof t !== 'undefined' ? t('admin.dashboard.active_users') : 'Active Users' %>
          </h3>
          <div class="stat-icon success">
            <i class="fas fa-user-check"></i>
          </div>
        </div>
        <div class="stat-value">
          <%= typeof stats !== 'undefined' && stats.overview && stats.overview.activeUsers ? stats.overview.activeUsers.toLocaleString() : '0' %>
        </div>
        <div class="stat-change <%= typeof stats !== 'undefined' && stats.trends && stats.trends.activeUsersChange && stats.trends.activeUsersChange.isPositive ? 'positive' : (stats.trends && stats.trends.activeUsersChange && stats.trends.activeUsersChange.value !== 0 ? 'negative' : '') %>">
          <i class="fas fa-arrow-<%= typeof stats !== 'undefined' && stats.trends && stats.trends.activeUsersChange && stats.trends.activeUsersChange.isPositive ? 'up' : (stats.trends && stats.trends.activeUsersChange && stats.trends.activeUsersChange.value !== 0 ? 'down' : 'right') %> stat-change-icon"></i>
          <span><%= typeof stats !== 'undefined' && stats.trends && stats.trends.activeUsersChange ? (stats.trends.activeUsersChange.isPositive ? '+' : '') + stats.trends.activeUsersChange.value + '%' : '0%' %> 
            <%= typeof t !== 'undefined' ? t('admin.dashboard.from_last_month') : 'from last month' %>
          </span>
        </div>
      </div>
      
      <!-- Pending Approvals -->
      <div class="stat-card warning animate-fade-in" data-stat="pendingApprovals">
        <div class="stat-header">
          <h3 class="stat-title">
            <%= typeof t !== 'undefined' ? t('admin.dashboard.pending_approvals') : 'Pending Approvals' %>
          </h3>
          <div class="stat-icon warning">
            <i class="fas fa-clock"></i>
          </div>
        </div>
        <div class="stat-value">
          <%= typeof stats !== 'undefined' && stats.overview && stats.overview.pendingApprovals ? stats.overview.pendingApprovals.toLocaleString() : '0' %>
        </div>
        <div class="stat-change">
          <span>
            <%= typeof t !== 'undefined' ? t('admin.dashboard.requires_attention') : 'Requires Attention' %>
          </span>
        </div>
      </div>
      
      <!-- USD Revenue -->
      <div class="stat-card success animate-fade-in" data-stat="revenue">
        <div class="stat-header">
          <h3 class="stat-title">
            <%= typeof t !== 'undefined' ? t('admin.dashboard.usd_revenue') : 'USD Revenue' %>
          </h3>
          <div class="stat-icon success">
            <i class="fas fa-dollar-sign"></i>
          </div>
        </div>
        <div class="stat-value" id="totalRevenueValue">
          <% if (typeof stats !== 'undefined' && stats.overview && stats.overview.totalRevenue !== undefined && stats.overview.totalRevenue !== null) { %>
            $<%= stats.overview.totalRevenue.toLocaleString() %>
          <% } else { %>
            $0
          <% } %>
        </div>
        <div class="stat-change <%= typeof stats !== 'undefined' && stats.trends && stats.trends.revenueChange && stats.trends.revenueChange.isPositive ? 'positive' : (stats.trends && stats.trends.revenueChange && stats.trends.revenueChange.value !== 0 ? 'negative' : '') %>">
          <i class="fas fa-arrow-<%= typeof stats !== 'undefined' && stats.trends && stats.trends.revenueChange && stats.trends.revenueChange.isPositive ? 'up' : (stats.trends && stats.trends.revenueChange && stats.trends.revenueChange.value !== 0 ? 'down' : 'right') %> stat-change-icon"></i>
          <span><%= typeof stats !== 'undefined' && stats.trends && stats.trends.revenueChange ? (stats.trends.revenueChange.isPositive ? '+' : '') + stats.trends.revenueChange.value + '%' : '0%' %> 
            <%= typeof t !== 'undefined' ? t('admin.dashboard.from_last_month') : 'from last month' %>
          </span>
        </div>
      </div>
      
    </div>
    
    <!-- Charts and Actions Row -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-lg mb-lg">
      
      <!-- Growth Analytics Chart -->
      <div class="col-span-2">
        <div class="chart-container animate-fade-in">
          <div class="chart-header">
            <h3 class="chart-title">
              <%= typeof t !== 'undefined' ? t('admin.dashboard.growth_analytics') : 'Growth Analytics' %>
            </h3>
            <div class="chart-actions">
              <select id="chartPeriodFilter" class="chart-period-select">
                <option value="30">30 <%= typeof t !== 'undefined' ? t('admin.dashboard.days') : 'days' %></option>
                <option value="90" selected>90 <%= typeof t !== 'undefined' ? t('admin.dashboard.days') : 'days' %></option>
                <option value="365">1 <%= typeof t !== 'undefined' ? t('admin.dashboard.year') : 'year' %></option>
              </select>
              <button id="refreshChart" class="chart-refresh-btn" title="Refresh Chart">
                <i class="fas fa-sync-alt"></i>
              </button>
            </div>
          </div>
          <div class="chart-body">
            <div id="growthChart" class="chart-placeholder">
              <div class="chart-loading">
                <div class="loading-spinner"></div>
                <span>Loading analytics...</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Quick Actions -->
      <div class="col-span-1">
        <div class="quick-actions animate-fade-in">
          <div class="quick-actions-header">
            <h3 class="quick-actions-title">
              <%= typeof t !== 'undefined' ? t('admin.dashboard.quick_actions') : 'Quick Actions' %>
            </h3>
          </div>
          <div class="quick-actions-grid">
            
            <a href="/admin/users/create" class="quick-action" data-action="add-user">
              <div class="quick-action-icon">
                <i class="fas fa-user-plus"></i>
              </div>
              <div class="quick-action-text">
                <%= typeof t !== 'undefined' ? t('admin.dashboard.add_user') : 'Add User' %>
              </div>
            </a>
            
            <button class="quick-action" data-action="approve-pending">
              <div class="quick-action-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="quick-action-text">
                <%= typeof t !== 'undefined' ? t('admin.dashboard.approve_pending') : 'Approve Pending' %>
              </div>
            </button>
            
            <button class="quick-action" data-action="export-data">
              <div class="quick-action-icon">
                <i class="fas fa-download"></i>
              </div>
              <div class="quick-action-text">
                <%= typeof t !== 'undefined' ? t('admin.dashboard.export_data') : 'Export Data' %>
              </div>
            </button>
            
            <a href="/admin/settings" class="quick-action" data-action="settings">
              <div class="quick-action-icon">
                <i class="fas fa-cog"></i>
              </div>
              <div class="quick-action-text">
                <%= typeof t !== 'undefined' ? t('admin.dashboard.settings') : 'Settings' %>
              </div>
            </a>
            
          </div>
        </div>
      </div>
      
    </div>
    
    <!-- Status and Activity Row -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-lg mb-lg">
      
      <!-- System Status -->
      <div class="status-container animate-fade-in">
        <div class="status-header">
          <h3 class="status-title">
            <%= typeof t !== 'undefined' ? t('admin.dashboard.system_status') : 'System Status' %>
          </h3>
        </div>
        <div class="status-grid">
          
          <!-- Database Status -->
          <div class="status-item">
            <div class="status-item-icon success">
              <i class="fas fa-database"></i>
            </div>
            <div class="status-item-content">
              <div class="status-item-label">
                <%= typeof t !== 'undefined' ? t('admin.dashboard.database') : 'Database' %>
              </div>
              <div class="status-item-value success">
                <%= typeof t !== 'undefined' ? t('admin.dashboard.operational') : 'Operational' %>
              </div>
            </div>
          </div>
          
          <!-- Server Status -->
          <div class="status-item">
            <div class="status-item-icon success">
              <i class="fas fa-server"></i>
            </div>
            <div class="status-item-content">
              <div class="status-item-label">Server</div>
              <div class="status-item-value success">
                <%= typeof t !== 'undefined' ? t('admin.dashboard.operational') : 'Operational' %>
              </div>
            </div>
          </div>
          
          <!-- Memory Usage -->
          <div class="status-item">
            <div class="status-item-icon warning">
              <i class="fas fa-memory"></i>
            </div>
            <div class="status-item-content">
              <div class="status-item-label">
                <%= typeof t !== 'undefined' ? t('admin.dashboard.memory') : 'Memory' %>
              </div>
              <div class="status-item-value warning">
                78% <%= typeof t !== 'undefined' ? t('admin.dashboard.used') : 'Used' %>
              </div>
            </div>
          </div>
          
          <!-- Storage -->
          <div class="status-item">
            <div class="status-item-icon">
              <i class="fas fa-hdd"></i>
            </div>
            <div class="status-item-content">
              <div class="status-item-label">Storage</div>
              <div class="status-item-value">
                45% <%= typeof t !== 'undefined' ? t('admin.dashboard.used') : 'Used' %>
              </div>
            </div>
          </div>
          
        </div>
        
        
        <!-- System Health Metrics -->
        <div class="system-health-metrics">
          <div class="health-metric">
            <span class="health-label">Uptime:</span>
            <span class="health-value">
              <%= typeof stats !== 'undefined' && stats.systemHealth && stats.systemHealth.uptime ? stats.systemHealth.uptime : '99.9%' %>
            </span>
          </div>
          <div class="health-metric">
            <span class="health-label">Response Time:</span>
            <span class="health-value">
              <%= typeof stats !== 'undefined' && stats.systemHealth && stats.systemHealth.responseTime ? stats.systemHealth.responseTime : '<50ms' %>
            </span>
          </div>
          <div class="health-metric">
            <span class="health-label">Total Active Users:</span>
            <span class="health-value">
              <%= typeof stats !== 'undefined' && stats.overview && stats.overview.activeUsers ? stats.overview.activeUsers.toLocaleString() : '0' %>
            </span>
          </div>
        </div>
        
      </div>
      
      <!-- Recent Activity -->
      <div class="activity-container animate-fade-in">
        <div class="activity-header">
          <h3 class="activity-title">
            <%= typeof t !== 'undefined' ? t('admin.dashboard.recent_activity') : 'Recent Activity' %>
          </h3>
          <div class="activity-actions">
            <button class="btn-filter">
              <%= typeof t !== 'undefined' ? t('admin.dashboard.filter') : 'Filter' %>
            </button>
            <a href="/admin/activity" class="btn-view-all">
              <%= typeof t !== 'undefined' ? t('admin.dashboard.view_all') : 'View All' %>
            </a>
          </div>
        </div>
        <div class="activity-list">
          
          <% if (typeof stats !== 'undefined' && stats.recentActivity && stats.recentActivity.length > 0) { %>
            <% stats.recentActivity.slice(0, 4).forEach((activity) => { %>
              <div class="activity-item">
                <div class="activity-avatar">
                  <%= activity.companyName ? activity.companyName.charAt(0).toUpperCase() : 'U' %>
                </div>
                <div class="activity-content">
                  <div class="activity-text">
                    <strong><%= activity.companyName || 'New User' %></strong> 
                    <% if (activity.status === 'active') { %>
                      <%= typeof t !== 'undefined' ? t('admin.dashboard.new_user_registered') : 'registered and approved' %>
                    <% } else if (activity.status === 'blocked') { %>
                      <%= typeof t !== 'undefined' ? t('admin.dashboard.new_user_registered') : 'registered (pending approval)' %>
                    <% } else { %>
                      <%= typeof t !== 'undefined' ? t('admin.dashboard.new_user_registered') : 'registered' %>
                    <% } %>
                  </div>
                  <div class="activity-meta">
                    <span class="activity-badge <%= activity.status === 'active' ? 'badge-success' : activity.status === 'blocked' ? 'badge-warning' : 'badge-primary' %>">
                      <%= activity.country || 'USER' %>
                    </span>
                    <span data-timestamp="<%= activity.createdAt %>">
                      <%= new Date(activity.createdAt).toLocaleDateString() %>
                    </span>
                  </div>
                </div>
              </div>
            <% }); %>
          <% } else { %>
            <!-- Default Activity when no data -->
            <div class="activity-item">
              <div class="activity-avatar">A</div>
              <div class="activity-content">
                <div class="activity-text">
                  <strong>Admin User</strong> 
                  <%= typeof t !== 'undefined' ? t('admin.dashboard.dashboard_access') : 'accessed dashboard' %>
                </div>
                <div class="activity-meta">
                  <span class="activity-badge badge-success">
                    <%= typeof t !== 'undefined' ? t('admin.dashboard.system') : 'SYSTEM' %>
                  </span>
                  <span data-timestamp="<%= new Date().toISOString() %>">
                    <%= typeof t !== 'undefined' ? t('admin.dashboard.just_now') : 'Just now' %>
                  </span>
                </div>
              </div>
            </div>
            
            <div class="activity-item">
              <div class="activity-avatar">U</div>
              <div class="activity-content">
                <div class="activity-text">
                  <strong>New User</strong> 
                  <%= typeof t !== 'undefined' ? t('admin.dashboard.new_user_registered') : 'registered for marketplace' %>
                </div>
                <div class="activity-meta">
                  <span class="activity-badge badge-primary">
                    <%= typeof t !== 'undefined' ? t('admin.dashboard.user') : 'USER' %>
                  </span>
                  <span>
                    <%= typeof t !== 'undefined' ? t('admin.dashboard.5_min_ago') : '5 min ago' %>
                  </span>
                </div>
              </div>
            </div>
            
            <div class="activity-item">
              <div class="activity-avatar">C</div>
              <div class="activity-content">
                <div class="activity-text">
                  <strong>Company XYZ</strong> 
                  <%= typeof t !== 'undefined' ? t('admin.dashboard.company_application_approved') : 'application approved' %>
                </div>
                <div class="activity-meta">
                  <span class="activity-badge badge-success">
                    <%= typeof t !== 'undefined' ? t('admin.dashboard.approval') : 'APPROVAL' %>
                  </span>
                  <span>
                    <%= typeof t !== 'undefined' ? t('admin.dashboard.15_min_ago') : '15 min ago' %>
                  </span>
                </div>
              </div>
            </div>
            
            <div class="activity-item">
              <div class="activity-avatar">S</div>
              <div class="activity-content">
                <div class="activity-text">
                  <strong>System</strong> 
                  <%= typeof t !== 'undefined' ? t('admin.dashboard.automatic_backup_completed') : 'backup completed successfully' %>
                </div>
                <div class="activity-meta">
                  <span class="activity-badge badge-success">
                    <%= typeof t !== 'undefined' ? t('admin.dashboard.system') : 'SYSTEM' %>
                  </span>
                  <span>
                    <%= typeof t !== 'undefined' ? t('admin.dashboard.1_hour_ago') : '1 hour ago' %>
                  </span>
                </div>
              </div>
            </div>
          <% } %>
          
        </div>
      </div>
      
    </div>
    
    <!-- Pending Approvals Table -->
    <% if (typeof stats !== 'undefined' && stats.pendingApprovalsList && stats.pendingApprovalsList.length > 0) { %>
      <div class="pending-approvals-section animate-fade-in">
        <div class="pending-approvals-header">
          <h3 class="pending-approvals-title">
            <i class="fas fa-clock"></i>
            Pending Approvals (<%= stats.pendingApprovalsList.length %>)
          </h3>
          <div class="pending-actions-toolbar">
            <button class="btn-bulk-approve" data-action="bulk-approve">
              <i class="fas fa-check-double"></i>
              Bulk Approve
            </button>
            <button class="btn-bulk-reject" data-action="bulk-reject">
              <i class="fas fa-times-circle"></i>
              Bulk Reject
            </button>
            <a href="/admin/users?tab=pending&status=pending" class="btn-view-all">
              <i class="fas fa-list"></i>
              View All
            </a>
          </div>
        </div>
        
        <div class="pending-approvals-table-container">
          <table class="pending-approvals-table">
            <thead>
              <tr>
                <th class="checkbox-col">
                  <input type="checkbox" id="selectAll" onchange="toggleSelectAll(this)">
                </th>
                <th class="company-col">Company</th>
                <th class="email-col">Email</th>
                <th class="country-col">Country</th>
                <th class="days-col">Days Pending</th>
                <th class="status-col">Status</th>
                <th class="actions-col">Actions</th>
              </tr>
            </thead>
            <tbody>
              <% stats.pendingApprovalsList.forEach((user, index) => { %>
                <tr class="pending-row" data-user-id="<%= user._id || user.id %>">
                  <td class="checkbox-col">
                    <input type="checkbox" class="user-checkbox" value="<%= user._id || user.id %>">
                  </td>
                  <td class="company-col">
                    <div class="company-info">
                      <div class="company-avatar">
                        <%= user.companyName ? user.companyName.charAt(0).toUpperCase() : 'U' %>
                      </div>
                      <div class="company-details">
                        <div class="company-name"><%= user.companyName %></div>
                        <div class="company-type"><%= user.businessType || 'Business' %></div>
                      </div>
                    </div>
                  </td>
                  <td class="email-col">
                    <span class="email-text"><%= user.email %></span>
                  </td>
                  <td class="country-col">
                    <span class="country-badge"><%= user.country || 'N/A' %></span>
                  </td>
                  <td class="days-col">
                    <span class="days-badge <%= user.daysPending > 7 ? 'urgent' : user.daysPending > 3 ? 'warning' : 'normal' %>">
                      <%= user.daysPending %> days
                    </span>
                  </td>
                  <td class="status-col">
                    <span class="status-badge pending">
                      <i class="fas fa-clock"></i>
                      Pending
                    </span>
                  </td>
                  <td class="actions-col">
                    <div class="action-buttons">
                      <button class="btn-action btn-view" data-action="view" data-user-id="<%= user._id || user.id %>" 
                              title="View Details">
                        <i class="fas fa-eye"></i>
                      </button>
                      <button class="btn-action btn-approve" data-action="approve" data-user-id="<%= user._id || user.id %>" 
                              title="Approve">
                        <i class="fas fa-check"></i>
                      </button>
                      <button class="btn-action btn-reject" data-action="reject" data-user-id="<%= user._id || user.id %>" 
                              title="Reject">
                        <i class="fas fa-times"></i>
                      </button>
                      <button class="btn-action btn-delete" data-action="delete" data-user-id="<%= user._id || user.id %>" 
                              title="Delete">
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      </div>
    <% } %>

  </div>
</main>

<!-- Loading Overlay -->
<div id="loadingOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-modal">
  <div class="bg-card p-6 rounded-lg shadow-xl flex items-center gap-4">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
    <span class="text-card-foreground">
      <%= typeof t !== 'undefined' ? t('admin.dashboard.loading') : 'Loading...' %>
    </span>
  </div>
</div>

<!-- JavaScript Libraries (Using Local Assets) -->
<script src="/assets/js/jquery-3.7.1.min.js"></script>
<script src="/assets/js/boostrap.bundle.min.js"></script>
<script src="/assets/js/apexchart.js"></script>

<!-- Dashboard Real Data Integration -->
<script id="dashboard-data" type="application/json">
<%- JSON.stringify({
  stats: stats || {},
  admin: admin || {},
  currentLanguage: typeof lng !== "undefined" ? lng : "uz",
  timestamp: new Date().toISOString()
}) %>
</script>

<script>
// Parse dashboard data safely
try {
  const dataElement = document.getElementById('dashboard-data');
  window.dashboardData = JSON.parse(dataElement.textContent);
  window.dashboardChartData = null;
} catch (error) {
  console.error('Dashboard data loading error:', error);
  window.dashboardData = {
    stats: {},
    admin: {},
    currentLanguage: 'uz',
    timestamp: new Date().toISOString()
  };
  window.dashboardChartData = null;
}
</script>

<!-- Toast Notification Styles -->
<style>
/* Toast Container */
#toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 10000;
  pointer-events: none;
}

/* Toast Base Styles */
.toast {
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  margin-bottom: 10px;
  padding: 16px 20px;
  min-width: 300px;
  max-width: 400px;
  pointer-events: auto;
  transform: translateX(100%);
  transition: all 0.3s ease;
  border-left: 4px solid #007bff;
  display: flex;
  align-items: center;
  gap: 12px;
}

.toast.show {
  transform: translateX(0);
}

.toast.hide {
  transform: translateX(100%);
  opacity: 0;
}

/* Toast Types */
.toast.success {
  border-left-color: #28a745;
  background: #f8fff9;
}

.toast.error {
  border-left-color: #dc3545;
  background: #fff8f8;
}

.toast.warning {
  border-left-color: #ffc107;
  background: #fffdf7;
}

.toast.info {
  border-left-color: #17a2b8;
  background: #f7fdff;
}

/* Toast Icon */
.toast-icon {
  font-size: 18px;
  flex-shrink: 0;
}

.toast.success .toast-icon {
  color: #28a745;
}

.toast.error .toast-icon {
  color: #dc3545;
}

.toast.warning .toast-icon {
  color: #ffc107;
}

.toast.info .toast-icon {
  color: #17a2b8;
}

/* Toast Content */
.toast-content {
  flex: 1;
}

.toast-message {
  font-size: 14px;
  font-weight: 500;
  color: #333;
  margin: 0;
}

/* Toast Close Button */
.toast-close {
  background: none;
  border: none;
  font-size: 16px;
  color: #999;
  cursor: pointer;
  padding: 0;
  margin-left: 8px;
  flex-shrink: 0;
}

.toast-close:hover {
  color: #666;
}

/* Loading States */
.btn-action.loading {
  opacity: 0.6;
  pointer-events: none;
  position: relative;
}

.btn-action.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 16px;
  height: 16px;
  margin: -8px 0 0 -8px;
  border: 2px solid transparent;
  border-top: 2px solid currentColor;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* User Details Modal */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.user-details-modal {
  background: white;
  border-radius: 12px;
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.modal-header {
  padding: 20px 24px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #333;
}

.modal-close {
  background: none;
  border: none;
  font-size: 20px;
  color: #999;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
}

.modal-close:hover {
  background: #f5f5f5;
  color: #666;
}

.modal-body {
  padding: 24px;
}

.user-details-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
}

.detail-section h4 {
  margin: 0 0 16px 0;
  font-size: 16px;
  font-weight: 600;
  color: #333;
  border-bottom: 2px solid #f0f0f0;
  padding-bottom: 8px;
}

.detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid #f8f8f8;
}

.detail-label {
  font-weight: 500;
  color: #666;
}

.detail-value {
  font-weight: 400;
  color: #333;
  text-align: right;
}

.modal-footer {
  padding: 20px 24px;
  border-top: 1px solid #eee;
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.modal-footer button {
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-secondary {
  background: #f8f9fa;
  color: #6c757d;
}

.btn-secondary:hover {
  background: #e9ecef;
}

.btn-approve {
  background: #28a745;
  color: white;
}

.btn-approve:hover {
  background: #218838;
}

.btn-reject {
  background: #dc3545;
  color: white;
}

.btn-reject:hover {
  background: #c82333;
}

/* Professional Confirmation Modals */
.confirmation-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10001;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.confirmation-modal.show {
  opacity: 1;
  visibility: visible;
}

.confirmation-modal-content {
  background: white;
  border-radius: 12px;
  max-width: 500px;
  width: 90%;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  transform: scale(0.9) translateY(-20px);
  transition: all 0.3s ease;
}

.confirmation-modal.show .confirmation-modal-content {
  transform: scale(1) translateY(0);
}

.confirmation-modal-header {
  padding: 24px 24px 16px 24px;
  border-bottom: 1px solid #eee;
  display: flex;
  align-items: center;
  gap: 12px;
}

.confirmation-modal-icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.confirmation-modal-icon.approve {
  background: #e8f5e8;
  color: #28a745;
}

.confirmation-modal-icon.reject {
  background: #fdeaea;
  color: #dc3545;
}

.confirmation-modal-icon.delete {
  background: #fff3cd;
  color: #856404;
}

.confirmation-modal-icon.bulk {
  background: #e3f2fd;
  color: #1976d2;
}

.confirmation-modal-title {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: #333;
}

.confirmation-modal-body {
  padding: 20px 24px;
}

.confirmation-modal-message {
  font-size: 16px;
  color: #666;
  margin: 0 0 20px 0;
  line-height: 1.5;
}

.confirmation-modal-details {
  background: #f8f9fa;
  border-radius: 8px;
  padding: 16px;
  margin: 16px 0;
  border-left: 4px solid #007bff;
}

.confirmation-modal-detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 0;
}

.confirmation-modal-detail-label {
  font-weight: 500;
  color: #555;
}

.confirmation-modal-detail-value {
  color: #333;
  font-weight: 600;
}

.confirmation-modal-input {
  width: 100%;
  padding: 12px 16px;
  border: 2px solid #e1e5e9;
  border-radius: 8px;
  font-size: 14px;
  transition: border-color 0.2s ease;
  resize: vertical;
  min-height: 80px;
  font-family: inherit;
}

.confirmation-modal-input:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.confirmation-modal-input.error {
  border-color: #dc3545;
}

.confirmation-modal-error {
  color: #dc3545;
  font-size: 14px;
  margin-top: 8px;
  display: none;
}

.confirmation-modal-error.show {
  display: block;
}

.confirmation-modal-footer {
  padding: 16px 24px 24px 24px;
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.confirmation-modal-btn {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.confirmation-modal-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.confirmation-modal-btn.secondary {
  background: #f8f9fa;
  color: #6c757d;
  border: 1px solid #dee2e6;
}

.confirmation-modal-btn.secondary:hover:not(:disabled) {
  background: #e9ecef;
  border-color: #adb5bd;
}

.confirmation-modal-btn.primary {
  background: #007bff;
  color: white;
}

.confirmation-modal-btn.primary:hover:not(:disabled) {
  background: #0056b3;
}

.confirmation-modal-btn.success {
  background: #28a745;
  color: white;
}

.confirmation-modal-btn.success:hover:not(:disabled) {
  background: #218838;
}

.confirmation-modal-btn.danger {
  background: #dc3545;
  color: white;
}

.confirmation-modal-btn.danger:hover:not(:disabled) {
  background: #c82333;
}

.confirmation-modal-btn.loading::after {
  content: '';
  width: 16px;
  height: 16px;
  border: 2px solid transparent;
  border-top: 2px solid currentColor;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-left: 8px;
}

/* Bulk Actions Feedback */
.bulk-actions-feedback {
  position: fixed;
  top: 80px;
  right: 20px;
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  padding: 16px 20px;
  min-width: 300px;
  max-width: 400px;
  z-index: 9998;
  transform: translateX(100%);
  transition: all 0.3s ease;
  border-left: 4px solid #007bff;
}

.bulk-actions-feedback.show {
  transform: translateX(0);
}

.bulk-actions-feedback.success {
  border-left-color: #28a745;
  background: #f8fff9;
}

.bulk-actions-feedback.error {
  border-left-color: #dc3545;
  background: #fff8f8;
}

.bulk-actions-feedback.info {
  border-left-color: #17a2b8;
  background: #f7fdff;
}

.bulk-actions-feedback i {
  color: inherit;
}

.bulk-actions-feedback.success i {
  color: #28a745;
}

.bulk-actions-feedback.error i {
  color: #dc3545;
}

.bulk-actions-feedback.info i {
  color: #17a2b8;
}

@media (max-width: 768px) {
  .user-details-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .detail-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }
  
  .detail-value {
    text-align: left;
  }
  
  .bulk-actions-feedback {
    right: 10px;
    left: 10px;
    min-width: auto;
    max-width: none;
  }

  .confirmation-modal-content {
    width: 95%;
    margin: 20px;
  }

  .confirmation-modal-header {
    padding: 20px 16px 12px 16px;
  }

  .confirmation-modal-body {
    padding: 16px;
  }

  .confirmation-modal-footer {
    padding: 12px 16px 20px 16px;
    flex-direction: column;
  }

  .confirmation-modal-btn {
    width: 100%;
    justify-content: center;
  }

  .confirmation-modal-details {
    padding: 12px;
  }

  .confirmation-modal-detail-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }

  .confirmation-modal-title {
    font-size: 18px;
  }

  .confirmation-modal-message {
    font-size: 14px;
  }
}

/* Professional User Details Modal */
.user-details-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10002;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.user-details-modal-overlay.show {
  opacity: 1;
  visibility: visible;
}

.user-details-modal-container {
  background: white;
  border-radius: 16px;
  max-width: 800px;
  width: 95%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
  transform: scale(0.9) translateY(-30px);
  transition: all 0.3s ease;
}

.user-details-modal-overlay.show .user-details-modal-container {
  transform: scale(1) translateY(0);
}

.user-details-modal-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 24px 32px;
  border-radius: 16px 16px 0 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.user-details-modal-header-content {
  display: flex;
  align-items: center;
  gap: 16px;
}

.user-details-modal-avatar {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: bold;
  color: white;
  border: 3px solid rgba(255, 255, 255, 0.3);
}

.user-details-modal-header-info h2 {
  margin: 0 0 4px 0;
  font-size: 24px;
  font-weight: 600;
}

.user-details-modal-header-info p {
  margin: 0;
  opacity: 0.9;
  font-size: 14px;
}

.user-details-modal-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  transition: all 0.2s ease;
}

.user-details-modal-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.user-details-modal-body {
  padding: 32px;
}

.user-details-tabs {
  display: flex;
  border-bottom: 2px solid #f1f3f4;
  margin-bottom: 24px;
  gap: 8px;
}

.user-details-tab {
  padding: 12px 20px;
  background: none;
  border: none;
  font-size: 14px;
  font-weight: 500;
  color: #666;
  cursor: pointer;
  border-radius: 8px 8px 0 0;
  transition: all 0.2s ease;
  position: relative;
}

.user-details-tab.active {
  color: #667eea;
  background: #f8f9ff;
}

.user-details-tab.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background: #667eea;
}

.user-details-tab:hover:not(.active) {
  background: #f5f5f5;
  color: #333;
}

.user-details-tab-content {
  display: none;
}

.user-details-tab-content.active {
  display: block;
}

.user-details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
}

.user-details-section {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 20px;
  border-left: 4px solid #667eea;
}

.user-details-section h4 {
  margin: 0 0 16px 0;
  font-size: 16px;
  font-weight: 600;
  color: #333;
  display: flex;
  align-items: center;
  gap: 8px;
}

.user-details-section h4 i {
  color: #667eea;
}

.user-details-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 8px 0;
  border-bottom: 1px solid #e9ecef;
}

.user-details-item:last-child {
  border-bottom: none;
}

.user-details-label {
  font-weight: 500;
  color: #555;
  min-width: 120px;
}

.user-details-value {
  color: #333;
  font-weight: 400;
  text-align: right;
  flex: 1;
  word-break: break-word;
}

.user-details-status-badge {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
}

.user-details-status-badge.pending {
  background: #fff3cd;
  color: #856404;
}

.user-details-status-badge.active {
  background: #d4edda;
  color: #155724;
}

.user-details-status-badge.rejected {
  background: #f8d7da;
  color: #721c24;
}

.user-details-status-badge.blocked {
  background: #f5c6cb;
  color: #721c24;
}

.user-details-timeline {
  position: relative;
  padding-left: 24px;
}

.user-details-timeline::before {
  content: '';
  position: absolute;
  left: 8px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: #e9ecef;
}

.user-details-timeline-item {
  position: relative;
  margin-bottom: 16px;
  padding: 12px 16px;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.user-details-timeline-item::before {
  content: '';
  position: absolute;
  left: -20px;
  top: 16px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #667eea;
  border: 3px solid white;
  box-shadow: 0 0 0 2px #e9ecef;
}

.user-details-timeline-date {
  font-size: 12px;
  color: #666;
  margin-bottom: 4px;
}

.user-details-timeline-event {
  font-weight: 500;
  color: #333;
  margin-bottom: 4px;
}

.user-details-timeline-description {
  font-size: 14px;
  color: #666;
}

.user-details-modal-footer {
  padding: 24px 32px;
  border-top: 1px solid #e9ecef;
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  background: #f8f9fa;
  border-radius: 0 0 16px 16px;
}

.user-details-modal-btn {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.user-details-modal-btn.secondary {
  background: #6c757d;
  color: white;
}

.user-details-modal-btn.secondary:hover {
  background: #5a6268;
}

.user-details-modal-btn.success {
  background: #28a745;
  color: white;
}

.user-details-modal-btn.success:hover {
  background: #218838;
}

.user-details-modal-btn.danger {
  background: #dc3545;
  color: white;
}

.user-details-modal-btn.danger:hover {
  background: #c82333;
}

@media (max-width: 768px) {
  .user-details-modal-container {
    width: 98%;
    margin: 10px;
    max-height: 95vh;
  }

  .user-details-modal-header {
    padding: 20px 16px;
  }

  .user-details-modal-body {
    padding: 20px 16px;
  }

  .user-details-modal-footer {
    padding: 16px;
    flex-direction: column;
  }

  .user-details-modal-btn {
    width: 100%;
    justify-content: center;
  }

  .user-details-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .user-details-tabs {
    flex-wrap: wrap;
  }

  .user-details-tab {
    flex: 1;
    min-width: 120px;
  }
}
</style>

<!-- Custom Scripts -->
<script src="/admin/js/dashboard.js"></script>

<!-- Dashboard Initialization - Professional Level -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Dashboard initialization is handled by dashboard.js
  // No duplicate intervals or object references
  console.log('✅ Dashboard template loaded - initialization delegated to dashboard.js');
});
</script>

</body>
</html> 