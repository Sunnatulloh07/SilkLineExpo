<%- include('../partials/header') %>
<%- include('../partials/navigation', { 
  cartItemsCount: cartItemsCount || 0, 
  activeOrdersCount: activeOrdersCount || 0, 
  unreadMessagesCount: unreadMessagesCount || 0,
  favoritesCount: favoritesCount || 0 
}) %>

<!-- Professional Alibaba-Style B2B Product Detail Page -->
<!-- Senior Software Engineer Implementation -->

<!-- Enhanced CSS for Professional B2B Design -->
<link rel="stylesheet" href="/assets/css/product-detail-professional.css">
<link rel="stylesheet" href="/assets/css/product-detail-professional-light-mode.css">
<link rel="stylesheet" href="/assets/css/product-details-ultra-professional.css">
<link rel="stylesheet" href="/assets/css/main1.css">

<!-- ============================= COMPREHENSIVE DARK MODE STYLES ============================= -->
<!-- Following EXACT same pattern as all-product.ejs for consistent styling -->
<style>
/* Professional Dark Mode Implementation for Product Details Page */

[data-theme="light"] {
  
  /* Main Container Background */
  .professional-product-detail {
    background: var(--dark-black-one) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  /* Error State - Dark Mode */
  .error-state-container {
    background: var(--dark-black-one) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .error-state-content {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 12px !important;
    padding: 3rem !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
  }
  
  .error-title {
    color: hsl(var(--static-white)) !important;
  }
  
  .error-description {
    color: #9ca3af !important;
  }
  
  .error-icon {
    color: #ef4444 !important;
  }
  
  /* Product Detail Main Section - Dark */
  .product-detail-main {
    background: var(--dark-black-one) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  /* Container Backgrounds */
  .container {
    background: transparent !important;
  }
  
 
  
  /* Trust Badges - Dark Mode */
  .product-trust-badges {
    background: transparent !important;
  }
  
  .trust-badge {
    background: var(--dark-black-three) !important;
    color: hsl(var(--static-white)) !important;
    border: 1px solid var(--dark-black-five) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;
  }
  
  .trust-badge.verified-supplier {
    background: linear-gradient(135deg, #22c55e, #16a34a) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .trust-badge.quality-assured {
    background: linear-gradient(135deg, #3b82f6, #2563eb) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .trust-badge.trade-assurance {
    background: linear-gradient(135deg, #f59e0b, #d97706) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  /* Product Main Grid - Dark */
  .product-main-grid {
    background: transparent !important;
  }
  
  /* Product Media Section - Dark */
  .product-media-section {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 12px !important;
    padding: 1.5rem !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
  }
  
  /* Image Gallery - Dark Mode */
  .image-gallery-container {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
  }
  
  .main-image-display {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
  }
  
  .main-product-image {
    background: hsl(var(--static-white)) !important;
    border-radius: 8px !important;
  }
  
  .image-placeholder {
    background: var(--dark-black-five) !important;
    color: #9ca3af !important;
    border: 2px dashed var(--dark-black-five) !important;
    border-radius: 8px !important;
  }
  

  
  .image-tool-btn {
    background: var(--dark-black-three) !important;
    color: hsl(var(--static-white)) !important;
    border: 1px solid var(--dark-black-five) !important;
  }
  
  .image-tool-btn:hover {
    background: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  /* Image Thumbnails - Dark */
  .image-thumbnails {
    background: var(--dark-black-three) !important;
  }
  
  .thumbnail-image {
    border: 2px solid var(--dark-black-five) !important;
  }
  
  .thumbnail-image.active,
  .thumbnail-image:hover {
    border-color: hsl(var(--main)) !important;
  }
  
  /* Product Documents Section - Dark */
  .product-documents-section {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
  }
  
  .document-item {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .document-item:hover {
    background: var(--dark-black-five) !important;
    border-color: hsl(var(--main)) !important;
  }
  
  /* Product Info Section - Dark */
  .product-info-section {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 12px !important;
    padding: 2rem !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
  }
  
  /* Product Header - Dark */
  .product-header {
    background: transparent !important;
    border-bottom: 1px solid var(--dark-black-five) !important;
  }
  
  .product-title {
    color: hsl(var(--static-white)) !important;
    font-weight: 700 !important;
  }
  
  /* Product Rating Section - Dark */
  .product-rating-section {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
  }
  
  .stars-container {
    background: transparent !important;
  }
  
  .star {
    color: #fbbf24 !important;
  }
  
  .rating-text {
    color: hsl(var(--static-white)) !important;
  }
  
  /* Product Stats - Dark */
  .product-stats {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
  }
  
  .stat-item {
    color: hsl(var(--static-white)) !important;
  }
  
  .stat-label {
    color: #9ca3af !important;
  }
  
  .stat-value {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
  }
  
  /* Product Description - Dark */
  .product-short-description {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
    color: #9ca3af !important;
  }
  
  /* Price Container - Dark */
  .price-container {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2) !important;
  }
  
  .price-main {
    color: hsl(var(--main)) !important;
    font-weight: 700 !important;
  }
  
  .price-original {
    color: #9ca3af !important;
    text-decoration: line-through !important;
  }
  
  .price-savings {
    color: #22c55e !important;
    font-weight: 600 !important;
  }
  
  .moq-info {
    color: #9ca3af !important;
  }
  
  .bulk-pricing-info {
    background: rgba(59, 130, 246, 0.1) !important;
    color: hsl(var(--main)) !important;
    border: 1px solid rgba(59, 130, 246, 0.3) !important;
  }
  
  /* Buttons - Dark Mode */
  .btn {
    font-weight: 600 !important;
    border-radius: 8px !important;
    transition: all 0.3s ease !important;
  }
  
  .btn-primary {
    background: hsl(var(--main)) !important;
    border-color: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3) !important;
  }
  
  .btn-primary:hover {
    background: #2563eb !important;
    border-color: #2563eb !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4) !important;
  }
  
  .btn-secondary {
    background: var(--dark-black-five) !important;
    border-color: var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .btn-secondary:hover {
    background: var(--dark-black-three) !important;
    border-color: hsl(var(--main)) !important;
    color: hsl(var(--main)) !important;
  }
  
  .btn-outline-primary {
    background: transparent !important;
    border-color: hsl(var(--main)) !important;
    color: hsl(var(--main)) !important;
  }
  
  .btn-outline-primary:hover {
    background: hsl(var(--main)) !important;
    border-color: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  /* Option Buttons - Dark */
  .option-btn {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .option-btn:hover {
    background: var(--dark-black-five) !important;
    color: hsl(var(--main)) !important;
    border-color: hsl(var(--main)) !important;
  }
  
  .option-btn.active {
    background: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
    border-color: hsl(var(--main)) !important;
  }
  
  /* Supplier Profile Section - Dark */
  .supplier-profile-section {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 12px !important;
    padding: 2rem !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
  }
  
  .supplier-header {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
  }
  
  .supplier-logo {
    background: hsl(var(--static-white)) !important;
    border: 2px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
  }
  
  .supplier-info h3 {
    color: hsl(var(--static-white)) !important;
  }
  
  .supplier-info p {
    color: #9ca3af !important;
  }
  
  .supplier-metrics {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
  }
  
  .metric-item {
    color: hsl(var(--static-white)) !important;
  }
  
  .metric-label {
    color: #9ca3af !important;
  }
  
  .metric-value {
    color: hsl(var(--main)) !important;
    font-weight: 700 !important;
  }
  
  /* Detail Tabs - Dark Mode */
  .detail-tabs-container {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
  }
  
  .tabs-nav {
    background: var(--dark-black-three) !important;
    border-bottom: 1px solid var(--dark-black-five) !important;
  }
  
  .tab-btn {
    background: transparent !important;
    color: #9ca3af !important;
    border: none !important;
    border-bottom: 3px solid transparent !important;
    font-weight: 600 !important;
    transition: all 0.3s ease !important;
  }
  
  .tab-btn:hover {
    color: hsl(var(--main)) !important;
    background: rgba(59, 130, 246, 0.1) !important;
  }
  
  .tab-btn.active {
    color: hsl(var(--main)) !important;
    border-bottom-color: hsl(var(--main)) !important;
    background: rgba(59, 130, 246, 0.1) !important;
  }
  
  /* Tab Content - Dark */
  .tab-content {
    background: var(--dark-black-two) !important;
    color: hsl(var(--static-white)) !important;
    padding: 2rem !important;
  }
  
  .product-description {
    color: #9ca3af !important;
  }
  
  /* Specifications Table - Dark */
  .specifications-table {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    overflow: hidden !important;
  }
  
  .specifications-table th {
    background: var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
    border-color: var(--dark-black-five) !important;
  }
  
  .specifications-table td {
    background: var(--dark-black-three) !important;
    color: #9ca3af !important;
    border-color: var(--dark-black-five) !important;
  }
  
  .specifications-table tbody tr:hover {
    background: var(--dark-black-five) !important;
  }
  

  
  .shipping-item {
    border-bottom: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .shipping-label {
    color: #9ca3af !important;
  }
  
  .shipping-value {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
  }
  
  /* Reviews Section - Dark */
  .reviews-section {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
  }
  
  .review-item {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
    margin-bottom: 1rem !important;
  }
  
  .review-author {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
  }
  
  .review-date {
    color: #9ca3af !important;
  }
  
  .review-text {
    color: #9ca3af !important;
    line-height: 1.6 !important;
  }
  
  /* Company Tab - Dark */
  .company-info {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
  }
  
  .company-item {
    border-bottom: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .company-label {
    color: #9ca3af !important;
  }
  
  .company-value {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
  }
  
  /* Modal - Dark Mode */
  .modal-overlay {
    background: rgba(0, 3, 30, 0.8) !important;
  }
  
  .modal-container {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5) !important;
  }
  
  .professional-modal {
    border-radius: 12px !important;
  }
  
  .modal-header {
    background: var(--dark-black-three) !important;
    border-bottom: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .modal-title {
    color: hsl(var(--static-white)) !important;
  }
  
  .modal-close {
    color: #9ca3af !important;
  }
  
  .modal-close:hover {
    color: hsl(var(--main)) !important;
  }
  
  .modal-body {
    background: var(--dark-black-two) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .modal-footer {
    background: var(--dark-black-three) !important;
    border-top: 1px solid var(--dark-black-five) !important;
  }
  
  /* Form Elements - Dark Mode */
  .form-group {
    margin-bottom: 1.5rem !important;
  }
  
  .form-label {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
    margin-bottom: 0.5rem !important;
  }
  
  .form-control,
  .form-input,
  .form-select,
  .form-textarea {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
    border-radius: 6px !important;
  }
  
  .form-control:focus,
  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    background: var(--dark-black-three) !important;
    border-color: hsl(var(--main)) !important;
    box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.3) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .form-control::placeholder,
  .form-input::placeholder,
  .form-textarea::placeholder {
    color: #9ca3af !important;
  }
  
  /* Text Colors - Dark Mode */
  .text-body {
    color: #9ca3af !important;
  }
  
  .text-muted {
    color: #6b7280 !important;
  }
  
  .text-primary {
    color: hsl(var(--main)) !important;
  }
  
  .text-success {
    color: #22c55e !important;
  }
  
  .text-warning {
    color: #f59e0b !important;
  }
  
  .text-danger {
    color: #ef4444 !important;
  }
  
  /* Border Colors - Dark Mode */
  .border-primary {
    border-color: hsl(var(--main)) !important;
  }
  
  .border-secondary {
    border-color: var(--dark-black-five) !important;
  }
  
  /* Background Colors - Dark Mode */
  .bg-primary {
    background-color: hsl(var(--main)) !important;
  }
  
  .bg-secondary {
    background-color: var(--dark-black-three) !important;
  }
  
  .bg-light {
    background-color: var(--dark-black-two) !important;
  }
  
  /* Toast Notifications - Dark */
  .toast-container {
    z-index: 9999 !important;
  }
  
  .toast {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
    border-radius: 8px !important;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4) !important;
  }
  
  .toast.success {
    background: #22c55e !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .toast.error {
    background: #ef4444 !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .toast.warning {
    background: #f59e0b !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .toast.info {
    background: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  /* Professional Scrollbars - Dark */
  ::-webkit-scrollbar {
    width: 8px !important;
    height: 8px !important;
  }
  
  ::-webkit-scrollbar-track {
    background: var(--dark-black-three) !important;
    border-radius: 4px !important;
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--dark-black-five) !important;
    border-radius: 4px !important;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--main)) !important;
  }
  
  /* Selection Colors - Dark */
  ::selection {
    background: rgba(59, 130, 246, 0.3) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  ::-moz-selection {
    background: rgba(59, 130, 246, 0.3) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  /* Focus States - Dark */
  *:focus {
    outline-color: hsl(var(--main)) !important;
  }
  
  .focus-visible {
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5) !important;
  }
  
  /* Loading States - Dark */
  .loading-overlay {
    background: rgba(0, 3, 30, 0.8) !important;
  }
  
  .loading-spinner {
    border-color: #9ca3af !important;
    border-top-color: hsl(var(--main)) !important;
  }
  
  /* ======================== MISSING ELEMENTS DARK MODE ======================== */
  
  /* Pricing Section - Dark */
  .pricing-section {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 12px !important;
    padding: 2rem !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
  }
  
  .price-container {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
  }
  
  .main-price {
    background: transparent !important;
  }
  
  .price-amount {
    color: hsl(var(--main)) !important;
    font-weight: 700 !important;
  }
  
  .price-currency,
  .price-unit {
    color: #9ca3af !important;
  }
  
  /* Bulk Pricing Section - Dark */
  .bulk-pricing-section {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    margin-top: 1rem !important;
  }
  
  .bulk-pricing-title {
    color: hsl(var(--static-white)) !important;
    margin-bottom: 1rem !important;
  }
  
  .bulk-pricing-table {
    background: var(--dark-black-five) !important;
    border-radius: 6px !important;
    padding: 1rem !important;
  }
  
  .bulk-tier {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 6px !important;
    padding: 0.75rem !important;
    margin-bottom: 0.5rem !important;
  }
  
  .tier-quantity {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
  }
  
  /* Lead Time - Dark */
  .lead-time {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 6px !important;
    padding: 0.75rem 1rem !important;
    color: hsl(var(--static-white)) !important;
    margin-top: 1rem !important;
  }
  
  .lead-time i {
    color: hsl(var(--main)) !important;
    margin-right: 0.5rem !important;
  }
  
  /* Stock Quantity - Dark */
  .stock-quantity {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 6px !important;
    padding: 0.75rem !important;
  }
  
  .available-quantity {
    color: #22c55e !important;
    font-weight: 600 !important;
  }
  
  /* Quantity Section - Dark */
  .quantity-section {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
    margin: 1rem 0 !important;
  }
  
  .quantity-label {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
    margin-bottom: 0.5rem !important;
    display: block !important;
  }
  
  .quantity-controls {
    display: flex !important;
    align-items: center !important;
    background: var(--dark-black-five) !important;
    border-radius: 6px !important;
    padding: 0.25rem !important;
  }
  
  .quantity-btn {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
    width: 36px !important;
    height: 36px !important;
    border-radius: 4px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: all 0.3s ease !important;
  }
  
  .quantity-btn:hover {
    background: hsl(var(--main)) !important;
    border-color: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .quantity-input {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
    text-align: center !important;
    border-radius: 4px !important;
    margin: 0 0.5rem !important;
    padding: 0.5rem !important;
    min-width: 80px !important;
  }
  
  .quantity-input:focus {
    background: var(--dark-black-two) !important;
    border-color: hsl(var(--main)) !important;
    box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.3) !important;
  }
  
  /* Action Buttons Container - Dark */
  .action-buttons {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    margin: 1.5rem 0 !important;
  }
  
  .action-buttons .btn {
    margin: 0.5rem !important;
    min-width: 200px !important;
  }
  
  .action-buttons .inquiry-btn {
    background: hsl(var(--main)) !important;
    border-color: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3) !important;
  }
  
  .action-buttons .inquiry-btn:hover {
    background: #2563eb !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4) !important;
  }
  
  .action-buttons .chat-btn {
    background: #22c55e !important;
    border-color: #22c55e !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .action-buttons .chat-btn:hover {
    background: #16a34a !important;
    border-color: #16a34a !important;
  }
  
  .action-buttons .sample-btn {
    background: transparent !important;
    border-color: hsl(var(--main)) !important;
    color: hsl(var(--main)) !important;
  }
  
  .action-buttons .sample-btn:hover {
    background: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  /* Shipping Section - Dark */
  .shipping-section {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    margin: 1rem 0 !important;
  }
  
  .section-title {
    color: hsl(var(--static-white)) !important;
    margin-bottom: 1rem !important;
    font-weight: 600 !important;
  }
  
  .section-title i {
    color: hsl(var(--main)) !important;
    margin-right: 0.5rem !important;
  }
  
  .shipping-details {
    background: var(--dark-black-three) !important;
    border-radius: 6px !important;
    padding: 1rem !important;
  }
  
  /* .shipping-detail {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 0.75rem 0 !important;
    border-bottom: 1px solid var(--dark-black-five) !important;
  } */
  
  .shipping-detail:last-child {
    border-bottom: none !important;
  }
  
  .detail-label {
    color: #9ca3af !important;
    font-weight: 500 !important;
  }
  
  .detail-value {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
  }
  
  .shipping-details-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
    gap: 1rem !important;
    margin-top: 1rem !important;
  }
  
  .detail-item {
    background: var(--dark-black-five) !important;
    border-radius: 6px !important;
    padding: 1rem !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
  }
  
  .detail-item .label {
    color: #9ca3af !important;
    font-weight: 500 !important;
  }
  
  .detail-item .value {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
  }
  
  /* Supplier Section - Dark */
  .supplier-section {
    background: var(--dark-black-one) !important;
    padding: 3rem 0 !important;
  }
  
  .section-main-title {
    color: hsl(var(--static-white)) !important;
    text-align: center !important;
    margin-bottom: 2rem !important;
    font-weight: 700 !important;
  }
  
  .section-main-title i {
    color: hsl(var(--main)) !important;
    margin-right: 0.5rem !important;
  }
  
  .supplier-card {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 12px !important;
    padding: 2rem !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
  }
  
  .supplier-header {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    margin-bottom: 1.5rem !important;
    display: flex !important;
    align-items: center !important;
    gap: 1.5rem !important;
  }
  
  .supplier-logo {
    background: hsl(var(--static-white)) !important;
    border: 2px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1rem !important;
    width: 80px !important;
    height: 80px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  
  .supplier-info {
    flex: 1 !important;
  }
  
  .supplier-name {
    color: hsl(var(--static-white)) !important;
    margin-bottom: 0.5rem !important;
    font-weight: 700 !important;
  }
  
  .supplier-verification {
    margin-bottom: 0.5rem !important;
  }
  
  .verification-badge {
    background: var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
    padding: 0.25rem 0.75rem !important;
    border-radius: 4px !important;
    font-size: 0.875rem !important;
    font-weight: 600 !important;
  }
  
  .verification-badge.verified {
    background: #22c55e !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .supplier-location {
    color: #9ca3af !important;
    font-weight: 500 !important;
  }
  
  .supplier-location i {
    color: hsl(var(--main)) !important;
    margin-right: 0.5rem !important;
  }
  
  /* Supplier Stats - Dark */
  .supplier-stats {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
    gap: 1rem !important;
  }
  
  .stat-item {
    text-align: center !important;
    padding: 1rem !important;
    background: var(--dark-black-five) !important;
    border-radius: 6px !important;
  }
  
  .stat-label {
    color: #9ca3af !important;
    font-size: 0.875rem !important;
    margin-bottom: 0.5rem !important;
    display: block !important;
  }
  
  .stat-value {
    color: hsl(var(--static-white)) !important;
    font-weight: 700 !important;
    font-size: 1.25rem !important;
  }
  
  .rating-display {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.25rem !important;
  }
  
  .rating-display.small {
    font-size: 0.875rem !important;
  }
  
  .rating-score {
    color: hsl(var(--static-white)) !important;
    font-weight: 600 !important;
    margin-left: 0.5rem !important;
  }
  
  /* Supplier Actions - Dark */
  .supplier-actions {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    margin-top: 1.5rem !important;
    text-align: center !important;
  }
  
  .supplier-actions .btn {
    margin: 0.5rem !important;
    min-width: 180px !important;
  }
  
  .contact-supplier-btn {
    background: hsl(var(--main)) !important;
    border-color: hsl(var(--main)) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .contact-supplier-btn:hover {
    background: #2563eb !important;
    transform: translateY(-2px) !important;
  }
  
  /* Supplier Description - Dark */
  .supplier-description {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    margin: 1.5rem 0 !important;
  }
  
  .supplier-description p {
    color: #9ca3af !important;
    line-height: 1.6 !important;
    margin: 0 !important;
  }
  
  /* Supplier Credentials - Dark */
  .supplier-credentials {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    margin-top: 1.5rem !important;
  }
  
  .credential-item {
    display: flex !important;
    align-items: center !important;
    padding: 0.75rem !important;
    background: var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .moq-section {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
    padding: var(--space-3);
    background: var(--dark-black-three);
    border-radius: var(--radius-lg);
    border: 1px solid var(--gray-200);
}
  .credential-item i {
    color: hsl(var(--main)) !important;
    margin-right: 0.75rem !important;
    width: 20px !important;
    text-align: center !important;
  }
  
  .credential-item span {
    font-weight: 500 !important;
  }
  
  /* Detailed Info Section - Dark */
  .detailed-info-section {
    background: var(--dark-black-one) !important;
    padding: 3rem 0 !important;
  }
  
  /* Key Features - Dark */
  .key-features {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
    margin-bottom: 2rem !important;
  }
  
  .key-features h4 {
    color: hsl(var(--static-white)) !important;
    margin-bottom: 1rem !important;
    font-weight: 600 !important;
  }
  
  .features-list {
    list-style: none !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  
  .features-list li {
    background: var(--dark-black-five) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 6px !important;
    padding: 0.75rem 1rem !important;
    margin-bottom: 0.5rem !important;
    color: hsl(var(--static-white)) !important;
    transition: all 0.3s ease !important;
    position: relative !important;
    overflow: hidden !important;
  }
  
  .features-list li:hover {
    background: var(--dark-black-three) !important;
    border-color: hsl(var(--main)) !important;
    transform: translateX(4px) !important;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2) !important;
  }
  

  .features-list li strong {
    color: hsl(var(--main)) !important;
    margin-right: 0.5rem !important;
  }
  
  /* Specifications Detailed - Dark */
  .specifications-detailed {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
  }
  
  .specifications-detailed h3 {
    color: hsl(var(--static-white)) !important;
    margin-bottom: 1rem !important;
    font-weight: 600 !important;
  }
  
  .specs-table {
    background: var(--dark-black-five) !important;
    border-radius: 6px !important;
    overflow: hidden !important;
  }
  
  /* Shipping Payment Content - Dark */
  .shipping-payment-content {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    border-radius: 8px !important;
    padding: 1.5rem !important;
  }
  
  .shipping-payment-content h3 {
    color: hsl(var(--static-white)) !important;
    margin-bottom: 1rem !important;
    font-weight: 600 !important;
  }
  
  /* Mobile Responsive Adjustments - Dark */
  @media (max-width: 768px) {
    .professional-product-detail {
      background: var(--dark-black-one) !important;
    }
    
    .product-main-grid {
      grid-template-columns: 1fr !important;
    }
    
    .modal-container {
      margin: 1rem !important;
      max-width: calc(100% - 2rem) !important;
    }
    
    .supplier-header {
      flex-direction: column !important;
      text-align: center !important;
    }
    
    .supplier-stats {
      grid-template-columns: 1fr !important;
    }
    
    .action-buttons .btn {
      min-width: auto !important;
      width: 100% !important;
      margin: 0.25rem 0 !important;
    }
  }
  
}

/* ============================= DARK MODE STYLES END ============================= */

/* =========================================================================
   LIGHT MODE COMPREHENSIVE STYLING - EJS INLINE
   Additional light mode styles for missing elements
   ========================================================================= */

/* Default Theme (Light Mode) Styles */
:root,
[data-theme='dark'] {
  
  /* ==================== PRICING SECTION - LIGHT MODE ==================== */
  
  .pricing-section {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 1rem;
    padding: 2rem;
    margin: 1.5rem 0;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
  }
  
  .pricing-section:hover {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    transform: translateY(-2px);
  }
  
  .price-container {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-bottom: 1rem;
  }
  
  .main-price {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  
  .price-amount {
    color: #2563eb;
    font-weight: 700;
    font-size: 1.875rem;
    line-height: 1.2;
  }
  
  .price-currency {
    color: #6b7280;
    font-weight: 500;
    font-size: 1.125rem;
  }
  
  .price-unit {
    color: #4b5563;
    font-weight: 400;
    font-size: 1rem;
  }
  
  /* ==================== BULK PRICING - LIGHT MODE ==================== */
  
  .bulk-pricing-section {
    background: #eff6ff;
    border: 1px solid #bfdbfe;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-top: 1rem;
  }
  
  .bulk-pricing-title {
    color: #111827;
    font-weight: 600;
    font-size: 1.125rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .bulk-pricing-title i {
    color: #2563eb;
  }
  
  .bulk-pricing-table {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    padding: 1rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .bulk-tier {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.375rem;
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
    transition: all 0.2s ease;
  }
  
  .bulk-tier:hover {
    background: #eff6ff;
    border-color: #93c5fd;
    transform: translateX(4px);
  }
  
  .tier-quantity {
    color: #111827;
    font-weight: 600;
    font-size: 1rem;
  }
  
  /* ==================== STOCK & LEAD TIME - LIGHT MODE ==================== */
  
  .stock-quantity {
    background: #f0fdf4;
    border: 1px solid #bbf7d0;
    border-radius: 0.5rem;
    padding: 0.75rem;
    margin: 1rem 0;
  }
  
  .available-quantity {
    color: #15803d;
    font-weight: 600;
    font-size: 1rem;
  }
  
  .lead-time {
    background: #f0f9ff;
    border: 1px solid #bae6fd;
    border-radius: 0.5rem;
    padding: 0.75rem 1rem;
    color: #1f2937;
    margin-top: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .lead-time i {
    color: #0891b2;
    font-size: 1.125rem;
  }
  
  /* ==================== QUANTITY SECTION - LIGHT MODE ==================== */
  
  .quantity-section {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .quantity-label {
    color: #111827;
    font-weight: 600;
    font-size: 1rem;
    margin-bottom: 0.75rem;
    display: block;
  }
  
  .quantity-controls {
    display: flex;
    align-items: center;
    background: #f3f4f6;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    padding: 0.25rem;
    width: fit-content;
  }
  
  .quantity-btn {
    background: #ffffff;
    border: 1px solid #d1d5db;
    color: #374151;
    width: 40px;
    height: 40px;
    border-radius: 0.375rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    cursor: pointer;
    font-size: 1rem;
  }
  
  .quantity-btn:hover {
    background: #2563eb;
    border-color: #2563eb;
    color: #ffffff;
    transform: scale(1.05);
  }
  
  .quantity-btn:active {
    transform: scale(0.95);
  }
  
  .quantity-input {
    background: #ffffff;
    border: 1px solid #d1d5db;
    color: #111827;
    text-align: center;
    border-radius: 0.375rem;
    margin: 0 0.5rem;
    padding: 0.5rem 0.75rem;
    min-width: 80px;
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.2s ease;
  }
  
  .quantity-input:focus {
    outline: none;
    background: #ffffff;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }
  
  /* ==================== ACTION BUTTONS - LIGHT MODE ==================== */
  
  .action-buttons {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 1rem;
    padding: 2rem;
    margin: 2rem 0;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    text-align: center;
  }
  
  .action-buttons .btn {
    margin: 0.5rem;
    min-width: 200px;
    font-weight: 600;
    font-size: 1rem;
    padding: 1rem 1.5rem;
    border-radius: 0.75rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .action-buttons .inquiry-btn {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border: none;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  .action-buttons .inquiry-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  .action-buttons .chat-btn {
    background: linear-gradient(135deg, #22c55e 0%, #15803d 100%);
    border: none;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  .action-buttons .chat-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  .action-buttons .sample-btn {
    background: transparent;
    border: 2px solid #3b82f6;
    color: #2563eb !important;
  }
  
  .action-buttons .sample-btn:hover {
    background: #2563eb;
    color: #ffffff !important;
    transform: translateY(-3px);
  }
  
  /* ==================== SHIPPING SECTION - LIGHT MODE ==================== */
  
  .shipping-section {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .section-title {
    color: #111827;
    font-weight: 600;
    font-size: 1.25rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .section-title i {
    color: #2563eb;
    font-size: 1.25rem;
  }
  
  .shipping-details {
    background: #f9fafb;
    border-radius: 0.5rem;
    padding: 1rem;
    border: 1px solid #e5e7eb;
  }
  
  /* .shipping-detail {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid #e5e7eb;
    transition: all 0.2s ease;
  } */
  
  .shipping-detail:last-child {
    border-bottom: none;
  }
  
  
  .detail-label {
    color: #4b5563;
    font-weight: 500;
    font-size: 0.875rem;
  }
  
  .detail-value {
    color: #111827;
    font-weight: 600;
    font-size: 1rem;
  }
  
  .shipping-details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
  }
  
  .detail-item {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  }
  
  .detail-item:hover {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transform: translateY(-2px);
    border-color: #93c5fd;
  }
  
  .detail-item .label {
    color: #4b5563;
    font-weight: 500;
    font-size: 0.875rem;
  }
  
  .detail-item .value {
    color: #111827;
    font-weight: 600;
    font-size: 1rem;
  }
  
  /* ==================== SUPPLIER SECTION - LIGHT MODE ==================== */
  
  .supplier-section {
    background: #f9fafb;
    padding: 4rem 0;
    border-top: 1px solid #e5e7eb;
  }
  
  .section-main-title {
    color: #111827;
    text-align: center;
    margin-bottom: 3rem;
    font-weight: 700;
    font-size: 1.875rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
  }
  
  .section-main-title i {
    color: #2563eb;
    font-size: 1.875rem;
  }
  
  .supplier-card {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 1.5rem;
    padding: 2rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    transition: all 0.3s ease;
  }
  
  .supplier-card:hover {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    transform: translateY(-4px);
  }
  
  .supplier-header {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 1rem;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }
  
  .supplier-logo {
    background: #ffffff;
    border: 2px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1rem;
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .supplier-info {
    flex: 1;
  }
  
  .supplier-name {
    color: #111827;
    margin-bottom: 0.5rem;
    font-weight: 700;
    font-size: 1.5rem;
  }
  
  .supplier-verification {
    margin-bottom: 0.5rem;
  }
  
  .verification-badge {
    background: #f3f4f6;
    color: #374151;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 600;
    border: 1px solid #d1d5db;
  }
  
  .verification-badge.verified {
    background: #dcfce7;
    color: #166534;
    border-color: #bbf7d0;
  }
  
  .supplier-location {
    color: #4b5563;
    font-weight: 500;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .supplier-location i {
    color: #2563eb;
  }
  
  /* ==================== SUPPLIER STATS - LIGHT MODE ==================== */
  
  .supplier-stats {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 1rem;
    padding: 1.5rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }
  
  .stat-item {
    text-align: center;
    padding: 1rem;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    transition: all 0.2s ease;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  }
  
  .stat-item:hover {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transform: translateY(-2px);
    border-color: #93c5fd;
  }
  
  .stat-label {
    color: #4b5563;
    font-size: 0.875rem;
    margin-bottom: 0.5rem;
    display: block;
    font-weight: 500;
  }
  
  .stat-value {
    color: #111827;
    font-weight: 700;
    font-size: 1.25rem;
  }
  
  .rating-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
  }
  
  .rating-display.small {
    font-size: 0.875rem;
  }
  
  .rating-score {
    color: #111827;
    font-weight: 600;
    margin-left: 0.5rem;
  }
  
  /* ==================== SUPPLIER ACTIONS - LIGHT MODE ==================== */
  
  .supplier-actions {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-top: 1.5rem;
    text-align: center;
  }
  
  .supplier-actions .btn {
    margin: 0.5rem;
    min-width: 180px;
  }
  
  .contact-supplier-btn {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border: none;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  .contact-supplier-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  /* ==================== SUPPLIER DESCRIPTION - LIGHT MODE ==================== */
  
  .supplier-description {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
  }
  
  .supplier-description p {
    color: #374151;
    line-height: 1.6;
    margin: 0;
    font-size: 1rem;
  }
  
  /* ==================== SUPPLIER CREDENTIALS - LIGHT MODE ==================== */
  
  .supplier-credentials {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-top: 1.5rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .credential-item {
    display: flex;
    align-items: center;
    padding: 0.75rem;
    border-bottom: 1px solid #e5e7eb;
    color: #1f2937;
    /* transition: all 0.2s ease; */
  }

  .credential-item i {
    color: #2563eb;
    margin-right: 0.75rem;
    width: 20px;
    text-align: center;
    font-size: 1.125rem;
  }
  
  .credential-item span {
    font-weight: 500;
    font-size: 1rem;
  }
  
  /* ==================== DETAILED INFO SECTION - LIGHT MODE ==================== */
  
  .detailed-info-section {
    background: #ffffff;
    padding: 4rem 0;
    border-top: 1px solid #e5e7eb;
  }
  
  /* ==================== KEY FEATURES - LIGHT MODE ==================== */
  
  .key-features {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .key-features h4 {
    color: #111827;
    margin-bottom: 1rem;
    font-weight: 600;
    font-size: 1.25rem;
  }
  
  .features-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .features-list li {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    padding: 1rem;
    margin-bottom: 0.75rem;
    color: #1f2937;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    cursor: pointer;
  }
  
  .features-list li:hover {
    background: #eff6ff;
    border-color: #93c5fd;
    transform: translateX(8px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  

  
  .features-list li strong {
    color: #1d4ed8;
    margin-right: 0.5rem;
    font-weight: 600;
  }
  
  /* ==================== SPECIFICATIONS DETAILED - LIGHT MODE ==================== */
  
  .specifications-detailed {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .specifications-detailed h3 {
    color: #111827;
    margin-bottom: 1rem;
    font-weight: 600;
    font-size: 1.25rem;
  }
  
  .specs-table {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    overflow: hidden;
  }
  
  /* ==================== SHIPPING PAYMENT CONTENT - LIGHT MODE ==================== */
  
  .shipping-payment-content {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .shipping-payment-content h3 {
    color: #111827;
    margin-bottom: 1rem;
    font-weight: 600;
    font-size: 1.25rem;
  }
  
  /* ==================== RESPONSIVE ADJUSTMENTS - LIGHT MODE ==================== */
  
  @media (max-width: 768px) {
    .supplier-header {
      flex-direction: column;
      text-align: center;
      gap: 1rem;
    }
    
    .supplier-stats {
      grid-template-columns: 1fr;
    }
    
    .action-buttons .btn {
      min-width: auto;
      width: 100%;
      margin: 0.25rem 0;
    }
    
    .shipping-details-grid {
      grid-template-columns: 1fr;
    }
    
    .quantity-controls {
      width: 100%;
      justify-content: center;
    }
  }
  
}

/* ============================= LIGHT MODE STYLES END ============================= */

/* =========================================================================
   NEW SECTIONS COMPREHENSIVE STYLING - BOTH LIGHT & DARK MODES
   Styles for inventory, shipping, category/tags sections
   ========================================================================= */

/* Default Theme (Light Mode) Styles */
:root,
[data-theme='dark'] {
  
  /* ==================== BUSINESS METRICS - LIGHT MODE ==================== */
  
  .business-metrics {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .business-metrics h4 {
    color: #1e293b;
    font-weight: 600;
    font-size: 1.125rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .business-metrics h4 i {
    color: #3b82f6;
  }
  
  .metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
  }
  
  .metric-item {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    padding: 1rem;
    text-align: center;
    transition: all 0.2s ease;
  }
  
  .metric-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .metric-label {
    color: #6b7280;
    font-size: 0.875rem;
    font-weight: 500;
    display: block;
    margin-bottom: 0.5rem;
  }
  
  .metric-value {
    color: #1f2937;
    font-size: 1.25rem;
    font-weight: 700;
  }
  
  /* ==================== INVENTORY DETAILS - LIGHT MODE ==================== */
  
  .inventory-details {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .inventory-details h4 {
    color: #1e293b;
    font-weight: 600;
    font-size: 1.125rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .inventory-details h4 i {
    color: #059669;
  }
  
  .inventory-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }
  
  .inventory-item {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
  }
  
  .inventory-item:hover {
    background: #f0f9ff;
    border-color: #93c5fd;
  }
  
  .inventory-label {
    color: #6b7280;
    font-weight: 500;
    font-size: 0.875rem;
  }
  
  .inventory-value {
    color: #059669;
    font-weight: 600;
    font-size: 1rem;
  }
  
  /* ==================== SHIPPING INFO DETAILED - LIGHT MODE ==================== */
  
  .shipping-info-detailed {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .shipping-info-detailed h4 {
    color: #1e293b;
    font-weight: 600;
    font-size: 1.125rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .shipping-info-detailed h4 i {
    color: #dc2626;
  }
  
  /* ==================== CATEGORY & TAGS - LIGHT MODE ==================== */
  
  .product-category-tags {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  }
  
  .product-category-tags h4 {
    color: #1e293b;
    font-weight: 600;
    font-size: 1.125rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .product-category-tags h4 i {
    color: #7c3aed;
  }
  
  .category-info {
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: wrap;
  }
  
  .category-label {
    color: #6b7280;
    font-weight: 500;
    font-size: 0.875rem;
  }
  
  .category-badge {
    background: #ddd6fe;
    color: #5b21b6;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }
  
  .tags-section,
  .keywords-section {
    margin-bottom: 1rem;
  }
  
  .tags-label,
  .keywords-label {
    color: #6b7280;
    font-weight: 500;
    font-size: 0.875rem;
    display: block;
    margin-bottom: 0.5rem;
  }
  
  .tags-list,
  .keywords-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .tag-item,
  .keyword-item {
    background: #f1f5f9;
    color: #475569;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    transition: all 0.2s ease;
  }
  
  .tag-item:hover,
  .keyword-item:hover {
    background: #e2e8f0;
    transform: translateY(-1px);
  }
  
  .tag-item i,
  .keyword-item i {
    font-size: 0.75rem;
  }
  
}

/* Dark Mode Styles */
[data-theme='light'] {
  
  /* ==================== BUSINESS METRICS - DARK MODE ==================== */
  
  .business-metrics {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .business-metrics h4 {
    color: hsl(var(--static-white)) !important;
  }
  
  .business-metrics h4 i {
    color: hsl(var(--main)) !important;
  }
  
  .metric-item {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
  }
  
  .metric-item:hover {
    background: var(--dark-black-five) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
  }
  
  .metric-label {
    color: #9ca3af !important;
  }
  
  .metric-value {
    color: hsl(var(--static-white)) !important;
  }
  
  /* ==================== INVENTORY DETAILS - DARK MODE ==================== */
  
  .inventory-details {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .inventory-details h4 {
    color: hsl(var(--static-white)) !important;
  }
  
  .inventory-details h4 i {
    color: #22c55e !important;
  }
  
  .inventory-item {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
  }
  
  .inventory-item:hover {
    background: var(--dark-black-five) !important;
    border-color: hsl(var(--main)) !important;
  }
  
  .inventory-label {
    color: #9ca3af !important;
  }
  
  .inventory-value {
    color: #22c55e !important;
  }
  
  /* ==================== SHIPPING INFO DETAILED - DARK MODE ==================== */
  
  .shipping-info-detailed {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .shipping-info-detailed h4 {
    color: hsl(var(--static-white)) !important;
  }
  
  .shipping-info-detailed h4 i {
    color: #ef4444 !important;
  }
  
  /* ==================== CATEGORY & TAGS - DARK MODE ==================== */
  
  .product-category-tags {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .product-category-tags h4 {
    color: hsl(var(--static-white)) !important;
  }
  
  .product-category-tags h4 i {
    color: #a855f7 !important;
  }
  
  .category-label {
    color: #9ca3af !important;
  }
  
  .category-badge {
    background: var(--dark-black-five) !important;
    color: #a855f7 !important;
  }
  
  .tags-label,
  .keywords-label {
    color: #9ca3af !important;
  }
  
  .tag-item,
  .keyword-item {
    background: var(--dark-black-three) !important;
    color: hsl(var(--static-white)) !important;
    border: 1px solid var(--dark-black-five) !important;
  }
  
  .tag-item:hover,
  .keyword-item:hover {
    background: var(--dark-black-five) !important;
    border-color: hsl(var(--main)) !important;
  }
  
}

/* ============================= NEW SECTIONS STYLES END ============================= */

/* =========================================================================
   COMPANY PROFILE TAB ENHANCED STYLING - BOTH LIGHT & DARK MODES
   Professional styling for detailed company information
   ========================================================================= */

/* Default Theme (Light Mode) Styles */
:root,
[data-theme='dark'] {
  
  /* ==================== COMPANY VERIFICATION SECTION - LIGHT MODE ==================== */
  
  .company-verification-section {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    text-align: center;
  }
  
  .verification-status {
    margin-bottom: 1rem;
  }
  
  .verification-badge-large {
    background: #dcfce7;
    color: #166534;
    padding: 0.5rem 1rem;
    border-radius: 9999px;
    font-size: 1rem;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    border: 2px solid #bbf7d0;
  }
  
  .verification-badge-large i {
    font-size: 1.125rem;
  }
  
  .experience-highlight {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
  }
  
  .experience-highlight i {
    color: #3b82f6;
    font-size: 1.5rem;
  }
  
  .experience-text {
    color: #1e293b;
    font-size: 1.125rem;
  }
  
  .experience-text strong {
    color: #3b82f6;
    font-size: 1.25rem;
  }
  
  .established-year {
    color: #64748b;
    font-size: 0.875rem;
  }
  
  /* ==================== COMPANY DETAILS - LIGHT MODE ==================== */
  
  .company-details {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }
  
  .detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid #f1f5f9;
  }
  
  .detail-row:last-child {
    border-bottom: none;
  }
  
  .detail-row .label {
    color: #475569;
    font-weight: 600;
    font-size: 0.875rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    min-width: 140px;
  }
  
  .detail-row .label i {
    color: #3b82f6;
    width: 16px;
    text-align: center;
  }
  
  .detail-row .value {
    color: #1e293b;
    font-weight: 500;
    text-align: right;
    flex: 1;
  }
  
  /* ==================== COMPANY PERFORMANCE - LIGHT MODE ==================== */
  
  .company-performance {
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }
  
  .company-performance h4 {
    color: #1e293b;
    font-weight: 600;
    font-size: 1.125rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .company-performance h4 i {
    color: #16a34a;
  }
  
  .performance-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1rem;
  }
  
  .performance-item {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 0.5rem;
    padding: 1rem;
    text-align: center;
    transition: all 0.2s ease;
  }
  
  .performance-item:hover {
    background: #f0f9ff;
    border-color: #93c5fd;
    transform: translateY(-2px);
  }
  
  .performance-label {
    color: #64748b;
    font-size: 0.875rem;
    font-weight: 500;
    display: block;
    margin-bottom: 0.5rem;
  }
  
  .performance-value {
    color: #1e293b;
    font-size: 1.25rem;
    font-weight: 700;
  }
  
  .performance-item .rating-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
  }
  
  .performance-item .stars-container {
    display: flex;
    gap: 0.125rem;
  }
  
  .performance-item .rating-score {
    color: #64748b;
    font-size: 0.875rem;
    font-weight: 500;
  }
  
}

/* Dark Mode Styles */
[data-theme='light'] {
  
  /* ==================== COMPANY VERIFICATION SECTION - DARK MODE ==================== */
  
  .company-verification-section {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .verification-badge-large {
    background: var(--dark-black-five) !important;
    color: #22c55e !important;
    border-color: #22c55e !important;
  }
  
  .experience-highlight i {
    color: hsl(var(--main)) !important;
  }
  
  .experience-text {
    color: hsl(var(--static-white)) !important;
  }
  
  .experience-text strong {
    color: hsl(var(--main)) !important;
  }
  
  .established-year {
    color: #9ca3af !important;
  }
  
  /* ==================== COMPANY DETAILS - DARK MODE ==================== */
  
  .company-details {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
  }
  
  .detail-row {
    border-bottom: 1px solid var(--dark-black-five) !important;
  }
  
  .detail-row .label {
    color: #9ca3af !important;
  }
  
  .detail-row .label i {
    color: hsl(var(--main)) !important;
  }
  
  .detail-row .value {
    color: hsl(var(--static-white)) !important;
  }
  
  /* ==================== COMPANY PERFORMANCE - DARK MODE ==================== */
  
  .company-performance {
    background: var(--dark-black-two) !important;
    border: 1px solid var(--dark-black-five) !important;
  }
  
  .company-performance h4 {
    color: hsl(var(--static-white)) !important;
  }
  
  .company-performance h4 i {
    color: #22c55e !important;
  }
  
  .performance-item {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
  }
  
  .performance-item:hover {
    background: var(--dark-black-five) !important;
    border-color: hsl(var(--main)) !important;
  }
  
  .performance-label {
    color: #9ca3af !important;
  }
  
  .performance-value {
    color: hsl(var(--static-white)) !important;
  }
  
  .performance-item .rating-score {
    color: #9ca3af !important;
  }
  
}

/* ============================= COMPANY PROFILE STYLES END ============================= */

/* =========================================================================
   PRODUCT ANALYTICS INTEGRATION STYLING - BOTH LIGHT & DARK MODES
   Clean, integrated analytics display without cards, responsive design
   ========================================================================= */

/* Default Theme (Light Mode) Styles */
:root,
[data-theme='dark'] {
  
  /* ==================== ANALYTICS INTEGRATION - LIGHT MODE ==================== */
  
  .product-analytics-integration {
    background: transparent;
    margin: 1.5rem 0;
    padding: 0;
  }
  
  /* ==================== KPI LIST (ROW) - LIGHT MODE ==================== */
  
  .analytics-kpi-list {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .analytics-kpi-list .detail-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    transition: all 0.2s ease;
  }
  
  .analytics-kpi-list .detail-item:hover {
    background: #f1f5f9;
    border-color: #cbd5e1;
  }
  
  .analytics-kpi-list .label {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: #64748b;
    font-weight: 600;
  }
  
  .analytics-kpi-list .label i {
    color: #3b82f6;
    width: 16px;
    text-align: center;
  }
  
  .analytics-kpi-list .value {
    color: #1e293b;
    font-weight: 700;
    font-size: 1.125rem;
  }
  
  /* legacy grid removed */
  
  /* ==================== HORIZONTAL GRID ITEMS - LIGHT MODE ==================== */
  
  /* legacy grid item removed */
  
  /* legacy grid item removed */
  
  /* legacy grid item removed */
  
  /* ==================== GRID ITEM ICONS - LIGHT MODE ==================== */
  
  .grid-item-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    color: #ffffff;
    flex-shrink: 0;
    margin-bottom: 1rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  .views-item .grid-item-icon {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
  }
  
  .views-item::before {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
  }
  
  .orders-item .grid-item-icon {
    background: linear-gradient(135deg, #10b981, #059669);
  }
  
  .orders-item::before {
    background: linear-gradient(135deg, #10b981, #059669);
  }
  
  .inquiries-item .grid-item-icon {
    background: linear-gradient(135deg, #f59e0b, #d97706);
  }
  
  .inquiries-item::before {
    background: linear-gradient(135deg, #f59e0b, #d97706);
  }
  
  .viewers-item .grid-item-icon {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  }
  
  .viewers-item::before {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  }
  
  /* ==================== GRID ITEM CONTENT - LIGHT MODE ==================== */
  
  .grid-item-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: center;
  }
  
  .grid-item-value {
    color: #1e293b;
    font-size: 1.5rem;
    font-weight: 800;
    line-height: 1.2;
    letter-spacing: -0.025em;
  }
  
  .grid-item-label {
    color: #64748b;
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
}

/* Dark Mode Styles */
[data-theme='light'] {
  
  /* ==================== ANALYTICS INTEGRATION - DARK MODE ==================== */
  
  .product-analytics-integration {
    background: transparent !important;
  }
  
  /* ==================== KPI LIST (ROW) - DARK MODE ==================== */
  
  .analytics-kpi-list .detail-item {
    background: var(--dark-black-three) !important;
    border: 1px solid var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
  }
  
  .analytics-kpi-list .detail-item:hover {
    background: var(--dark-black-five) !important;
    border-color: var(--dark-black-four) !important;
  }
  
  .analytics-kpi-list .label { color: #9ca3af !important; }
  .analytics-kpi-list .label i { color: hsl(var(--main)) !important; }
  .analytics-kpi-list .value { color: hsl(var(--static-white)) !important; }
  
  /* ==================== HORIZONTAL GRID ITEMS - DARK MODE ==================== */
  
  /* legacy grid item removed */
  
  /* legacy grid item removed */
  
  /* ==================== GRID ITEM CONTENT - DARK MODE ==================== */
  
  .grid-item-value {
    color: hsl(var(--static-white)) !important;
  }
  
  .grid-item-label {
    color: #9ca3af !important;
  }
  
  /* ==================== GRID ITEM ICONS - DARK MODE ==================== */
  
  .views-item .grid-item-icon {
    background: linear-gradient(135deg, hsl(var(--main)), #2563eb) !important;
  }
  
  .views-item::before {
    background: linear-gradient(135deg, hsl(var(--main)), #2563eb) !important;
  }
  
  .orders-item .grid-item-icon {
    background: linear-gradient(135deg, #22c55e, #16a34a) !important;
  }
  
  .orders-item::before {
    background: linear-gradient(135deg, #22c55e, #16a34a) !important;
  }
  
  .inquiries-item .grid-item-icon {
    background: linear-gradient(135deg, #f59e0b, #d97706) !important;
  }
  
  .inquiries-item::before {
    background: linear-gradient(135deg, #f59e0b, #d97706) !important;
  }
  
  .viewers-item .grid-item-icon {
    background: linear-gradient(135deg, #a855f7, #7c3aed) !important;
  }
  
  .viewers-item::before {
    background: linear-gradient(135deg, #a855f7, #7c3aed) !important;
  }
  
}

/* ==================== RESPONSIVE DESIGN - ANALYTICS INTEGRATION ==================== */

@media (max-width: 1024px) {
  /* legacy grid removed */
  
  /* legacy grid item removed */
  
  .grid-item-icon {
    width: 40px !important;
    height: 40px !important;
    font-size: 1rem !important;
    margin-bottom: 0.75rem !important;
  }
  
  .grid-item-value {
    font-size: 1.25rem !important;
  }
}

@media (max-width: 768px) {
  /* legacy grid removed */
  
  /* legacy grid item removed */
  
  .grid-item-icon {
    width: 36px !important;
    height: 36px !important;
    font-size: 0.875rem !important;
    margin-bottom: 0.5rem !important;
  }
  
  .grid-item-value {
    font-size: 1.125rem !important;
  }
  
  .grid-item-label {
    font-size: 0.75rem !important;
  }
}

@media (max-width: 480px) {
  /* legacy grid removed */
  
  /* legacy grid item removed */
  
  .grid-item-icon {
    margin-bottom: 0 !important;
    flex-shrink: 0 !important;
  }
  
  .grid-item-content {
    align-items: flex-start !important;
  }
}

/* ============================= ANALYTICS INTEGRATION STYLES END ============================= */

/* ============================= PRODUCT INFO GRID STYLES ============================= */

.product-info-grid {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)) !important;
  gap: 1.5rem !important;
  margin-bottom: 2rem !important;
}

.info-grid-card {
  background: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 12px !important;
  padding: 0 !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05) !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  overflow: hidden !important;
  position: relative !important;
}

.info-grid-card:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1) !important;
}

.info-grid-card .card-header {
  background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--main)) 100%) !important;
  color: white !important;
  padding: 0.875rem 1.25rem !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  font-weight: 600 !important;
  font-size: 0.875rem !important;
  letter-spacing: 0.025em !important;
}

.info-grid-card .card-header i {
  font-size: 1rem !important;
}

.info-grid-card .card-content {
  padding: 1.25rem !important;
}

/* Manufacturer Card Styles */
.manufacturer-card .card-header {
  background: linear-gradient(135deg, #4f46e5, #7c3aed) !important;
}

.manufacturer-info .manufacturer-name {
  font-weight: 700 !important;
  font-size: 1.125rem !important;
  color: hsl(var(--foreground)) !important;
  margin-bottom: 0.5rem !important;
}

.manufacturer-info .manufacturer-location {
  display: flex !important;
  align-items: center !important;
  gap: 0.375rem !important;
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.875rem !important;
  margin-bottom: 0.75rem !important;
}

.manufacturer-info .verification-badge {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.375rem !important;
  background: #ecfdf5 !important;
  color: #065f46 !important;
  padding: 0.375rem 0.75rem !important;
  border-radius: 6px !important;
  font-size: 0.75rem !important;
  font-weight: 600 !important;
}

.manufacturer-info .verification-badge i.verified {
  color: #10b981 !important;
}

/* Pricing Card Styles */
.pricing-card .card-header {
  background: linear-gradient(135deg, #059669, #10b981) !important;
}

.pricing-details .price-main {
  font-size: 1.5rem !important;
  font-weight: 800 !important;
  color: hsl(var(--foreground)) !important;
  margin-bottom: 0.5rem !important;
}

.pricing-details .currency {
  font-size: 0.875rem !important;
  color: hsl(var(--muted-foreground)) !important;
  font-weight: 500 !important;
}

.pricing-details .price-type {
  display: flex !important;
  align-items: center !important;
  gap: 0.375rem !important;
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.875rem !important;
  margin-bottom: 0.75rem !important;
}

.pricing-details .quantity-range {
  display: flex !important;
  gap: 1rem !important;
  font-size: 0.75rem !important;
  color: hsl(var(--muted-foreground)) !important;
}

.pricing-details .quantity-range span {
  background: hsl(var(--muted)) !important;
  padding: 0.25rem 0.5rem !important;
  border-radius: 4px !important;
}

/* Analytics Card Styles */
.analytics-card .card-header {
  background: linear-gradient(135deg, #dc2626, #f59e0b) !important;
}

.analytics-grid {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)) !important;
  gap: 1rem !important;
}

.analytics-grid .metric-item {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  text-align: center !important;
}

.analytics-grid .metric-icon {
  width: 2.5rem !important;
  height: 2.5rem !important;
  border-radius: 50% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin-bottom: 0.5rem !important;
  font-size: 1rem !important;
}

.analytics-grid .views-item .metric-icon {
  background: linear-gradient(135deg, #3b82f6, #2563eb) !important;
  color: white !important;
}

.analytics-grid .inquiries-item .metric-icon {
  background: linear-gradient(135deg, #f59e0b, #d97706) !important;
  color: white !important;
}

.analytics-grid .orders-item .metric-icon {
  background: linear-gradient(135deg, #22c55e, #16a34a) !important;
  color: white !important;
}

.analytics-grid .metric-value {
  font-weight: 700 !important;
  font-size: 1.125rem !important;
  color: hsl(var(--foreground)) !important;
  line-height: 1 !important;
}

.analytics-grid .metric-label {
  font-size: 0.75rem !important;
  color: hsl(var(--muted-foreground)) !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
}

/* Shipping Card Styles */
.shipping-card .card-header {
  background: linear-gradient(135deg, #0ea5e9, #0284c7) !important;
}

.shipping-details {
  display: flex !important;
  flex-direction: column !important;
  gap: 0.75rem !important;
}

.shipping-details .shipping-item {
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  font-size: 0.875rem !important;
  color: hsl(var(--foreground)) !important;
}

.shipping-details .shipping-item i {
  color: hsl(var(--primary)) !important;
  width: 1rem !important;
}

/* Quality Standards Card Styles */
.quality-card .card-header {
  background: linear-gradient(135deg, #7c3aed, #a855f7) !important;
}

.quality-standards .standards-section {
  margin-bottom: 1rem !important;
}

.quality-standards .standards-grid {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 0.5rem !important;
}

.quality-standards .standard-badge {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.25rem !important;
  background: hsl(var(--secondary)) !important;
  color: hsl(var(--secondary-foreground)) !important;
  padding: 0.25rem 0.5rem !important;
  border-radius: 6px !important;
  font-size: 0.75rem !important;
  font-weight: 500 !important;
}

.quality-standards .standard-badge i {
  color: #22c55e !important;
  font-size: 0.75rem !important;
}

.quality-standards .certifications-section {
  border-top: 1px solid hsl(var(--border)) !important;
  padding-top: 1rem !important;
}

.quality-standards .certification-item {
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  padding: 0.5rem 0 !important;
  font-size: 0.875rem !important;
  color: hsl(var(--foreground)) !important;
}

.quality-standards .certification-item i {
  color: #f59e0b !important;
}

/* Status Card Styles */
.status-card .card-header {
  background: linear-gradient(135deg, #64748b, #475569) !important;
}

.status-badges {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 0.5rem !important;
}

.status-badge {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.375rem !important;
  padding: 0.5rem 0.75rem !important;
  border-radius: 6px !important;
  font-size: 0.75rem !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.025em !important;
}

.status-badge.status-active {
  background: #ecfdf5 !important;
  color: #065f46 !important;
}

.status-badge.status-inactive {
  background: #fef3c7 !important;
  color: #92400e !important;
}

.status-badge.status-discontinued {
  background: #fee2e2 !important;
  color: #991b1b !important;
}

.status-badge.featured {
  background: linear-gradient(135deg, #fbbf24, #f59e0b) !important;
  color: white !important;
}

.status-badge.promoted {
  background: linear-gradient(135deg, #ec4899, #db2777) !important;
  color: white !important;
}

/* Responsive Design for Product Info Grid */
@media (max-width: 768px) {
  .product-info-grid {
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
  }
  
  .info-grid-card .card-header {
    padding: 0.75rem 1rem !important;
    font-size: 0.8125rem !important;
  }
  
  .info-grid-card .card-content {
    padding: 1rem !important;
  }
  
  .analytics-grid {
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 0.75rem !important;
  }
  
  .analytics-grid .metric-icon {
    width: 2rem !important;
    height: 2rem !important;
    font-size: 0.875rem !important;
  }
  
  .analytics-grid .metric-value {
    font-size: 1rem !important;
  }
}

@media (max-width: 480px) {
  .product-info-grid {
    gap: 0.75rem !important;
    margin-bottom: 1.5rem !important;
  }
  
  .analytics-grid {
    grid-template-columns: 1fr !important;
  }
  
  .status-badges,
  .quality-standards .standards-grid {
    flex-direction: column !important;
  }
}

/* ============================= PRODUCT INFO GRID STYLES END ============================= */

/* ============================= SLEX STYLE PRODUCT INFO ============================= */

.amazon-product-info {
  background: hsl(var(--card)) !important;
  border: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  margin-bottom: 2rem !important;
  box-shadow: none !important;
}

/* SLEX Style Product Header Section */
.product-header-section {
  margin-bottom: 2rem !important;
  padding: 0 !important;
  border-bottom: none !important;
}

.product-title {
  font-size: 2rem !important;
  font-weight: 700 !important;
  color: hsl(var(--foreground)) !important;
  line-height: 1.2 !important;
  margin-bottom: 1rem !important;
  text-transform: capitalize !important;
}

.rating-reviews-container {
  display: flex !important;
  align-items: center !important;
  gap: 0.75rem !important;
  margin-bottom: 1.5rem !important;
  flex-wrap: wrap !important;
}

.stars-container {
  display: flex !important;
  align-items: center !important;
  gap: 0.25rem !important;
}

.star-filled {
  color: #f59e0b !important;
  font-size: 1.125rem !important;
}

.star-half {
  color: #f59e0b !important;
  font-size: 1.125rem !important;
}

.star-empty {
  color: #d1d5db !important;
  font-size: 1.125rem !important;
}

.rating-score {
  font-weight: 700 !important;
  color: hsl(var(--foreground)) !important;
  font-size: 1rem !important;
}

.rating-count {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.9375rem !important;
}

.product-description {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 1rem !important;
  line-height: 1.6 !important;
  margin: 0 !important;
}

/* SLEX Style Product Information */
.product-info-list {
  margin-bottom: 2rem !important;
  background: transparent !important;
}

.info-row {
  display: block !important;
  padding: 1rem 0 !important;
  border-bottom: 1px solid hsl(var(--border)) !important;
  margin-bottom: 0.5rem !important;
}

.info-row:last-child {
  border-bottom: none !important;
  padding-bottom: 0 !important;
}

.info-label {
  display: block !important;
  width: 100% !important;
  font-size: 0.875rem !important;
  font-weight: 700 !important;
  color: hsl(var(--muted-foreground)) !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  margin-bottom: 0.5rem !important;
}

.info-value {
  display: block !important;
  width: 100% !important;
  font-size: 1rem !important;
  color: hsl(var(--foreground)) !important;
  line-height: 1.5 !important;
  font-weight: 500 !important;
}

.price-main {
  font-weight: 800 !important;
  font-size: 1.5rem !important;
  color: hsl(var(--primary)) !important;
  display: inline-block !important;
  margin-right: 0.75rem !important;
}

.price-type {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.875rem !important;
  font-style: italic !important;
}

.verified-badge {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.375rem !important;
  background: #ecfdf5 !important;
  color: #065f46 !important;
  padding: 0.375rem 0.75rem !important;
  border-radius: 20px !important;
  font-size: 0.8125rem !important;
  font-weight: 600 !important;
  margin-left: 0.5rem !important;
}

.verified-badge i {
  color: #10b981 !important;
  font-size: 0.875rem !important;
}

.location {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.875rem !important;
  margin-left: 0.5rem !important;
}

.stock-status {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  font-weight: 700 !important;
  font-size: 1rem !important;
  padding: 0.5rem 1rem !important;
  border-radius: 25px !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
}

.stock-status.in-stock {
  background: #ecfdf5 !important;
  color: #059669 !important;
  border: 2px solid #10b981 !important;
}

.stock-status.in-stock i {
  color: #10b981 !important;
}

.stock-status.low-stock {
  background: #fffbeb !important;
  color: #d97706 !important;
  border: 2px solid #f59e0b !important;
}

.stock-status.low-stock i {
  color: #f59e0b !important;
}

.stock-status.out-of-stock {
  background: #fef2f2 !important;
  color: #dc2626 !important;
  border: 2px solid #ef4444 !important;
}

.stock-status.out-of-stock i {
  color: #ef4444 !important;
}

.stock-count {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.875rem !important;
  display: block !important;
  margin-top: 0.5rem !important;
}

/* SLEX Style Analytics Info */
.analytics-info {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 1rem !important;
}

.analytics-info .metric {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  background: hsl(var(--accent)) !important;
  padding: 0.75rem 1rem !important;
  border-radius: 12px !important;
  font-size: 0.875rem !important;
  color: hsl(var(--foreground)) !important;
  font-weight: 600 !important;
  border: 1px solid hsl(var(--border)) !important;
}

.analytics-info .metric i {
  font-size: 1rem !important;
  color: hsl(var(--primary)) !important;
}

/* SLEX Style Shipping Info */
.shipping-info {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 1rem !important;
}

.shipping-detail {
  font-size: 0.9375rem !important;
  color: hsl(var(--foreground)) !important;
  background: hsl(var(--accent)) !important;
  padding: 0.5rem 1rem !important;
  border-radius: 8px !important;
  border: 1px solid hsl(var(--border)) !important;
  font-weight: 500 !important;
}

/* SLEX Style Quality Info */
.quality-info {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 0.75rem !important;
}

.quality-badge {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  background: linear-gradient(135deg, #10b981, #059669) !important;
  color: white !important;
  padding: 0.5rem 1rem !important;
  border-radius: 20px !important;
  font-size: 0.875rem !important;
  font-weight: 600 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
}

.quality-badge i {
  color: white !important;
  font-size: 1rem !important;
}

/* SLEX Style Status Info */
.status-info {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 0.75rem !important;
}

.status-badge {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  padding: 0.5rem 1rem !important;
  border-radius: 20px !important;
  font-size: 0.875rem !important;
  font-weight: 700 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
}

.status-badge.active {
  background: linear-gradient(135deg, #10b981, #059669) !important;
  color: white !important;
}

.status-badge.inactive {
  background: linear-gradient(135deg, #f59e0b, #d97706) !important;
  color: white !important;
}

.status-badge.discontinued {
  background: linear-gradient(135deg, #ef4444, #dc2626) !important;
  color: white !important;
}

.status-badge.featured {
  background: linear-gradient(135deg, #fbbf24, #f59e0b) !important;
  color: white !important;
}

.status-badge.promoted {
  background: linear-gradient(135deg, #ec4899, #db2777) !important;
  color: white !important;
}

/* SLEX Style Key Specifications Section */
.key-specs-section {
  border-top: 2px solid hsl(var(--border)) !important;
  padding-top: 2rem !important;
  margin-top: 2rem !important;
}

.section-subtitle {
  display: flex !important;
  align-items: center !important;
  gap: 0.75rem !important;
  font-size: 1.5rem !important;
  font-weight: 800 !important;
  color: hsl(var(--foreground)) !important;
  margin-bottom: 1.5rem !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
}

.section-subtitle i {
  color: hsl(var(--primary)) !important;
  font-size: 1.25rem !important;
}

.specs-list {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
  gap: 1rem !important;
  margin-bottom: 2rem !important;
}

.spec-item {
  background: hsl(var(--card)) !important;
  border: 2px solid hsl(var(--border)) !important;
  border-radius: 12px !important;
  padding: 1rem !important;
  transition: all 0.3s ease !important;
}

.spec-item:hover {
  border-color: hsl(var(--primary)) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  transform: translateY(-2px) !important;
}

.spec-name {
  display: block !important;
  font-weight: 700 !important;
  font-size: 0.875rem !important;
  color: hsl(var(--muted-foreground)) !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  margin-bottom: 0.5rem !important;
}

.spec-value {
  display: block !important;
  font-size: 1.125rem !important;
  color: hsl(var(--foreground)) !important;
  font-weight: 600 !important;
}

.view-all-specs-btn {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  background: hsl(var(--primary)) !important;
  border: none !important;
  color: white !important;
  padding: 0.75rem 1.5rem !important;
  border-radius: 25px !important;
  font-size: 1rem !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
}

.view-all-specs-btn:hover {
  background: hsl(var(--primary) / 0.9) !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
}

.view-all-specs-btn i {
  font-size: 1rem !important;
}

/* SLEX Style Responsive Design */
@media (max-width: 768px) {
  .product-title {
    font-size: 1.5rem !important;
  }
  
  .info-row {
    padding: 0.75rem 0 !important;
  }
  
  .info-label {
    font-size: 0.8125rem !important;
  }
  
  .info-value {
    font-size: 0.9375rem !important;
  }
  
  .analytics-info {
    flex-direction: column !important;
    gap: 0.75rem !important;
  }
  
  .specs-list {
    grid-template-columns: 1fr !important;
    gap: 0.75rem !important;
  }
  
  .section-subtitle {
    font-size: 1.25rem !important;
    gap: 0.5rem !important;
  }
  
  .stock-status {
    font-size: 0.875rem !important;
    padding: 0.375rem 0.75rem !important;
  }
}

@media (max-width: 480px) {
  .product-title {
    font-size: 1.25rem !important;
  }
  
  .product-header-section {
    margin-bottom: 1.5rem !important;
  }
  
  .product-info-list {
    margin-bottom: 1.5rem !important;
  }
  
  .rating-reviews-container {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 0.5rem !important;
  }
  
  .price-main {
    font-size: 1.25rem !important;
  }
  
  .analytics-info .metric {
    padding: 0.5rem 0.75rem !important;
    font-size: 0.8125rem !important;
  }
  
  .view-all-specs-btn {
    font-size: 0.875rem !important;
    padding: 0.625rem 1.25rem !important;
  }
}

/* ============================= SLEX STYLE PRODUCT INFO END ============================= */
</style>

<!-- Professional B2B Product Detail Main Container -->
<main class="professional-product-detail">
  


  <% if (!product) { %>
    <!-- Professional Error State -->
    <section class="error-state-container">
      <div class="container">
        <div class="error-state-content">
          <div class="error-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <h2 class="error-title"><%= t('errors.productNotFound') %></h2>
          <p class="error-description"><%= t('errors.productNotFoundDesc') %></p>
          <div class="error-actions">
            <a href="/all-product" class="btn btn-primary btn-lg">
              <i class="fas fa-arrow-left"></i>
              <%= t('buttons.backToProducts') %>
            </a>
            <a href="/" class="btn btn-outline-primary btn-lg">
              <i class="fas fa-home"></i>
              <%= t('buttons.backToHome') %>
            </a>
          </div>
        </div>
      </div>
    </section>
  <% } else { %>

    <!-- Professional Product Detail Content -->
    <section class="all-product padding-y-120">
      <div class="container container-two">
        


        <!-- Main Product Information Grid -->
        <div class="product-main-grid">
          
          <!-- Left Column: Image Gallery & Media -->
          <div class="product-media-section">
            
            <!-- Professional Image Gallery -->
            <div class="image-gallery-container">
              <div class="main-image-display">
                <% if (product.images && product.images.length > 0) { %>
                  <% 
                    const primaryImage = product.images.find(img => img.isPrimary) || product.images[0];
                  %>
                  <img src="<%= primaryImage.url %>" 
                       alt="<%= product.name %>" 
                       class="main-product-image" 
                       id="mainProductImage">
                <% } else { %>
                  <div class="image-placeholder">
                    <i class="fas fa-image"></i>
                    <span><%- t('productDetails.noImageAvailable') %></span>
                  </div>
                <% } %>
                
                <!-- Image Tools -->
                <div class="image-tools">
                  <button class="image-tool-btn zoom-btn" title="<%- t('productDetails.zoomImage') %>">
                    <i class="fas fa-search-plus"></i>
                  </button>
                  <button class="image-tool-btn favorite-btn" 
                          id="imageFavoriteBtn"
                          data-product-id="<%= product._id %>"
                          data-favorited="false"
                          title="<%- t('productDetails.addToFavorites') %>">
                    <i class="far fa-heart"></i>
                    <span class="btn-loading" style="display: none;">
                      <i class="fas fa-spinner fa-spin"></i>
                    </span>
                  </button>
                  <button class="image-tool-btn share-btn" title="<%- t('productDetails.shareProduct') %>">
                    <i class="fas fa-share-alt"></i>
                  </button>
                </div>
              </div>

              <!-- Thumbnail Gallery -->
              <% if (product.images && product.images.length > 1) { %>
                <div class="thumbnail-gallery">
                  <% product.images.forEach((image, index) => { %>
                    <div class="thumbnail-item <%= index === 0 ? 'active' : '' %>" 
                         data-image="<%= image.url %>" 
                         data-index="<%= index %>">
                      <img src="<%= image.url %>" alt="<%= product.name %> - Image <%= index + 1 %>">
                    </div>
                  <% }); %>
                </div>
              <% } %>
            </div>

            <!-- Product Documents & Certifications -->
            <% if ((product.documents && product.documents.length > 0) || (product.certifications && product.certifications.length > 0)) { %>
              <div class="product-documents-section">
                <h3 class="section-title">
                  <i class="fas fa-file-alt"></i>
                  <%- t('productDetails.documents') %> & <%- t('productDetails.certifications') %>
                </h3>
                
                <div class="documents-grid">
                  <!-- Product Documents -->
                  <% if (product.documents && product.documents.length > 0) { %>
                    <% product.documents.forEach(doc => { %>
                      <a href="<%= doc.url %>" target="_blank" class="document-item">
                        <div class="document-icon">
                          <% if (doc.type === 'datasheet') { %>
                            <i class="fas fa-file-alt"></i>
                          <% } else if (doc.type === 'certificate') { %>
                            <i class="fas fa-certificate"></i>
                          <% } else if (doc.type === 'manual') { %>
                            <i class="fas fa-book"></i>
                          <% } else if (doc.type === 'brochure') { %>
                            <i class="fas fa-file-image"></i>
                          <% } else { %>
                            <i class="fas fa-file"></i>
                          <% } %>
                        </div>
                        <div class="document-info">
                          <span class="document-name"><%= doc.name %></span>
                          <span class="document-type"><%= t('documents.' + doc.type) %></span>
                        </div>
                      </a>
                    <% }); %>
                  <% } %>

                  <!-- Certifications -->
                  <% if (product.certifications && product.certifications.length > 0) { %>
                    <% product.certifications.forEach(cert => { %>
                      <div class="certification-item">
                        <div class="certification-icon">
                          <i class="fas fa-award"></i>
                        </div>
                        <div class="certification-info">
                          <span class="certification-name"><%= cert.name %></span>
                          <span class="certification-issuer"><%= cert.issuedBy %></span>
                          <% if (cert.expiryDate) { %>
                            <span class="certification-validity">
                              <%- t('productDetails.validUntil') %>: <%= new Date(cert.expiryDate).toLocaleDateString() %>
                            </span>
                          <% } %>
                        </div>
                      </div>
                    <% }); %>
                  <% } %>
                </div>
              </div>
            <% } %>
          </div>

          <!-- Right Column: Professional Product Information -->
          <div class="product-info-section">
            
            <!-- Amazon-Style Product Information Container -->
            <div class="amazon-product-info">
              
              <!-- Professional Product Header Section -->
              <div class="product-header-section">
                <!-- Product Title & Brand -->
                <div class="product-title-container">
                  <div class="product-brand-info">
                    <% if (product.manufacturer) { %>
                      <span class="product-brand">
                        <%= product.manufacturer.companyName || product.manufacturer.businessName %>
                      </span>
                      <% if (product.manufacturer.isVerified) { %>
                        <span class="brand-verified">
                          <i class="fas fa-shield-check"></i>
                          <%= t('productDetails.verified') %>
                        </span>
                      <% } %>
                    <% } %>
                  </div>
              <h1 class="product-title"><%= product.name %></h1>
                </div>
              
                <!-- Enhanced Rating & Reviews Section -->
                <div class="rating-reviews-container">
                  <div class="product-rating-wrapper">
                  <div class="stars-container">
                    <% 
                      const rating = product.averageRating || 0;
                      const fullStars = Math.floor(rating);
                      const hasHalfStar = (rating % 1) >= 0.5;
                    %>
                    <% for (let i = 1; i <= 5; i++) { %>
                      <% if (i <= fullStars) { %>
                        <i class="fas fa-star star-filled"></i>
                      <% } else if (i === fullStars + 1 && hasHalfStar) { %>
                        <i class="fas fa-star-half-alt star-half"></i>
                      <% } else { %>
                        <i class="far fa-star star-empty"></i>
                      <% } %>
                    <% } %>
                  </div>
                    <div class="rating-info">
                  <span class="rating-score"><%= rating.toFixed(1) %></span>
                      <span class="rating-separator"></span>
                      <span class="rating-count"><%= product.totalReviews || 0 %> <%= t('productDetails.reviews') %></span>
                    </div>
                </div>
                
                  <!-- Social Proof Badges -->
                  <div class="social-proof-badges">
                    <% if (product.analytics && product.analytics.orders > 0) { %>
                      <span class="proof-badge orders-badge">
                        <i class="fas fa-shopping-bag"></i>
                        <%= product.analytics.orders %>+ <%= t('productDetails.sold') %>
                      </span>
                    <% } %>
                    <% if (product.analytics && product.analytics.views > 100) { %>
                      <span class="proof-badge views-badge">
                        <i class="fas fa-eye"></i>
                        <%= product.analytics.views %>+ <%= t('productDetails.views') %>
                      </span>
                    <% } %>
                    <% if (product.isFeatured) { %>
                      <span class="proof-badge featured-badge">
                        <i class="fas fa-award"></i>
                        <%= t('productDetails.featured') %>
                      </span>
                    <% } %>
                  </div>
                </div>
                
                <!-- Enhanced Product Description -->
                <% if (product.shortDescription) { %>
                  <div class="product-description-wrapper">
                  <p class="product-description"><%= product.shortDescription %></p>
              </div>
                <% } %>

                <!-- Professional Key Highlights List -->
                <div class="key-highlights-bar">
                  <div class="highlight-item">
                    <i class="fas fa-check highlight-icon"></i>
                    <span class="highlight-text"><%= t('productDetails.qualityAssuredProduct') %></span>
                  </div>
                  <% if (product.shipping && product.shipping.leadTime) { %>
                    <div class="highlight-item">
                      <i class="fas fa-truck highlight-icon"></i>
                      <span class="highlight-text">
                        <%= t('productDetails.shipsIn') %> <%= product.shipping.leadTime.min %>
                        <% if (product.shipping.leadTime.max && product.shipping.leadTime.max !== product.shipping.leadTime.min) { %>
                          -<%= product.shipping.leadTime.max %>
                        <% } %> <%= t('productDetails.businessDaysShipping') %>
                      </span>
                    </div>
                      <% } %>
                  <% if (product.manufacturer && product.manufacturer.isVerified) { %>
                    <div class="highlight-item">
                      <i class="fas fa-shield-alt highlight-icon"></i>
                      <span class="highlight-text"><%= t('productDetails.verifiedSupplier') %></span>
                    </div>
                      <% } %>
                  <% if (product.pricing && product.pricing.priceType === 'negotiable') { %>
                    <div class="highlight-item">
                      <i class="fas fa-handshake highlight-icon"></i>
                      <span class="highlight-text"><%= t('productDetails.priceNegotiable') %></span>
                        </div>
                      <% } %>
                  <div class="highlight-item">
                    <i class="fas fa-headset highlight-icon"></i>
                    <span class="highlight-text"><%= t('productDetails.customerSupport247') %></span>
                  </div>
                </div>
              </div>

              <!-- Professional Product Information Cards -->
              <div class="product-info-list">
                
                <!-- Essential Product Information - Professional Ecommerce Style -->
                <div class="essential-info-grid">
                  
                  <!-- Price Information -->
                <% if (product.pricing) { %>
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.price') %></div>
                    <div class="info-table-value">
                      <div class="price-display">
                        <span class="price-main">$<%= (product.pricing.basePrice || 0).toFixed(2) %></span>
                        <span class="price-currency"><%= product.pricing.currency || t('common.usd') %></span>
                      </div>
                    <% if (product.pricing.priceType === 'negotiable') { %>
                        <span class="price-type">
                          <i class="fas fa-handshake"></i>
                          <%= t('productDetails.negotiable') %>
                        </span>
                    <% } else if (product.pricing.priceType === 'quote_based') { %>
                        <span class="price-type">
                          <i class="fas fa-calculator"></i>
                          <%= t('productDetails.quoteBase') %>
                  </span>
                      <% } %>
                    </div>
                  </div>
                <% } %>

                  <!-- Minimum Order Quantity -->
                <% if (product.pricing?.minimumOrderQuantity) { %>
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.moq') %></div>
                    <div class="info-table-value">
                      <span class="quantity-display">
                        <%= product.pricing.minimumOrderQuantity.toLocaleString() %> <%= product.inventory?.unit || t('common.pieces') %>
                    <% if (product.pricing.maximumOrderQuantity) { %>
                          <span class="quantity-range">
                            (<%= t('common.max') %>: <%= product.pricing.maximumOrderQuantity.toLocaleString() %> <%= product.inventory?.unit || t('common.pieces') %>)
                          </span>
                    <% } %>
                  </span>
                    </div>
                </div>
                <% } %>

                  <!-- Availability -->
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.availability') %></div>
                    <div class="info-table-value">
                      <% 
                        const availableStock = product.inventory?.availableStock || 0;
                        const lowStockThreshold = product.inventory?.lowStockThreshold || 10;
                        let stockText = t('productDetails.inStock');
                        let stockClass = 'stock-available';
                        
                        if (availableStock === 0) {
                          stockText = t('productDetails.outOfStock');
                          stockClass = 'stock-unavailable';
                        } else if (availableStock <= lowStockThreshold) {
                          stockText = t('productDetails.lowStock');
                          stockClass = 'stock-limited';
                        }
                      %>
                      <span class="<%= stockClass %>"><%= stockText %></span>
                      <% if (availableStock > 0) { %>
                        <span class="stock-details">
                          - <%= availableStock.toLocaleString() %> <%= product.inventory?.unit || t('productDetails.units') %> <%= t('productDetails.available') %>
                  </span>
                    <% } %>
                    </div>
                </div>

                <!-- Delivery Time -->
                <% if (product.shipping?.leadTime) { %>
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.deliveryTime') %></div>
                    <div class="info-table-value">
                      <span class="delivery-time">
                        <span class="delivery-days">
                    <%= product.shipping.leadTime.min %>
                    <% if (product.shipping.leadTime.max && product.shipping.leadTime.max !== product.shipping.leadTime.min) { %>
                      - <%= product.shipping.leadTime.max %>
                    <% } %>
                        </span>
                        <%= t('productDetails.businessDays') %>
                    </span>
                  </div>
                  </div>
                <% } %>

                  <!-- Manufacturer -->
                  <% if (product.manufacturer) { %>
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.manufacturer') %></div>
                    <div class="info-table-value">
                      <span class="manufacturer-name">
                        <%= product.manufacturer.companyName || product.manufacturer.businessName || t('common.notAvailable') %>
                      </span>
                      <% if (product.manufacturer.isVerified) { %>
                        <span class="verified-badge">
                          <i class="fas fa-shield-check"></i>
                          <%= t('productDetails.verified') %>
                        </span>
                    <% } %>
                      <% if (product.manufacturer.country) { %>
                        <span class="location-badge">
                          <i class="fas fa-map-marker-alt"></i>
                          <%= product.manufacturer.country %>
                  </span>
                      <% } %>
                    </div>
              </div>
            <% } %>

                  <!-- Category -->
                  <% if (product.category) { %>
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.category') %></div>
                    <div class="info-table-value">
                      <span class="category-name"><%= product.category.name || product.category %></span>
                    </div>
              </div>
                <% } %>

                <!-- Quality Standards -->
                <% if (product.qualityStandards && product.qualityStandards.length > 0) { %>
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.qualityStandards') %></div>
                    <div class="info-table-value">
                      <div class="quality-badges">
                    <% product.qualityStandards.slice(0, 4).forEach(standard => { %>
                          <span class="quality-badge">
                            <i class="fas fa-check-circle"></i>
                            <%= standard %>
                          </span>
                    <% }); %>
                        <% if (product.qualityStandards.length > 4) { %>
                          <span class="quality-badge-more">
                            +<%= product.qualityStandards.length - 4 %> <%= t('productDetails.more') %>
                </span>
                        <% } %>
                      </div>
                    </div>
              </div>
                <% } %>

                  <!-- Additional Professional Info -->
                  <% if (product.analytics && product.analytics.views > 0) { %>
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.productViews') %></div>
                    <div class="info-table-value">
                      <span class="view-count"><%= product.analytics.views.toLocaleString() %> <%= t('productDetails.peopleViewedProduct') %></span>
                    </div>
                  </div>
                          <% } %>

                  <% if (product.shipping && (product.shipping.weight || product.shipping.dimensions)) { %>
                  <div class="info-table-row">
                    <div class="info-table-label"><%= t('productDetails.shippingInfo') %></div>
                    <div class="info-table-value">
                      <div class="shipping-specs">
                        <% if (product.shipping.weight) { %>
                          <span class="shipping-spec"><%= t('productDetails.weight') %>: <%= product.shipping.weight %> <%= t('common.kg') %></span>
                          <% } %>
                        <% if (product.shipping.dimensions) { %>
                          <span class="shipping-spec">
                            <%= t('productDetails.dimensions') %>: <%= product.shipping.dimensions.length %><%= product.shipping.dimensions.width %><%= product.shipping.dimensions.height %> <%= product.shipping.dimensions.unit || t('common.cm') %>
                  </span>
                        <% } %>
                      </div>
                    </div>
                </div>
              <% } %>

            </div>



            </div>

              <!-- Professional Key Specifications Section -->
            <% if (product.specifications && product.specifications.length > 0) { %>
              <div class="key-specs-section">
                <div class="specs-header">
                  <div class="specs-title">
                    <i class="fas fa-cogs specs-icon"></i>
                    <h4 class="section-subtitle"><%= t('productDetails.keySpecifications') %></h4>
                    </div>
                  <% if (product.specifications.length > 6) { %>
                  <button class="view-all-specs-btn" onclick="document.querySelector('[data-tab=specifications]').click()">
                      <span><%= t('productDetails.viewAll') %> <%= product.specifications.length %></span>
                      <i class="fas fa-arrow-right"></i>
                  </button>
                <% } %>
              </div>
                
                <div class="specs-grid">
                  <% product.specifications.slice(0, 8).forEach((spec, index) => { %>
                    <div class="spec-table-row">
                      <div class="spec-name"><%= spec.name %></div>
                      <div class="spec-value">
                        <span class="value-text"><%= spec.value %></span>
                        <% if (spec.unit) { %>
                          <span class="value-unit"><%= spec.unit %></span>
            <% } %>
                      </div>
                    </div>
                  <% }); %>
                </div>

                <!-- Quick Specs Summary -->
                <div class="specs-summary">
                  <div class="summary-header">
                    <i class="fas fa-clipboard-list"></i>
                    <span><%= t('productDetails.quickSpecs') %></span>
                  </div>
                  <div class="summary-list">
                    <% product.specifications.slice(0, 4).forEach(spec => { %>
                      <div class="summary-item">
                        <span class="summary-name"><%= spec.name %></span>
                        <span class="summary-value">
                          <%= spec.value %><% if (spec.unit) { %> <%= spec.unit %><% } %>
                        </span>
                      </div>
                    <% }); %>
                  </div>
                </div>
              </div>
            <% } %>

                </div>
                
            <!-- Essential Product Information -->
            <div class="product-essentials" style="display: none;">
              
              <!-- Professional Product Information Grid -->
              <div class="product-info-grid">
                
                <!-- Manufacturer Information Card -->
                <% if (product.manufacturer) { %>
                <div class="info-grid-card manufacturer-card">
                  <div class="card-header">
                    <i class="fas fa-industry"></i>
                    <span><%= t('productDetails.manufacturer') %></span>
                  </div>
                  <div class="card-content">
                    <div class="manufacturer-info">
                      <div class="manufacturer-name">
                        <%= product.manufacturer.companyName || product.manufacturer.businessName || t('common.notAvailable') %>
                      </div>
                      <% if (product.manufacturer.country) { %>
                        <div class="manufacturer-location">
                          <i class="fas fa-map-marker-alt"></i>
                          <%= product.manufacturer.country %>
                  </div>
                <% } %>
                      <% if (product.manufacturer.isVerified) { %>
                        <div class="verification-badge">
                          <i class="fas fa-shield-alt verified"></i>
                          <%= t('productDetails.verified') %>
              </div>
                    <% } %>
                    </div>
                  </div>
                </div>
              <% } %>
              
                <!-- Pricing Details Card -->
                <% if (product.pricing) { %>
                <div class="info-grid-card pricing-card">
                  <div class="card-header">
                    <i class="fas fa-dollar-sign"></i>
                    <span><%= t('productDetails.pricing') %></span>
                      </div>
                  <div class="card-content">
                    <div class="pricing-details">
                      <div class="price-main">
                        $<%= (product.pricing.basePrice || 0).toFixed(2) %> 
                        <span class="currency"><%= product.pricing.currency || t('common.usd') %></span>
                      </div>
                      <div class="price-type">
                        <% if (product.pricing.priceType === 'negotiable') { %>
                          <i class="fas fa-handshake"></i>
                          <%= t('productDetails.negotiable') %>
                        <% } else if (product.pricing.priceType === 'quote_based') { %>
                          <i class="fas fa-calculator"></i>
                          <%= t('productDetails.quoteBase') %>
                        <% } else { %>
                          <i class="fas fa-tag"></i>
                          <%= t('productDetails.fixedPrice') %>
                    <% } %>
                      </div>
                      <div class="quantity-range">
                        <span><%= t('productDetails.moq') %>: <%= product.pricing.minimumOrderQuantity || 1 %></span>
                        <% if (product.pricing.maximumOrderQuantity) { %>
                          <span><%= t('productDetails.max') %>: <%= product.pricing.maximumOrderQuantity.toLocaleString() %></span>
                    <% } %>
                      </div>
                    </div>
                  </div>
                      </div>
                    <% } %>

                <!-- Product Analytics Card -->
                <% if (product.analytics && (product.analytics.views > 0 || product.analytics.inquiries > 0 || product.analytics.orders > 0)) { %>
                <div class="info-grid-card analytics-card">
                  <div class="card-header">
                    <i class="fas fa-chart-line"></i>
                    <span><%= t('productDetails.popularity') %></span>
                  </div>
                  <div class="card-content">
                    <div class="analytics-grid">
                      <% if (product.analytics.views > 0) { %>
                        <div class="metric-item views-item">
                          <div class="metric-icon">
                            <i class="fas fa-eye"></i>
                          </div>
                          <div class="metric-info">
                            <span class="metric-value"><%= product.analytics.views.toLocaleString() %></span>
                            <span class="metric-label"><%= t('productDetails.views') %></span>
                          </div>
                      </div>
                    <% } %>
                      
                      <% if (product.analytics.inquiries > 0) { %>
                        <div class="metric-item inquiries-item">
                          <div class="metric-icon">
                            <i class="fas fa-envelope"></i>
                          </div>
                          <div class="metric-info">
                            <span class="metric-value"><%= product.analytics.inquiries.toLocaleString() %></span>
                            <span class="metric-label"><%= t('productDetails.inquiries') %></span>
                  </div>
                </div>
              <% } %>
              
                      <% if (product.analytics.orders > 0) { %>
                        <div class="metric-item orders-item">
                          <div class="metric-icon">
                            <i class="fas fa-shopping-bag"></i>
                          </div>
                          <div class="metric-info">
                            <span class="metric-value"><%= product.analytics.orders.toLocaleString() %></span>
                            <span class="metric-label"><%= t('productDetails.orders') %></span>
                          </div>
                      </div>
                    <% } %>
                    </div>
                  </div>
                </div>
                <% } %>

                <!-- Shipping Information Card -->
                <% if (product.shipping && (product.shipping.weight || product.shipping.dimensions || product.shipping.packagingType)) { %>
                <div class="info-grid-card shipping-card">
                  <div class="card-header">
                    <i class="fas fa-truck"></i>
                    <span><%= t('productDetails.shipping') %></span>
                  </div>
                  <div class="card-content">
                    <div class="shipping-details">
                      <% if (product.shipping.weight) { %>
                        <div class="shipping-item">
                          <i class="fas fa-weight-hanging"></i>
                          <span><%= t('productDetails.weight') %>: <%= product.shipping.weight %> kg</span>
                        </div>
                      <% } %>
                      
                    <% if (product.shipping.dimensions) { %>
                        <div class="shipping-item">
                          <i class="fas fa-cube"></i>
                          <span><%= t('productDetails.dimensions') %>: 
                            <%= product.shipping.dimensions.length %><%= product.shipping.dimensions.width %><%= product.shipping.dimensions.height %> 
                          <%= product.shipping.dimensions.unit || t('common.cm') %>
                        </span>
                      </div>
                    <% } %>
                      
                    <% if (product.shipping.packagingType) { %>
                        <div class="shipping-item">
                          <i class="fas fa-box"></i>
                          <span><%= t('productDetails.packaging') %>: <%= product.shipping.packagingType %></span>
                      </div>
                    <% } %>
                      
                    <% if (product.shipping.shippingClass) { %>
                        <div class="shipping-item">
                          <i class="fas fa-tag"></i>
                          <span><%= t('productDetails.shippingClass') %>: <%= product.shipping.shippingClass %></span>
                      </div>
                    <% } %>
                    </div>
                  </div>
                </div>
              <% } %>
              
                <!-- Quality Standards Card -->
                <% if ((product.qualityStandards && product.qualityStandards.length > 0) || (product.certifications && product.certifications.length > 0)) { %>
                <div class="info-grid-card quality-card">
                  <div class="card-header">
                    <i class="fas fa-award"></i>
                    <span><%= t('productDetails.qualityStandards') %></span>
                  </div>
                  <div class="card-content">
                    <div class="quality-standards">
                      <% if (product.qualityStandards && product.qualityStandards.length > 0) { %>
                        <div class="standards-section">
                          <div class="standards-grid">
                            <% product.qualityStandards.forEach(standard => { %>
                              <div class="standard-badge">
                                <i class="fas fa-check-circle"></i>
                                <%= standard %>
                              </div>
                            <% }); %>
                          </div>
                    </div>
                  <% } %>
                  
                      <% if (product.certifications && product.certifications.length > 0) { %>
                        <div class="certifications-section">
                          <% product.certifications.slice(0, 3).forEach(cert => { %>
                            <div class="certification-item">
                              <i class="fas fa-certificate"></i>
                              <span><%= cert.name %></span>
                            </div>
                        <% }); %>
                        </div>
                      <% } %>
                    </div>
                      </div>
                    </div>
                  <% } %>
                  
                <!-- Product Status Card -->
                <% if (product.status || product.isFeatured || product.isPromoted) { %>
                <div class="info-grid-card status-card">
                  <div class="card-header">
                    <i class="fas fa-info-circle"></i>
                    <span><%= t('productDetails.status') %></span>
                  </div>
                  <div class="card-content">
                    <div class="status-badges">
                      <% if (product.status) { %>
                        <div class="status-badge status-<%= product.status %>">
                          <% if (product.status === 'active') { %>
                            <i class="fas fa-check-circle"></i>
                            <%= t('productDetails.active') %>
                          <% } else if (product.status === 'inactive') { %>
                            <i class="fas fa-pause-circle"></i>
                            <%= t('productDetails.inactive') %>
                          <% } else if (product.status === 'discontinued') { %>
                            <i class="fas fa-times-circle"></i>
                            <%= t('productDetails.discontinued') %>
                          <% } else { %>
                            <i class="fas fa-info-circle"></i>
                            <%= product.status %>
                          <% } %>
                        </div>
                      <% } %>
                      
                      <% if (product.isFeatured) { %>
                        <div class="status-badge featured">
                          <i class="fas fa-star"></i>
                          <%= t('productDetails.featured') %>
                        </div>
                      <% } %>
                      
                      <% if (product.isPromoted) { %>
                        <div class="status-badge promoted">
                          <i class="fas fa-bullhorn"></i>
                          <%= t('productDetails.promoted') %>
                        </div>
                      <% } %>
                    </div>
                  </div>
                </div>
                <% } %>

              </div>

              <!-- Key Specifications Preview -->
            <% if (product.specifications && product.specifications.length > 0) { %>
                <div class="key-specs-preview">
                  <h4 class="section-subtitle">
                    <i class="fas fa-star"></i>
                    Key Features
                  </h4>
                  <div class="specs-preview-grid">
                    <% product.specifications.slice(0, 4).forEach(spec => { %>
                      <div class="spec-preview-item">
                      <span class="spec-name"><%= spec.name %></span>
                      <span class="spec-value">
                        <%= spec.value %>
                        <% if (spec.unit) { %><%= spec.unit %><% } %>
                          </span>
                    </div>
                        <% }); %>
                      </div>
                  <% if (product.specifications.length > 4) { %>
                    <button class="view-all-specs-btn" onclick="document.querySelector('[data-tab=specifications]').click()">
                      <i class="fas fa-plus"></i>
                      View All <%= product.specifications.length %> Specifications
                    </button>
                  <% } %>
                    </div>
                  <% } %>

              <!-- Quick Stock & Delivery Info -->
              <div class="quick-info-cards">
                <!-- Stock Status Card -->
                <div class="info-card stock-card" style="display: flex; align-items: center;">
                  <div class="card-icon" style="margin-left: 12px;">
                    <i class="fas fa-boxes"></i>
                  </div>
                  <div class="card-content" style="display: flex; align-items: center; justify-content: space-between;">
                    <div class="card-title">
                      <%= t('productDetails.availability') %>
                    </div>
                    <div>
                      <% 
                        const availableStockInfo = product.inventory?.availableStock || 0;
                        const lowStockThresholdInfo = product.inventory?.lowStockThreshold || 10;
                        let stockStatusInfo = 'in-stock';
                        let stockTextInfo = t('productDetails.inStock');
                        
                        if (availableStockInfo === 0) {
                          stockStatusInfo = 'out-of-stock';
                          stockTextInfo = t('productDetails.outOfStock');
                        } else if (availableStockInfo <= lowStockThresholdInfo) {
                          stockStatusInfo = 'low-stock';
                          stockTextInfo = t('productDetails.lowStock');
                        } else {
                          stockTextInfo = t('productDetails.inStock');
                        }
                      %>
                      <div class="stock-status-indicator <%= stockStatusInfo %>">
                      <i class="fas fa-circle"></i>
                        <%= stockTextInfo %>
                  </div>
                      <% if (availableStockInfo > 0) { %>
                        <div class="stock-count">
                          <%= availableStockInfo.toLocaleString() %> <%= product.inventory?.unit || t('productDetails.units') %> <%= t('productDetails.available') %>
                    </div>
                </div>
              <% } %>
                  </div>
            </div>

                <!-- Delivery Info Card -->
              <% if (product.shipping?.leadTime) { %>
                  <div class="info-card delivery-card" style="display: flex; align-items: center;">
                    <div class="card-icon" style="margin-left: 12px;">
                      <i class="fas fa-shipping-fast"></i>
                    </div>
                    <div class="card-content" style="display: flex; align-items: center; justify-content: space-between;">
                      <div class="card-title"><%= t('productDetails.deliveryTime') %></div>
                      <div class="delivery-time">
                    <%= product.shipping.leadTime.min %>
                    <% if (product.shipping.leadTime.max && product.shipping.leadTime.max !== product.shipping.leadTime.min) { %>
                      - <%= product.shipping.leadTime.max %>
                    <% } %>
                        <%= t('productDetails.days') %>
                </div>
                  </div>
                </div>
              <% } %>
              
                <!-- Category Card -->
                  <% if (product.category) { %>
                  <div class="info-card category-card" style="display: flex; align-items: center;">
                    <div class="card-icon" style="margin-left: 12px;">
                        <i class="fas fa-folder"></i>
                    </div>
                    <div class="card-content" style="display: flex; align-items: center; justify-content: space-between;">
                      <div class="card-title"><%= t('productDetails.category') %></div>
                      <div class="category-name">
                        <%= product.category.name || product.category %>
                    </div>
                      </div>
                    </div>
                  <% } %>
                      </div>
            </div>

            <!-- Professional Alibaba-Style CTA Section -->
            <div class="product-cta-container" id="productCTASection">
              
              <!-- Quantity & Price Row -->
              <div class="quantity-price-row">
                <div class="quantity-selector">
                  <label class="quantity-label">Quantity:</label>
                <div class="quantity-controls">
                    <button class="qty-btn qty-minus" type="button" id="decreaseQty">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input type="number" 
                           class="qty-input" 
                         value="<%= product.pricing?.minimumOrderQuantity || 1 %>" 
                         min="<%= product.pricing?.minimumOrderQuantity || 1 %>"
                           max="<%= Math.min(product.pricing?.maximumOrderQuantity || 999, product.inventory?.availableStock || 999) %>"
                           data-product-id="<%= product._id %>"
                           data-manufacturer-id="<%= product.manufacturer?._id %>"
                           data-unit-price="<%= product.pricing?.basePrice || 0 %>"
                           data-currency="<%= product.pricing?.currency || t('common.usd') %>"
                           data-min-qty="<%= product.pricing?.minimumOrderQuantity || 1 %>"
                           data-max-qty="<%= Math.min(product.pricing?.maximumOrderQuantity || 999, product.inventory?.availableStock || 999) %>"
                           data-stock="<%= product.inventory?.availableStock || 0 %>"
                         id="productQuantity">
                    <button class="qty-btn qty-plus" type="button" id="increaseQty">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
              </div>

                <div class="price-display">
                  <div class="unit-price">
                    <span class="price-value">$<%= (product.pricing?.basePrice || 0).toFixed(2) %></span>
                    <span class="price-unit">/ <%= product.inventory?.unit || t('common.piece') %></span>
                  </div>
                  <div class="total-price">
                    <span class="total-label"><%= t('productDetails.total') %>: </span>
                    <span class="total-value" id="totalPrice">$<%= ((product.pricing?.basePrice || 0) * (product.pricing?.minimumOrderQuantity || 1)).toFixed(2) %></span>
                  </div>
                </div>
              </div>

              <div class="qty-info-container">
                <div class="qty-info">
                  <span class="min-order"><%= t('productDetails.min') %>: <%= product.pricing?.minimumOrderQuantity || 1 %></span>
                  <span class="stock-info"><%= t('productDetails.stock') %>: <%= (product.inventory?.availableStock || 0).toLocaleString() %></span>
                </div>
              </div>

              <!-- Action Buttons Row -->
              <div class="action-buttons-row">
                <!-- Primary Actions -->
                <div class="primary-btn-group">
                  <button class="cta-btn add-to-cart-btn" 
                          id="addToCartBtn" 
                          data-product-id="<%= product._id %>"
                          data-manufacturer-id="<%= product.manufacturer?._id %>">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="btn-text"><%= t('productDetails.addToCart') %></span>
                    <span class="btn-loading" style="display: none;">
                      <i class="fas fa-spinner fa-spin"></i>
                    </span>
                  </button>
                  
                  <button class="cta-btn favorite-btn" 
                          id="favoriteBtn"
                          data-product-id="<%= product._id %>">
                    <i class="far fa-heart"></i>
                    <span class="btn-text"><%= t('productDetails.favorite') %></span>
                    <span class="btn-loading" style="display: none;">
                      <i class="fas fa-spinner fa-spin"></i>
                    </span>
                  </button>
                </div>

                <!-- Secondary Actions -->
                <div class="secondary-btn-group">
                  <button class="secondary-btn inquiry-btn" data-product-id="<%= product._id %>">
                  <i class="fas fa-envelope"></i>
                    <span><%= t('productDetails.inquiry') %></span>
                </button>
                
                  <button class="secondary-btn chat-btn" 
                          data-manufacturer-id="<%= product.manufacturer?._id %>" 
                          onclick="window.openChat('<%= product.manufacturer?._id %>')">
                  <i class="fas fa-comments"></i>
                    <span><%= t('productDetails.chat') %></span>
                </button>
                
                  <button class="secondary-btn sample-btn" data-product-id="<%= product._id %>">
                  <i class="fas fa-vial"></i>
                    <span><%= t('productDetails.sample') %></span>
                </button>
                </div>
              </div>

              <!-- Additional Options -->
                <div class="additional-options" style="margin-top: 8px;">
                <button class="option-btn compare-toggle" data-product-id="<%= product._id %>">
                  <i class="fas fa-balance-scale"></i>
                  <%- t('productDetails.addToCompare') %>
                </button>
                
                <button class="option-btn share-product" data-product-id="<%= product._id %>">
                  <i class="fas fa-share-alt"></i>
                  <%- t('productDetails.shareProduct') %>
                </button>
                </div>
                      
              </div>
            </div>

            <!-- Professional Shipping Information -->
            <% if (product.shipping) { %>
              <div class="shipping-section">
                <h4 class="section-title">
                  <i class="fas fa-shipping-fast"></i>
                  <%= t('product.shippingInfo') %>
                </h4>
                
                <div class="shipping-details">
                  <% if (product.shipping.weight) { %>
                    <div class="shipping-detail">
                      <span class="detail-label"><%= t('product.weight') %>:</span>
                      <span class="detail-value"><%= product.shipping.weight %> kg</span>
                    </div>
                  <% } %>
                  
                  <% if (product.shipping.dimensions) { %>
                    <div class="shipping-detail">
                      <span class="detail-label"><%= t('product.dimensions') %>:</span>
                      <span class="detail-value">
                        <%= product.shipping.dimensions.length %>  
                        <%= product.shipping.dimensions.width %>  
                        <%= product.shipping.dimensions.height %> 
                        <%= product.shipping.dimensions.unit || 'cm' %>
                      </span>
                    </div>
                  <% } %>
                  
                  <% if (product.shipping.packagingType) { %>
                    <div class="shipping-detail">
                      <span class="detail-label"><%= t('product.packaging') %>:</span>
                      <span class="detail-value"><%= product.shipping.packagingType %></span>
                    </div>
                  <% } %>
                </div>
              </div>
            <% } %>
          </div>
        </div>
      </div>
    </section>

    <!-- Professional Supplier Information Section -->
    <% if (product.manufacturer) { %>
      <section class="supplier-section">
        <div class="container">
          <h2 class="section-main-title">
            <i class="fas fa-industry"></i>
            <%- t('productDetails.supplierInfo') %>
          </h2>
          
          <div class="supplier-card">
            <div class="supplier-header">
              <div class="supplier-logo">
                <% if (product.manufacturer.companyLogo && product.manufacturer.companyLogo.url) { %>
                  <img src="<%= product.manufacturer.companyLogo.url %>" alt="<%= product.manufacturer.companyName %>" onerror="this.parentElement.innerHTML='<div class=&quot;logo-placeholder&quot;><i class=&quot;fas fa-building&quot;></i></div>'">
                <% } else { %>
                  <div class="logo-placeholder">
                    <i class="fas fa-building"></i>
                  </div>
                <% } %>
              </div>
              
              <div class="supplier-info">
                <h3 class="supplier-name"><%= product.manufacturer.companyName %></h3>
                
                <div class="supplier-verification">
                  <% if (product.manufacturer.isVerified || supplierVerification.level) { %>
                    <span class="verification-badge verified">
                      <i class="fas fa-check-circle"></i>
                      <%= supplierVerification.level ? supplierVerification.level.charAt(0).toUpperCase() + supplierVerification.level.slice(1) : t('productDetails.verified') %> <%= t('productDetails.supplier') %>
                    </span>
                  <% } %>
                  
                  <span class="supplier-location">
                    <i class="fas fa-map-marker-alt"></i>
                    <%= product.manufacturer.country %>
                    <% if (product.manufacturer.address) { %>
                       <%= product.manufacturer.address %>
                    <% } %>
                  </span>
                </div>
                
                <!-- Supplier Rating & Stats -->
                <div class="supplier-stats">
                  <div class="stat-item">
                    <span class="stat-label"><%= t('supplier.rating') %>:</span>
                    <div class="rating-display small">
                      <% 
                        const supplierRating = product.manufacturer.averageRating || 0;
                        const supplierFullStars = Math.floor(supplierRating);
                        const supplierHasHalfStar = (supplierRating % 1) >= 0.5;
                      %>
                      <div class="stars-container">
                        <% for (let i = 1; i <= 5; i++) { %>
                          <% if (i <= supplierFullStars) { %>
                            <i class="fas fa-star star-filled"></i>
                          <% } else if (i === supplierFullStars + 1 && supplierHasHalfStar) { %>
                            <i class="fas fa-star-half-alt star-half"></i>
                          <% } else { %>
                            <i class="far fa-star star-empty"></i>
                          <% } %>
                        <% } %>
                      </div>
                      <span class="rating-score"><%= supplierRating.toFixed(1) %></span>
                    </div>
                  </div>
                  
                  <div class="stat-item">
                    <span class="stat-label"><%= t('supplier.totalProducts') %>:</span>
                    <span class="stat-value"><%= (product.manufacturer.totalProducts || 0).toLocaleString() %></span>
                  </div>
                  
                  <div class="stat-item">
                    <span class="stat-label"><%= t('supplier.totalOrders') %>:</span>
                    <span class="stat-value"><%= (product.manufacturer.totalOrders || 0).toLocaleString() %></span>
                  </div>
                  
                  <% if (product.manufacturer.establishedYear) { %>
                    <div class="stat-item">
                      <span class="stat-label"><%= t('supplier.established') %>:</span>
                      <span class="stat-value"><%= product.manufacturer.establishedYear %></span>
                    </div>
                  <% } %>
                </div>
              </div>
              
              <!-- Supplier Actions -->
              <div class="supplier-actions">
                <button class="btn btn-primary contact-supplier-btn" data-supplier-id="<%= product.manufacturer._id %>">
                  <i class="fas fa-envelope"></i>
                  <%= t('supplier.contactSupplier') %>
                </button>
                
                <a href="/supplier/<%= product.manufacturer._id %>" class="btn btn-outline-primary">
                  <i class="fas fa-eye"></i>
                  <%= t('supplier.viewProfile') %>
                </a>
              </div>
            </div>
            
            <!-- Supplier Description -->
            <% if (product.manufacturer.description) { %>
              <div class="supplier-description">
                <p><%= product.manufacturer.description %></p>
              </div>
            <% } %>
            
            <!-- Business License & Certifications -->
            <div class="supplier-credentials">
              <% if (product.manufacturer.businessLicense) { %>
                <div class="credential-item">
                  <i class="fas fa-certificate"></i>
                  <span><%= t('supplier.businessLicense') %>: <%= product.manufacturer.businessLicense %></span>
                </div>
              <% } %>
              
              <% if (product.manufacturer.employeeCount) { %>
                <div class="credential-item">
                  <i class="fas fa-users"></i>
                  <span><%= t('supplier.employees') %>: <%= product.manufacturer.employeeCount %></span>
                </div>
              <% } %>
            </div>
          </div>
        </div>
      </section>
    <% } %>

    <!-- Professional Detailed Information Tabs -->
    <section class="detailed-info-section">
      <div class="container">
        <div class="detail-tabs-container">
          
          <!-- Tab Navigation -->
          <nav class="detail-tabs-nav">
            <button class="tab-btn active" data-tab="description">
              <i class="fas fa-align-left"></i>
              <%= t('product.description') %>
            </button>
            
            <% if (product.specifications && product.specifications.length > 0) { %>
              <button class="tab-btn" data-tab="specifications">
                <i class="fas fa-cogs"></i>
                <%= t('product.specifications') %>
              </button>
            <% } %>
            
            <button class="tab-btn" data-tab="shipping">
              <i class="fas fa-shipping-fast"></i>
              <%= t('product.shippingPayment') %>
            </button>
            
            <button class="tab-btn" data-tab="reviews">
              <i class="fas fa-star"></i>
              <%= t('product.reviews') %> (<%= product.totalReviews || 0 %>)
            </button>
            
            <% if (product.manufacturer) { %>
              <button class="tab-btn" data-tab="company">
                <i class="fas fa-building"></i>
                <%= t('product.companyProfile') %>
              </button>
            <% } %>
          </nav>

          <!-- Tab Content -->
          <div class="detail-tabs-content">
            
            <!-- Product Description Tab -->
            <div class="tab-content active" id="description-tab">
              <div class="description-content">
                <h3><%= t('product.detailedDescription') %></h3>
                <div class="product-description">
                  <%= product.description %>
                </div>
                
                <!-- Key Features -->
                <% if (product.specifications && product.specifications.length > 0) { %>
                  <div class="key-features">
                    <h4><%= t('product.keyFeatures') %></h4>
                    <ul class="features-list">
                      <% product.specifications.slice(0, 5).forEach(spec => { %>
                        <li>
                          <strong><%= spec.name %>:</strong> 
                          <%= spec.value %>
                          <% if (spec.unit) { %><%= spec.unit %><% } %>
                        </li>
                      <% }); %>
                    </ul>
                  </div>
                <% } %>
              </div>
            </div>

            <!-- Specifications Tab -->
            <% if (product.specifications && product.specifications.length > 0) { %>
              <div class="tab-content" id="specifications-tab">
                <div class="specifications-detailed">
                  <h3><%= t('product.technicalSpecifications') %></h3>
                  <div class="specs-table">
                    <% product.specifications.forEach(spec => { %>
                      <div class="spec-row">
                        <div class="spec-label"><%= spec.name %></div>
                        <div class="spec-value">
                          <%= spec.value %>
                          <% if (spec.unit) { %><span class="spec-unit"><%= spec.unit %></span><% } %>
                        </div>
                      </div>
                    <% }); %>
                  </div>
                </div>
              </div>
            <% } %>

            <!-- Shipping & Payment Tab -->
            <div class="tab-content" id="shipping-tab">
              <div class="shipping-payment-content">
                
                <!-- Shipping Information -->
                <div class="shipping-info-detailed">
                  <h3>
                    <i class="fas fa-truck"></i>
                    <%= t('product.shippingInformation') %>
                  </h3>
                  
                  <div class="shipping-details-grid">
                    <% if (product.shipping?.weight) { %>
                      <div class="detail-item">
                        <span class="label"><%= t('product.weight') %>:</span>
                        <span class="value"><%= product.shipping.weight %> kg</span>
                      </div>
                    <% } %>
                    
                    <% if (product.shipping?.dimensions) { %>
                      <div class="detail-item">
                        <span class="label"><%= t('product.dimensions') %>:</span>
                        <span class="value">
                          <%= product.shipping.dimensions.length %>  
                          <%= product.shipping.dimensions.width %>  
                          <%= product.shipping.dimensions.height %> 
                          <%= product.shipping.dimensions.unit || t('common.cm') %>
                        </span>
                      </div>
                    <% } %>
                    
                    <% if (product.shipping?.leadTime) { %>
                      <div class="detail-item">
                        <span class="label"><%= t('product.leadTime') %>:</span>
                        <span class="value">
                          <%= product.shipping.leadTime.min %>
                          <% if (product.shipping.leadTime.max && product.shipping.leadTime.max !== product.shipping.leadTime.min) { %>
                            - <%= product.shipping.leadTime.max %>
                          <% } %>
                          <%= t('product.days') %>
                        </span>
                      </div>
                    <% } %>
                    
                    <% if (product.shipping?.packagingType) { %>
                      <div class="detail-item">
                        <span class="label"><%= t('product.packaging') %>:</span>
                        <span class="value"><%= product.shipping.packagingType %></span>
                      </div>
                    <% } %>
                  </div>
                </div>

                <!-- Payment Options -->
                <div class="payment-info">
                  <h3>
                    <i class="fas fa-credit-card"></i>
                    <%= t('product.paymentOptions') %>
                  </h3>
                  <div class="payment-methods">
                    <div class="payment-method">
                      <i class="fas fa-university"></i>
                      <span><%= t('payment.bankTransfer') %></span>
                    </div>
                    <div class="payment-method">
                      <i class="fas fa-credit-card"></i>
                      <span><%= t('payment.creditCard') %></span>
                    </div>
                    <div class="payment-method">
                      <i class="fas fa-handshake"></i>
                      <span><%= t('payment.tradeAssurance') %></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Reviews Tab -->
            <div class="tab-content" id="reviews-tab">
              <div class="reviews-section-detailed">
                <div class="reviews-header">
                  <h3><%= t('product.customerReviews') %></h3>
                  <button class="btn btn-primary write-review-btn" data-product-id="<%= product._id %>">
                    <i class="fas fa-edit"></i>
                    <%= t('product.writeReview') %>
                  </button>
                </div>
                
                <!-- Reviews Summary -->
                <div class="reviews-summary">
                  <div class="overall-rating">
                    <div class="rating-large">
                      <span class="rating-number"><%= (product.averageRating || 0).toFixed(1) %></span>
                      <div class="stars-large">
                        <% for (let i = 1; i <= 5; i++) { %>
                          <i class="fas fa-star <%= i <= Math.floor(product.averageRating || 0) ? 'filled' : '' %>"></i>
                        <% } %>
                      </div>
                      <span class="total-reviews"><%= product.totalReviews || 0 %> <%= t('product.reviews') %></span>
                    </div>
                  </div>
                  
                  <!-- Rating Breakdown -->
                  <div class="rating-breakdown">
                    <% for (let stars = 5; stars >= 1; stars--) { %>
                      <div class="rating-bar">
                        <span class="stars-label"><%= stars %> <i class="fas fa-star"></i></span>
                        <div class="progress-bar">
                          <div class="progress-fill" style="width: 0%"></div>
                        </div>
                        <span class="count">0</span>
                      </div>
                    <% } %>
                  </div>
                </div>
                
                <!-- Reviews List -->
                <div class="reviews-list">
                  <div class="no-reviews">
                    <i class="fas fa-star"></i>
                    <p><%= t('product.noReviewsYet') %></p>
                    <p><%= t('product.beFirstToReview') %></p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Company Profile Tab -->
            <% if (product.manufacturer) { %>
              <div class="tab-content" id="company-tab">
                <div class="company-profile-detailed">
                  <div class="company-header">
                    <div class="company-logo-large">
                      <% if (product.manufacturer.companyLogo && product.manufacturer.companyLogo.url) { %>
                        <img src="<%= product.manufacturer.companyLogo.url %>" alt="<%= product.manufacturer.companyName %>" onerror="this.parentElement.innerHTML='<div class=&quot;logo-placeholder-large&quot;><i class=&quot;fas fa-building&quot;></i></div>'">
                      <% } else { %>
                        <div class="logo-placeholder-large">
                          <i class="fas fa-building"></i>
                        </div>
                      <% } %>
                    </div>
                    
                    <div class="company-info-detailed">
                      <h3><%= product.manufacturer.companyName %></h3>
                      
                      <!-- Company Verification & Experience -->
                      <div class="company-verification-section">
                        <% if (product.manufacturer.isVerified || supplierVerification.level) { %>
                          <div class="verification-status">
                            <span class="verification-badge-large verified">
                              <i class="fas fa-shield-check"></i>
                              <%= supplierVerification.level ? supplierVerification.level.charAt(0).toUpperCase() + supplierVerification.level.slice(1) : t('productDetails.verified') %> <%= t('productDetails.supplier') %>
                            </span>
                          </div>
                        <% } %>
                        
                        <% if (product.manufacturer.establishedYear) { %>
                          <div class="experience-highlight">
                            <i class="fas fa-history"></i>
                            <span class="experience-text">
                              <strong><%= new Date().getFullYear() - product.manufacturer.establishedYear %> <%= t('productDetails.year') %></strong> of Experience
                            </span>
                            <span class="established-year">Established in <%= product.manufacturer.establishedYear %></span>
                          </div>
                        <% } %>
                      </div>
                      
                      <!-- Comprehensive Company Details -->
                      <div class="company-details">
                        <% if (product.manufacturer.country) { %>
                          <div class="detail-row">
                            <span class="label">
                              <i class="fas fa-map-marker-alt"></i>
                              <%= t('company.location') %>:
                            </span>
                            <span class="value">
                              <%= product.manufacturer.country %>
                              <% if (product.manufacturer.address) { %>
                                 <%= product.manufacturer.address %>
                              <% } %>
                            </span>
                          </div>
                        <% } %>
                        
                        <% if (product.manufacturer.businessLicense) { %>
                          <div class="detail-row">
                            <span class="label">
                              <i class="fas fa-certificate"></i>
                              <%- t('productDetails.businessLicense') %>:
                            </span>
                            <span class="value"><%= product.manufacturer.businessLicense %></span>
                          </div>
                        <% } %>
                        
                        <% if (product.manufacturer.employeeCount) { %>
                          <div class="detail-row">
                            <span class="label">
                              <i class="fas fa-users"></i>
                              <%= t('company.employees') %>:
                            </span>
                            <span class="value"><%= product.manufacturer.employeeCount %> <%- t('productDetails.employees') %></span>
                          </div>
                        <% } %>
                        
                        <% if (product.manufacturer.activityType) { %>
                          <div class="detail-row">
                            <span class="label">
                              <i class="fas fa-industry"></i>
                              <%- t('productDetails.industry') %>:
                            </span>
                            <span class="value"><%= product.manufacturer.activityType.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase()) %></span>
                          </div>
                        <% } %>
                      </div>
                      
                      <!-- Business Performance Stats -->
                      <div class="company-performance">
                        <h4><i class="fas fa-chart-line"></i> <%- t('productDetails.businessPerformance') %></h4>
                        <div class="performance-grid">
                          <div class="performance-item">
                            <span class="performance-label"><%- t('productDetails.totalProducts') %></span>
                            <span class="performance-value"><%= (product.manufacturer.totalProducts || 0).toLocaleString() %></span>
                          </div>
                          <div class="performance-item">
                            <span class="performance-label"><%- t('productDetails.totalOrders') %></span>
                            <span class="performance-value"><%= (product.manufacturer.totalOrders || 0).toLocaleString() %></span>
                          </div>
                          <% if (product.manufacturer.stats && product.manufacturer.stats.totalViews) { %>
                            <div class="performance-item">
                              <span class="performance-label"><%- t('productDetails.profileViews') %></span>
                              <span class="performance-value"><%= product.manufacturer.stats.totalViews.toLocaleString() %></span>
                            </div>
                          <% } %>
                          <div class="performance-item">
                            <span class="performance-label"><%- t('productDetails.averageRating') %></span>
                            <div class="rating-display">
                              <% 
                                const manufacturerRating = product.manufacturer.averageRating || 0;
                                const manufacturerFullStars = Math.floor(manufacturerRating);
                                const manufacturerHasHalfStar = (manufacturerRating % 1) >= 0.5;
                              %>
                              <div class="stars-container">
                                <% for (let i = 1; i <= 5; i++) { %>
                                  <% if (i <= manufacturerFullStars) { %>
                                    <i class="fas fa-star star-filled"></i>
                                  <% } else if (i === manufacturerFullStars + 1 && manufacturerHasHalfStar) { %>
                                    <i class="fas fa-star-half-alt star-half"></i>
                                  <% } else { %>
                                    <i class="far fa-star star-empty"></i>
                                  <% } %>
                                <% } %>
                              </div>
                              <span class="rating-score">(<%= manufacturerRating.toFixed(1) %>)</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <% if (product.manufacturer.description) { %>
                    <div class="company-description">
                      <h4><%= t('company.aboutCompany') %></h4>
                      <p><%= product.manufacturer.description %></p>
                    </div>
                  <% } %>
                  
                  <!-- Contact Information -->
                  <div class="company-contact">
                    <h4><%= t('company.contactInformation') %></h4>
                    <div class="contact-details">
                      <% if (product.manufacturer.email) { %>
                        <div class="contact-item">
                          <i class="fas fa-envelope"></i>
                          <a href="mailto:<%= product.manufacturer.email %>"><%= product.manufacturer.email %></a>
                        </div>
                      <% } %>
                      
                      <% if (product.manufacturer.phone) { %>
                        <div class="contact-item">
                          <i class="fas fa-phone"></i>
                          <a href="tel:<%= product.manufacturer.phone %>"><%= product.manufacturer.phone %></a>
                        </div>
                      <% } %>
                      
                      <% if (product.manufacturer.website) { %>
                        <div class="contact-item">
                          <i class="fas fa-globe"></i>
                          <a href="<%= product.manufacturer.website %>" target="_blank"><%= product.manufacturer.website %></a>
                        </div>
                      <% } %>
                    </div>
                  </div>
                </div>
              </div>
            <% } %>
          </div>
        </div>
      </div>
    </section>

  <% } %>
</main>

<!-- Professional Modals -->

<!-- Inquiry Modal -->
<div class="modal-overlay" id="inquiryModal">
  <div class="modal-container professional-modal">
    <div class="modal-header">
      <h3 class="modal-title">
        <i class="fas fa-envelope"></i>
        <%= t('modal.sendInquiry') %>
      </h3>
      <button class="modal-close" data-modal="inquiryModal">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="modal-body">
      <form id="inquiryForm" class="professional-form">
        <div class="form-group">
          <label class="form-label"><%= t('form.yourName') %> *</label>
          <input type="text" class="form-input" name="name" required>
        </div>
        
        <div class="form-group">
          <label class="form-label"><%= t('form.companyName') %> *</label>
          <input type="text" class="form-input" name="company" required>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label"><%= t('form.email') %> *</label>
            <input type="email" class="form-input" name="email" required>
          </div>
          <div class="form-group">
            <label class="form-label"><%= t('form.phone') %></label>
            <input type="tel" class="form-input" name="phone">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label"><%= t('form.quantity') %> *</label>
            <input type="number" class="form-input" name="quantity" min="1" required>
          </div>
          <div class="form-group">
            <label class="form-label"><%= t('form.unit') %></label>
            <select class="form-select" name="unit">
              <option value="pieces"><%= t('units.pieces') %></option>
              <option value="kg"><%= t('units.kg') %></option>
              <option value="tons"><%= t('units.tons') %></option>
              <option value="liters"><%= t('units.liters') %></option>
              <option value="meters"><%= t('units.meters') %></option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label"><%= t('form.message') %> *</label>
          <textarea class="form-textarea" name="message" rows="4" 
                    placeholder="<%= t('form.inquiryPlaceholder') %>" required></textarea>
        </div>
        
        <input type="hidden" name="productId" value="<%= product ? product._id : '' %>">
        <input type="hidden" name="supplierId" value="<%= product && product.manufacturer ? product.manufacturer._id : '' %>">
      </form>
    </div>
    
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-modal="inquiryModal">
        <%= t('buttons.cancel') %>
      </button>
      <button type="submit" form="inquiryForm" class="btn btn-primary">
        <i class="fas fa-paper-plane"></i>
        <%= t('buttons.sendInquiry') %>
      </button>
    </div>
  </div>
</div>

<!-- Professional Success/Error Messages -->
<div class="toast-container" id="toastContainer"></div>

<!-- Professional JavaScript -->
<script src="/assets/js/product-detail-professional.js"></script>



<!-- Professional Add to Cart & Favorites Logic -->
<script>
// Inject translations for client-side JavaScript
window.translations = {
    productDetails: {
        addToFavorites: '<%= t("productDetails.addToFavorites") %>',
        removeFromFavorites: '<%= t("productDetails.removeFromFavorites") %>',
        loginRequired: '<%= t("auth.loginRequired") || "Login required" %>',
        buyerOnly: '<%= t("auth.buyerOnly") || "Only buyers can perform this action" %>',
        addedToFavorites: '<%= t("productDetails.addedToFavorites") || "Added to favorites" %>',
        removedFromFavorites: '<%= t("productDetails.removedFromFavorites") || "Removed from favorites" %>',
        addedToCart: '<%= t("productDetails.addedToCart") || "Added to cart successfully" %>',
        failedToAddCart: '<%= t("productDetails.failedToAddCart") || "Failed to add to cart" %>',
        failedToUpdateFavorites: '<%= t("productDetails.failedToUpdateFavorites") || "Failed to update favorites" %>',
        addToCart: '<%= t("productDetails.addToCart") || "Add to Cart" %>',
        inCart: '<%= t("productDetails.inCart") || "In Cart" %>',
        alreadyInCart: '<%= t("productDetails.alreadyInCart") || "This product is already in your cart" %>',
        quantity: '<%= t("productDetails.quantity") || "quantity" %>',
        inquiry: '<%= t("productDetails.inquiry") || "Inquiry" %>',
        chat: '<%= t("productDetails.chat") || "Chat" %>',
        sample: '<%= t("productDetails.sample") || "Sample" %>'
    }
};

// Inject server-side product status for authenticated distributors
window.serverProductStatus = null;

class ProductDetailManager {
    constructor() {
        this.currentUser = null;
        this.isAuthenticated = false;
        this.userType = null;
        this.companyType = null;
        this.productData = {
            id: null,
            manufacturerId: null,
            unitPrice: 0,
            currency: (window.translations?.common?.usd || 'USD'),
            minQty: 1,
            maxQty: 999,
            stock: 0
        };
        
        this.init();
    }

    async init() {
        try {
            // Initialize product data
            this.initProductData();
            
            // Initialize UI with authentication check
            await this.initializeUI();
            
            // Bind events
            this.bindEvents();
            

        } catch (error) {
           
        }
      }

    initProductData() {
        const quantityInput = document.getElementById('productQuantity');
        if (quantityInput) {
            this.productData = {
                id: quantityInput.dataset.productId,
                manufacturerId: quantityInput.dataset.manufacturerId,
                unitPrice: parseFloat(quantityInput.dataset.unitPrice) || 0,
                currency: quantityInput.dataset.currency || (window.translations?.common?.usd || 'USD'),
                minQty: parseInt(quantityInput.dataset.minQty) || 1,
                maxQty: parseInt(quantityInput.dataset.maxQty) || 999,
                stock: parseInt(quantityInput.dataset.stock) || 0
            };
        }
    }

    async checkAuthStatus() {
        try {
            // Check if user has tokens (cookies)
            const refreshToken = this.getCookie('refreshToken');
            const accessToken = this.getCookie('accessToken');
            const hasTokens = !!(refreshToken && accessToken);
            
            if (!hasTokens) {
                // No tokens = not logged in
                this.isAuthenticated = false;
                this.currentUser = null;
                this.userType = null;
                this.companyType = null;
               
                return;
            }
            
            // User has tokens = logged in
            this.isAuthenticated = true;
            
            // Check localStorage for distributor data
            const userData = localStorage.getItem('slex_buyer_user_data');
            
            if (userData) {
                try {
                    const parsedData = JSON.parse(userData);
                   
                    // If localStorage exists, set userType and companyType properly
                    if (parsedData.companyType || parsedData.userType) {
                        this.currentUser = parsedData;
                        this.userType = parsedData.userType || 'user';
                        this.companyType = parsedData.companyType || null;
                        return;
                    }
                } catch (e) {
                   
                }
            }
            
            // Has tokens but no localStorage = likely manufacturer or admin
            // Try to get user info from API to determine exact type
            try {
                const apiEndpoints = [
                    '/api/user/profile',
                    '/buyer/api/profile', 
                    '/api/profile'
                ];
                
                for (const endpoint of apiEndpoints) {
                    try {
                        const response = await fetch(endpoint, {
                            credentials: 'include',
                            headers: { 'X-Requested-With': 'XMLHttpRequest' }
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            
                            // Handle different response structures
                            let user = null;
                            if (data.success && data.user) {
                                user = data.user;
                            } else if (data.success && data.data) {
                                user = data.data;
                            } else if (data.user) {
                                user = data.user;
                            } else if (data.id) {
                                user = data; // Direct user object
                            }
                            
                            if (user) {
                                this.currentUser = user;
                                
                                // Set userType from actual userType field and companyType separately  
                                this.userType = user.userType || 'user'; // user, admin, etc.
                                this.companyType = user.companyType || null; // distributor, manufacturer, etc.
                                
                                // For legacy compatibility, also check role-based logic
                                if (user.role === 'super_admin' || user.role === 'admin') {
                                    this.userType = 'admin';
                                }
                                
                                // Update localStorage only for distributors
                                if (this.companyType === 'distributor') {
                                    try {
                                        localStorage.setItem('slex_buyer_user_data', JSON.stringify(user));
                                       
                                    } catch (storageError) {
                                       
                                    }
                                }
                                
                                return;
                            }
                            break; // Found working endpoint
                        }
                    } catch (endpointError) {
                       
                        continue; // Try next endpoint
                    }
                }
                
                // API failed but user has tokens - assume manufacturer/admin
                this.userType = 'manufacturer';
                 
            } catch (apiError) {
               // Fallback: has tokens but unknown type - assume manufacturer/admin
                this.userType = 'manufacturer';
                this.companyType = 'manufacturer';
            }
            
        } catch (error) {
            this.isAuthenticated = false;
            this.currentUser = null;
            this.userType = null;
            this.companyType = null;
        }
    }
    
    getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
    }

    async initializeUI() {
        await this.checkAuthStatus();
        
        // Only disable buttons for non-buyer companies
        if (this.isAuthenticated && this.userType === 'user' && this.companyType !== 'distributor') {
            this.disableButtons();
        } else {
            this.enableButtons();
        }
        
        // Check product status via API for distributor companies  
        if (this.isAuthenticated && this.userType === 'user' && this.companyType === 'distributor') {
            await this.checkProductStatus();
        }
    }

    enableButtons() {
        const addToCartBtn = document.getElementById('addToCartBtn');
        const favoriteBtn = document.getElementById('favoriteBtn');
        
        if (addToCartBtn) {
            addToCartBtn.disabled = false;
            addToCartBtn.classList.remove('disabled');
            addToCartBtn.style.opacity = '1';
            addToCartBtn.style.cursor = 'pointer';
            addToCartBtn.removeAttribute('title');
            
            // Ensure icon and text are visible
            const icon = addToCartBtn.querySelector('i:not(.fa-spinner)');
            const text = addToCartBtn.querySelector('.btn-text');
            if (icon) icon.style.display = 'inline-block';
            if (text) text.style.display = 'inline-block';
        }
        if (favoriteBtn) {
            favoriteBtn.disabled = false;
            favoriteBtn.classList.remove('disabled');
            favoriteBtn.style.opacity = '1';
            favoriteBtn.style.cursor = 'pointer';
            favoriteBtn.removeAttribute('title');
            
            // Ensure icon and text are visible
            const icon = favoriteBtn.querySelector('i:not(.fa-spinner)');
            const text = favoriteBtn.querySelector('.btn-text');
            if (icon) icon.style.display = 'inline-block';
            if (text) text.style.display = 'inline-block';
        }
    }
    
    disableButtons() {
        const addToCartBtn = document.getElementById('addToCartBtn');
        const favoriteBtn = document.getElementById('favoriteBtn');
        
        const userTypeText = this.userType === 'manufacturer' ? 'manufacturer' : 'admin';
        
        if (addToCartBtn) {
            addToCartBtn.disabled = true;
            addToCartBtn.classList.add('disabled');
            addToCartBtn.style.opacity = '0.5';
            addToCartBtn.style.cursor = 'not-allowed';
            addToCartBtn.title = `This action is not available for ${userTypeText} accounts`;
            
            // Keep icon and text visible but disabled
            const icon = addToCartBtn.querySelector('i:not(.fa-spinner)');
            const text = addToCartBtn.querySelector('.btn-text');
            if (icon) icon.style.display = 'inline-block';
            if (text) text.style.display = 'inline-block';
        }
        if (favoriteBtn) {
            favoriteBtn.disabled = true;
            favoriteBtn.classList.add('disabled');
            favoriteBtn.style.opacity = '0.5';
            favoriteBtn.style.cursor = 'not-allowed';
            favoriteBtn.title = `This action is not available for ${userTypeText} accounts`;
            
            // Keep icon and text visible but disabled
            const icon = favoriteBtn.querySelector('i:not(.fa-spinner)');
            const text = favoriteBtn.querySelector('.btn-text');
            if (icon) icon.style.display = 'inline-block';
            if (text) text.style.display = 'inline-block';
        }
    }

    bindEvents() {
        // Quantity controls
        const decreaseBtn = document.getElementById('decreaseQty');
        const increaseBtn = document.getElementById('increaseQty');
        const quantityInput = document.getElementById('productQuantity');

        if (decreaseBtn) {
            decreaseBtn.addEventListener('click', () => this.decreaseQuantity());
        }
        if (increaseBtn) {
            increaseBtn.addEventListener('click', () => this.increaseQuantity());
        }
        if (quantityInput) {
            quantityInput.addEventListener('change', () => this.validateQuantity());
            quantityInput.addEventListener('input', () => this.updateTotalPrice());
        }

        // Action buttons
        const addToCartBtn = document.getElementById('addToCartBtn');
        const favoriteBtn = document.getElementById('favoriteBtn');

        if (addToCartBtn) {
            addToCartBtn.addEventListener('click', () => this.addToCart());
        }
        if (favoriteBtn) {
            favoriteBtn.addEventListener('click', (event) => this.toggleFavorite(event));
        }

        // Image favorite button
        const imageFavoriteBtn = document.getElementById('imageFavoriteBtn');
        if (imageFavoriteBtn) {
            imageFavoriteBtn.addEventListener('click', (event) => this.toggleFavorite(event));
        }

        // Chat button - handled by onclick attribute to avoid conflicts
        // Removing event listener to prevent double handling
        console.log(' Chat button will be handled by onclick attribute');
    }

    decreaseQuantity() {
        const quantityInput = document.getElementById('productQuantity');
        if (quantityInput) {
            const currentQty = parseInt(quantityInput.value) || this.productData.minQty;
            const newQty = Math.max(currentQty - 1, this.productData.minQty);
            quantityInput.value = newQty;
            this.validateQuantity();
        }
    }

    increaseQuantity() {
        const quantityInput = document.getElementById('productQuantity');
        if (quantityInput) {
            const currentQty = parseInt(quantityInput.value) || this.productData.minQty;
            const maxAllowed = Math.min(this.productData.maxQty, this.productData.stock);
            const newQty = Math.min(currentQty + 1, maxAllowed);
            quantityInput.value = newQty;
            this.validateQuantity();
        }
    }

    validateQuantity() {
        const quantityInput = document.getElementById('productQuantity');
        if (!quantityInput) return;

        const qty = parseInt(quantityInput.value) || this.productData.minQty;
        const maxAllowed = Math.min(this.productData.maxQty, this.productData.stock);

        if (qty < this.productData.minQty) {
            quantityInput.value = this.productData.minQty;
            this.showToast(`Minimum quantity is ${this.productData.minQty}`, 'warning');
        } else if (qty > maxAllowed) {
            quantityInput.value = maxAllowed;
            this.showToast(`Maximum available quantity is ${maxAllowed}`, 'warning');
        }

        // Update total price
        this.updateTotalPrice();
    }

    updateTotalPrice() {
        const quantityInput = document.getElementById('productQuantity');
        const totalPriceElement = document.getElementById('totalPrice');
        
        if (quantityInput && totalPriceElement) {
            const quantity = parseInt(quantityInput.value) || this.productData.minQty;
            const totalPrice = (this.productData.unitPrice * quantity).toFixed(2);
            totalPriceElement.textContent = `$${totalPrice}`;
        }
    }

    async addToCart() {
        // Re-check authentication on click
        await this.checkAuthStatus();
        
        if (!this.isAuthenticated) {
            this.showToast(` ${window.translations.productDetails.loginRequired}`, 'warning');
            return;
        }

        if (this.userType !== 'user' || this.companyType !== 'distributor') {
            let message = '';
            if (this.companyType === 'manufacturer') {
                message = 'Manufacturers cannot add products to cart';
            } else if (this.userType === 'admin') {
                message = 'Admins cannot add products to cart';
            } else {
                message = window.translations.productDetails.buyerOnly;
            }
            this.showToast(` ${message}`, 'warning');
            return;
        }

        // Check if already in cart
        const addToCartBtn = document.getElementById('addToCartBtn');
        if (addToCartBtn && addToCartBtn.getAttribute('data-in-cart') === 'true') {
            this.showToast(' Product is already in your cart', 'info');
            return;
        }
        const quantityInput = document.getElementById('productQuantity');
        
        if (!quantityInput) {
            this.showToast('Quantity input not found', 'error');
            return;
        }

        const quantity = parseInt(quantityInput.value) || this.productData.minQty;

        try {
            // Show loading state
            this.setButtonLoading(addToCartBtn, true);

            const response = await this.fetchWithAuth('/buyer/api/cart/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    productId: this.productData.id,
                    manufacturerId: this.productData.manufacturerId,
                    quantity: quantity,
                    unitPrice: this.productData.unitPrice,
                    selectedSpecs: {},
                    notes: ''
                })
            });

            const data = await response.json();

            if (data.success) {
                this.showToast(` ${window.translations.productDetails.addedToCart}`, 'success');
                this.updateCartCounter();
                
                // Refresh product status from server to ensure consistency
                await this.checkProductStatus();
            } else {
                this.showToast(data.message || window.translations.productDetails.failedToAddCart, 'error');
            }

        } catch (error) {
           
            if (error.message.includes('Authentication failed')) {
                this.showToast(` ${window.translations.auth.pleaseLoginAgain || 'Please login again to continue'}`, 'warning');
                setTimeout(() => {
                    window.location.href = '/login';
                }, 2000);
            } else {
                this.showToast('Failed to add product to cart', 'error');
            }
        } finally {
            this.setButtonLoading(addToCartBtn, false);
        }
    }

    async toggleFavorite(event) {
        // Re-check authentication on click
        await this.checkAuthStatus();
        
        if (!this.isAuthenticated) {
            this.showToast(` ${window.translations.productDetails.loginRequired}`, 'warning');
            return;
        }

        if (this.userType !== 'user' || this.companyType !== 'distributor') {
            let message = '';
            if (this.companyType === 'manufacturer') {
                message = 'Manufacturers cannot add favorites';
            } else if (this.userType === 'admin') {
                message = 'Admins cannot add favorites';
            } else {
                message = window.translations.productDetails.buyerOnly;
            }
            this.showToast(` ${message}`, 'warning');
            return;
        }

        // Determine which button was clicked
        const clickedButton = event ? event.currentTarget : document.getElementById('favoriteBtn');
        const isImageButton = clickedButton.id === 'imageFavoriteBtn';
        
        // Check current favorite state from the clicked button
        const isCurrentlyFavorite = clickedButton.getAttribute('data-favorited') === 'true';

        try {
            // Set loading state for the clicked button
            this.setButtonLoading(clickedButton, true);

            const url = isCurrentlyFavorite ? 
                '/buyer/api/remove-from-favorites' :
                '/buyer/api/add-to-favorites';

            const response = await this.fetchWithAuth(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    productId: this.productData.id
                })
            });

            const data = await response.json();

            if (data.success) {
                // Show success message
                if (isCurrentlyFavorite) {
                    this.showToast(` ${window.translations.productDetails.removedFromFavorites}`, 'success');
                } else {
                    this.showToast(` ${window.translations.productDetails.addedToFavorites}`, 'success');
                }
                
                // Refresh product status from server to ensure consistency
                await this.checkProductStatus();
            } else {
                this.showToast(data.message || window.translations.productDetails.failedToUpdateFavorites, 'error');
            }

        } catch (error) {
           
            if (error.message.includes('Authentication failed')) {
                this.showToast(` ${window.translations.productDetails.pleaseLoginAgain || 'Please login again to continue'}`, 'warning');
                setTimeout(() => {
                    window.location.href = '/login';
                }, 2000);
            } else {
                this.showToast('Failed to update favorites', 'error');
            }
        } finally {
            // Remove loading state from the clicked button
            this.setButtonLoading(clickedButton, false);
        }
    }

    async checkProductStatus() {
        console.log(' CheckProductStatus called:', {
            isAuthenticated: this.isAuthenticated,
            userType: this.userType,
            companyType: this.companyType,
            currentUser: this.currentUser
        });
        
        // Allow both distributor and buyers (since distributor routes moved to buyer)
        if (!this.isAuthenticated || (this.companyType !== 'distributor' && this.userType !== 'user')) {
            console.log(' CheckProductStatus skipped - not authenticated or wrong user type');
            return;
        }

        try {
            const response = await this.fetchWithAuth(`/buyer/api/product-status/${this.productData.id}`);
            const data = await response.json();
            
           

            if (data.success) {
                // Update favorite button
                this.updateFavoriteButton(data.data.isFavorite);
                
                // Update add to cart button
                this.updateAddToCartButton(data.data.isInCart, data.data.cartQuantity);
            }
        } catch (error) {
           
        }
    }

    // Helper function to decode HTML entities
    decodeHtmlEntities(text) {
        const textarea = document.createElement('textarea');
        textarea.innerHTML = text;
        return textarea.value;
    }

    updateFavoriteButton(isFavorite) {
        // Update main favorite button
        const favoriteBtn = document.getElementById('favoriteBtn');
        if (favoriteBtn) {
            const icon = favoriteBtn.querySelector('i:not(.fa-spinner)');
            const text = favoriteBtn.querySelector('.btn-text');

            if (isFavorite) {
                if (icon) icon.className = 'fas fa-heart';
                if (text) text.textContent = this.decodeHtmlEntities(window.translations?.productDetails?.removeFromFavorites || 'Remove from Favorites');
                favoriteBtn.setAttribute('data-favorited', 'true');
            } else {
                if (icon) icon.className = 'far fa-heart';
                if (text) text.textContent = this.decodeHtmlEntities(window.translations?.productDetails?.addToFavorites || 'Add to Favorites');
                favoriteBtn.setAttribute('data-favorited', 'false');
            }
        }

        // Update image favorite button
        const imageFavoriteBtn = document.getElementById('imageFavoriteBtn');
        if (imageFavoriteBtn) {
            const icon = imageFavoriteBtn.querySelector('i');
            if (icon) {
                icon.className = isFavorite ? 'fas fa-heart' : 'far fa-heart';
            }
            imageFavoriteBtn.setAttribute('data-favorited', isFavorite.toString());
        }
    }

    updateAddToCartButton(isInCart, cartQuantity) {
        const addToCartBtn = document.getElementById('addToCartBtn');
        if (!addToCartBtn) return;

        const text = addToCartBtn.querySelector('.btn-text');
        
        if (isInCart) {
            // Product already in cart - show quantity and disable
            const inCartText = this.decodeHtmlEntities(window.translations?.productDetails?.inCart || window.translations?.common?.inCart || 'In Cart');
            if (text) text.textContent = `${inCartText} (${cartQuantity})`;
            addToCartBtn.disabled = true;
            addToCartBtn.style.opacity = '0.7';
            addToCartBtn.style.cursor = 'not-allowed';
            const titleText = this.decodeHtmlEntities(window.translations?.productDetails?.alreadyInCart || 'This product is already in your cart');
            addToCartBtn.title = `${titleText} (${window.translations?.productDetails?.quantity || 'quantity'}: ${cartQuantity})`;
            addToCartBtn.setAttribute('data-in-cart', 'true');
        } else {
            // Product not in cart - normal state
            if (text) text.textContent = this.decodeHtmlEntities(window.translations?.productDetails?.addToCart || 'Add to Cart');
            addToCartBtn.disabled = false;
            addToCartBtn.style.opacity = '1';
            addToCartBtn.style.cursor = 'pointer';
            addToCartBtn.removeAttribute('title');
            addToCartBtn.setAttribute('data-in-cart', 'false');
        }
    }

    setButtonLoading(button, loading) {
        if (!button) return;

        // Correct selectors based on actual HTML structure  
        const icon = button.querySelector('i:not(.fa-spinner)'); // Direct icon child (not loading spinner)
        const text = button.querySelector('.btn-text');
        const loadingSpinner = button.querySelector('.btn-loading');

        if (loading) {
            button.disabled = true;
            if (icon) icon.style.display = 'none';
            if (text) text.style.display = 'none';
            if (loadingSpinner) loadingSpinner.style.display = 'inline-block';
        } else {
            button.disabled = false;
            if (icon) icon.style.display = 'inline-block';
            if (text) text.style.display = 'inline-block';
            if (loadingSpinner) loadingSpinner.style.display = 'none';
        }
    }

    async fetchWithAuth(url, options = {}) {
        // Ensure we have fresh tokens
        if (window.buyerTokenManager) {
            const status = window.buyerTokenManager.getStatus();
            if (status.isExpired) {
                const refreshed = await window.buyerTokenManager.refreshToken();
                if (!refreshed) {
                    throw new Error(window.translations.auth.authenticationFailed || 'Authentication failed');
                }
            }
        }

        const defaultOptions = {
            credentials: 'include',
            headers: {
                'Content-Type': 'application/json',
                'X-Requested-With': 'XMLHttpRequest',
                ...options.headers
            }
        };

        const fetchOptions = { ...defaultOptions, ...options };

        try {
            const response = await fetch(url, fetchOptions);
            
            if (response.status === 401 && window.buyerTokenManager) {
                const refreshed = await window.buyerTokenManager.refreshToken();
                if (refreshed) {
                    return await fetch(url, fetchOptions);
                } else {
                    throw new Error(window.translations.auth.authenticationFailed || 'Authentication failed');
                }
            }

            return response;
        } catch (error) {

            throw error;
        }
    }

    updateCartCounter() {
        // Update cart counter in navigation if exists
        const cartCounter = document.querySelector('.cart-counter, .cart-badge');
        if (cartCounter) {
            const currentCount = parseInt(cartCounter.textContent) || 0;
            cartCounter.textContent = currentCount + 1;
        }
    }

    showToast(message, type = 'info') {
        // Create toast notification
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.style.cssText = `
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            background: white !important;
            border-radius: 12px !important;
            padding: 16px 20px !important;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
            border-left: 4px solid ${type === 'warning' ? '#f59e0b' : type === 'error' ? '#ef4444' : type === 'success' ? '#22c55e' : '#3b82f6'} !important;
            z-index: 9999 !important;
            display: flex !important;
            align-items: center !important;
            gap: 12px !important;
            min-width: 300px !important;
            max-width: 500px !important;
            font-family: inherit !important;
            animation: slideInRight 0.3s ease-out !important;
        `;
        
        toast.innerHTML = `
            <div class="toast-content" style="display: flex; align-items: center; gap: 8px; flex: 1; font-weight: 500; color: #374151;">
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}" style="color: ${type === 'warning' ? '#f59e0b' : type === 'error' ? '#ef4444' : type === 'success' ? '#22c55e' : '#3b82f6'};"></i>
                <span>${message}</span>
            </div>
            <button class="toast-close" style="background: none; border: none; color: #9ca3af; cursor: pointer; padding: 4px; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: all 0.2s ease;">
                <i class="fas fa-times"></i>
            </button>
        `;

        const container = document.getElementById('toastContainer') || document.body;
        container.appendChild(toast);

        // Auto remove after 5 seconds
        setTimeout(() => {
            if (toast.parentNode) {
                toast.remove();
            }
        }, 5000);

        // Close button
        const closeBtn = toast.querySelector('.toast-close');
        if (closeBtn) {
            closeBtn.addEventListener('click', () => toast.remove());
        }
    }

    // Open chat with manufacturer
    openChat() {
        console.log(' ProductDetailManager openChat called!');
        console.log('Opening chat, current user:', window.currentUser);
        console.log('Product data:', this.productData);
        
        // Check if user is authenticated using server data
        if (!window.currentUser) {
            console.log('User not authenticated');
            this.showToast(' Chat uchun tizimga kiring', 'warning');
            setTimeout(() => {
                window.location.href = '/login';
            }, 2000);
            return;
        }

        // Check if user is distributor/buyer (correct logic for SLEX system)
        console.log(' Chat authentication check:', {
            windowCurrentUser: window.currentUser,
            productDetailManagerUser: this.currentUser,
            userType: window.currentUser?.userType,
            role: window.currentUser?.role,
            companyType: window.currentUser?.companyType
        });
        
        const isBuyer = window.currentUser && 
                        window.currentUser.role === 'company_admin' && 
                        (window.currentUser.companyType === 'distributor' || window.currentUser.companyType === 'buyer');
        
        console.log(' isBuyer result:', isBuyer);
        
        if (!isBuyer) {
            let message = '';
            if (window.currentUser?.companyType === 'manufacturer') {
                message = 'Ishlab chiqaruvchilar chat qila olmaydi';
            } else if (window.currentUser?.role === 'admin' || window.currentUser?.role === 'super_admin') {
                message = 'Adminlar chat qila olmaydi';
            } else {
                message = 'Faqat distribyutor/haridor kompanyalar chat qila oladi';
            }
            console.log(' User not allowed for chat:', window.currentUser);
            this.showToast(` ${message}`, 'warning');
            return;
        }

        // Get manufacturer ID from chat button or product data
        const chatBtn = document.querySelector('.chat-btn');
        const manufacturerId = chatBtn?.dataset.manufacturerId || this.productData.manufacturerId;
        console.log(' Found manufacturer ID:', manufacturerId);
        
        if (!manufacturerId) {
            console.log(' Manufacturer ID not found');
            this.showToast(' Ishlab chiqaruvchi ma\'lumotlari topilmadi', 'error');
            return;
        }

        const redirectUrl = `/buyer/messages?manufacturer=${manufacturerId}`;
        console.log(' Redirecting to:', redirectUrl);
        
        // Redirect to messages page with manufacturer parameter
        window.location.href = redirectUrl;
    }
}

// Inject user data from server for chat functionality
window.currentUser = JSON.parse('<%-JSON.stringify(user || null)%>');

// Global openChat function to ensure compatibility
window.openChat = function(manufacturerId) {
    console.log(' Global openChat called with:', manufacturerId);
    
    if (window.productDetailManager && window.productDetailManager.openChat) {
        window.productDetailManager.openChat();
    } else {
        console.log(' ProductDetailManager not found, creating direct redirect');
        
        // Check if user is distributor/buyer (correct SLEX logic)
        console.log(' Global openChat authentication check:', {
            windowCurrentUser: window.currentUser,
            userType: window.currentUser?.userType,
            role: window.currentUser?.role,
            companyType: window.currentUser?.companyType
        });
        
        const isBuyer = window.currentUser && 
                        window.currentUser.role === 'company_admin' && 
                        (window.currentUser.companyType === 'distributor' || window.currentUser.companyType === 'buyer');
        
        console.log(' Global isBuyer result:', isBuyer);
        
        if (isBuyer) {
            const redirectUrl = `/buyer/messages?manufacturer=${manufacturerId}`;
            console.log(' Direct redirect to:', redirectUrl);
            window.location.href = redirectUrl;
        } else {
            console.log(' Global openChat - User not allowed:', window.currentUser);
            alert('Chat uchun distribyutor/haridor kompaniya sifatida tizimga kiring');
        }
    }
};

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    window.productDetailManager = new ProductDetailManager();
    console.log(' ProductDetailManager initialized');
});
</script>

<!-- Professional Alibaba-Style CTA CSS -->
<style>
/* Toast Animation */
@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Professional Product Info Grid */
.product-header {
    margin-bottom: 24px;
}

.product-title {
    font-size: 28px;
    font-weight: 700;
    color: #111827;
    margin-bottom: 12px;
    line-height: 1.3;
}

.rating-reviews-inline {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

.stars-container {
    display: flex;
    gap: 2px;
}

.star-filled {
    color: #f59e0b;
}

.star-half {
    color: #f59e0b;
}

.star-empty {
    color: #d1d5db;
}

.rating-score {
    font-weight: 600;
    color: #111827;
    font-size: 16px;
}

.rating-count {
    color: #6b7280;
    font-size: 14px;
}

.product-short-description {
    color: #6b7280;
    font-size: 16px;
    line-height: 1.6;
    margin: 0;
}

/* Main Product Info Grid */
.product-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
}

.info-grid-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.info-grid-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    border-color: #3b82f6;
}

.card-header {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    padding: 16px 20px;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    color: #374151;
}

.card-header i {
    font-size: 16px;
    color: #6366f1;
}

.card-content {
    padding: 20px;
}

/* Pricing Card Specific */
.pricing-card .card-header {
    background: linear-gradient(135deg, #fef3c7 0%, #fcd34d 100%);
}

.pricing-card .card-header i {
    color: #d97706;
}

.main-price {
    display: flex;
    align-items: baseline;
    gap: 8px;
    margin-bottom: 12px;
}

.price-amount {
    font-size: 28px;
    font-weight: 700;
    color: #dc2626;
}

.price-unit {
    font-size: 14px;
    color: #6b7280;
}

.moq-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: #f9fafb;
    border-radius: 8px;
    margin-bottom: 12px;
}

.moq-label {
    font-weight: 500;
    color: #6b7280;
    font-size: 14px;
}

.moq-value {
    font-weight: 600;
    color: #111827;
    font-size: 14px;
}

.price-negotiable {
    display: flex;
    align-items: center;
    gap: 6px;
    color: #059669;
    font-weight: 500;
    font-size: 14px;
}

/* Stock Card Specific */
.stock-card .card-header {
    background: linear-gradient(135deg, #ecfdf5 0%, #a7f3d0 100%);
}

.stock-card .card-header i {
    color: #059669;
}

.stock-status {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    font-size: 16px;
    margin-bottom: 8px;
}

.stock-status i {
    font-size: 8px;
}

.stock-status.in-stock {
    color: #059669;
}

.stock-status.low-stock {
    color: #d97706;
}

.stock-status.out-of-stock {
    color: #dc2626;
}

.stock-quantity {
    color: #6b7280;
    font-size: 14px;
    font-weight: 500;
}

/* Shipping Card Specific */
.shipping-card .card-header {
    background: linear-gradient(135deg, #eff6ff 0%, #bfdbfe 100%);
}

.shipping-card .card-header i {
    color: #2563eb;
}

.delivery-time {
    font-size: 20px;
    font-weight: 600;
    color: #111827;
    margin-bottom: 8px;
}

.shipping-detail {
    color: #6b7280;
    font-size: 14px;
}

/* Category Card Specific */
.category-card .card-header {
    background: linear-gradient(135deg, #f3e8ff 0%, #c4b5fd 100%);
}

.category-card .card-header i {
    color: #8b5cf6;
}

.category-name {
    font-weight: 600;
    color: #111827;
    font-size: 16px;
}

/* Analytics Card Specific */
.analytics-card .card-header {
    background: linear-gradient(135deg, #f0fdf4 0%, #bbf7d0 100%);
}

.analytics-card .card-header i {
    color: #16a34a;
}

.analytics-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.analytics-item {
    text-align: center;
    padding: 12px;
    background: #f9fafb;
    border-radius: 8px;
}

.analytics-value {
    display: block;
    font-size: 20px;
    font-weight: 700;
    color: #111827;
    margin-bottom: 4px;
}

.analytics-label {
    font-size: 12px;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Metrics Card Specific */
.metrics-card .card-header {
    background: linear-gradient(135deg, #fef7cd 0%, #fde68a 100%);
}

.metrics-card .card-header i {
    color: #d97706;
}

.metric-item {
    text-align: center;
    padding: 12px;
    background: #fffbeb;
    border-radius: 8px;
    margin-bottom: 12px;
}

.metric-item:last-child {
    margin-bottom: 0;
}

.metric-value {
    display: block;
    font-size: 18px;
    font-weight: 700;
    color: #92400e;
    margin-bottom: 4px;
}

.metric-label {
    font-size: 12px;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Bulk Pricing Section */
.bulk-pricing-section {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    border: 1px solid #e5e7eb;
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 32px;
}

.section-title {
    font-size: 18px;
    font-weight: 600;
    color: #374151;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.section-title i {
    color: #6366f1;
}

.bulk-pricing-table {
    display: grid;
    gap: 12px;
}

.bulk-tier {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    transition: all 0.2s ease;
}

.bulk-tier:hover {
    border-color: #3b82f6;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
}

.tier-quantity {
    font-weight: 500;
    color: #374151;
}

.tier-price {
    font-weight: 600;
    color: #dc2626;
    font-size: 16px;
}

.tier-discount {
    color: #059669;
    font-size: 14px;
    margin-left: 8px;
}

/* Dark Mode Support */
[data-theme="light"] .product-title {
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .rating-score {
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .product-short-description {
    color: #9ca3af !important;
}

[data-theme="light"] .info-grid-card {
    background: var(--dark-black-two) !important;
    border-color: var(--dark-black-five) !important;
}

[data-theme="light"] .card-header {
    background: var(--dark-black-three) !important;
    border-color: var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .card-content {
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .price-amount {
    color: hsl(var(--main)) !important;
}

[data-theme="light"] .moq-info,
[data-theme="light"] .analytics-item,
[data-theme="light"] .metric-item {
    background: var(--dark-black-four) !important;
}

[data-theme="light"] .moq-value,
[data-theme="light"] .analytics-value,
[data-theme="light"] .delivery-time,
[data-theme="light"] .category-name {
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .bulk-pricing-section {
    background: var(--dark-black-three) !important;
    border-color: var(--dark-black-five) !important;
}

[data-theme="light"] .bulk-tier {
    background: var(--dark-black-two) !important;
    border-color: var(--dark-black-five) !important;
}

[data-theme="light"] .tier-price {
    color: hsl(var(--main)) !important;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .product-info-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }
    
    .rating-reviews-inline {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    
    .analytics-grid {
        grid-template-columns: 1fr;
    }
    
    .bulk-tier {
        flex-direction: column;
        gap: 8px;
        text-align: center;
    }
    
    .card-content {
        padding: 16px;
    }
    
    .main-price {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
    }
}

@media (max-width: 480px) {
    .product-title {
        font-size: 24px;
    }
    
    .price-amount {
        font-size: 24px;
    }
    
    .card-header {
        padding: 12px 16px;
    }
    
    .bulk-pricing-section {
        padding: 16px;
    }
}

/* Essential Product Information */
.product-essentials {
    margin: 24px 0;
}

.section-subtitle {
    font-size: 18px;
    font-weight: 600;
    color: #374151;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.section-subtitle i {
    color: #f59e0b;
}

/* Key Specifications Preview */
.key-specs-preview {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
}

.specs-preview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
    margin-bottom: 16px;
}

.spec-preview-item {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 12px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
}

.spec-preview-item:hover {
    border-color: #3b82f6;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
}

.spec-name {
    font-weight: 500;
    color: #6b7280;
    font-size: 14px;
}

.spec-value {
    font-weight: 600;
    color: #111827;
    font-size: 14px;
}

.view-all-specs-btn {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 16px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 6px;
    margin: 0 auto;
}

.view-all-specs-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

/* Quick Info Cards */
.quick-info-cards {
    display: grid;
    gap: 16px;
}

.info-card {
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 7px;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.info-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.card-icon {
    background: linear-gradient(135deg, #f0f9ff 0%, #dbeafe 100%);
    border-radius: 8px;
    padding: 8px;
    flex-shrink: 0;
}

.card-icon i {
    font-size: 18px;
    color: #2563eb;
}

.card-content {
    flex: 1;
}

.card-title {
    font-size: 12px;
    font-weight: 500;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.stock-status-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 4px;
}

.stock-status-indicator.in-stock {
    color: #059669;
}

.stock-status-indicator.low-stock {
    color: #d97706;
}

.stock-status-indicator.out-of-stock {
    color: #dc2626;
}

.stock-status-indicator i {
    font-size: 8px;
}

.stock-count {
    font-size: 12px;
    color: #6b7280;
    font-weight: 500;
}

.delivery-time {
    font-weight: 600;
    color: #111827;
    font-size: 16px;
}

.category-name {
    font-weight: 600;
    color: #111827;
    font-size: 14px;
}

/* Card Specific Styling */
.stock-card::before {
    background: linear-gradient(90deg, #059669, #10b981);
}

.delivery-card::before {
    background: linear-gradient(90deg, #3b82f6, #1d4ed8);
}

.category-card::before {
    background: linear-gradient(90deg, #8b5cf6, #7c3aed);
}

.stock-card .card-icon {
    background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
}

.stock-card .card-icon i {
    color: #059669;
}

.delivery-card .card-icon {
    background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
}

.delivery-card .card-icon i {
    color: #2563eb;
}

.category-card .card-icon {
    background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
}

.category-card .card-icon i {
    color: #8b5cf6;
}

/* Dark Mode Support for Essential Info */
[data-theme="light"] .product-essentials .section-subtitle {
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .key-specs-preview {
    background: linear-gradient(135deg, var(--dark-black-three) 0%, var(--dark-black-four) 100%) !important;
    border-color: var(--dark-black-five) !important;
}

[data-theme="light"] .spec-preview-item {
    background: var(--dark-black-two) !important;
    border-color: var(--dark-black-five) !important;
}

[data-theme="light"] .spec-name {
    color: #9ca3af !important;
}

[data-theme="light"] .spec-value {
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .info-card {
    background: var(--dark-black-two) !important;
    border-color: var(--dark-black-five) !important;
}

[data-theme="light"] .card-title {
    color: #9ca3af !important;
}

[data-theme="light"] .delivery-time,
[data-theme="light"] .category-name,
[data-theme="light"] .stock-count {
    color: hsl(var(--static-white)) !important;
}

/* Mobile Responsiveness for Essential Info */
@media (max-width: 768px) {
    .specs-preview-grid {
        grid-template-columns: 1fr;
    }
    
    .quick-info-cards {
        grid-template-columns: 1fr;
    }
    
    .info-card {
        padding: 12px;
    }
    
    .key-specs-preview {
        padding: 16px;
    }
}

/* Main CTA Container */
.product-cta-container {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafb 100%);
    border: 1px solid #e8ecef;
    border-radius: 16px;
    padding: 24px;
    margin-top: 24px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
}

.product-cta-container:hover {
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
}

/* Quantity & Price Row */
.quantity-price-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
    gap: 24px;
}

/* Quantity Selector */
.quantity-selector {
    flex: 1;
    max-width: 200px;
}

.quantity-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: #374151;
    margin-bottom: 8px;
}

.quantity-controls {
    display: flex;
    align-items: center;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    overflow: hidden;
    background: white;
    transition: border-color 0.3s ease;
}

.quantity-controls:focus-within {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.qty-btn {
    background: #f9fafb;
    border: none;
    padding: 12px 16px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6b7280;
    font-size: 14px;
}

.qty-btn:hover:not(:disabled) {
    background: #3b82f6;
    color: white;
}

.qty-btn:disabled {
    background: #f3f4f6;
    color: #d1d5db;
    cursor: not-allowed;
}

.qty-input {
    border: none;
    outline: none;
    padding: 12px 16px;
    text-align: center;
    font-weight: 600;
    font-size: 16px;
    width: 80px;
    background: white;
    color: #111827;
}

.qty-info {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 12px;
}

.min-order, .stock-info {
    padding: 4px 8px;
    border-radius: 6px;
    font-weight: 500;
}

/* Price Display */
.price-display {
    text-align: right;
    flex-shrink: 0;
}

.unit-price {
    margin-bottom: 8px;
}

.price-value {
    font-size: 24px;
    font-weight: 700;
    color: #dc2626;
}

.price-unit {
    font-size: 14px;
    color: #6b7280;
    margin-left: 4px;
}

.total-price {
    padding: 8px 16px;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border-radius: 8px;
    border: 1px solid #bae6fd;
}

.total-label {
    font-size: 14px;
    font-weight: 500;
}

.total-value {
    font-size: 18px;
    font-weight: 700;
    color: #0c4a6e;
    margin-left: 8px;
}

/* Action Buttons Row */
.action-buttons-row {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

/* Primary Button Group */
.primary-btn-group {
    display: flex;
    gap: 12px;
}

.cta-btn {
    flex: 1;
    padding: 14px 24px;
    border-radius: 12px;
    border: 2px solid transparent;
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    position: relative;
    overflow: hidden;
}

.add-to-cart-btn {
    background: linear-gradient(135deg, #059669 0%, #10b981 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
}

.add-to-cart-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
    background: linear-gradient(135deg, #047857 0%, #059669 100%);
}

.favorite-btn {
    border-color: #dc2626;
    box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2);
}
[data-theme="light"] .favorite-btn {
  color: hsl(var(--static-white)) !important;
}

.favorite-btn:hover:not(:disabled) {
    background: #dc2626;
    color: white !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3);
}

.favorite-btn.favorited {
    background: #dc2626;
    color: white;
}

/* Secondary Button Group */
.secondary-btn-group {
    display: flex;
    gap: 8px;
    justify-content: center;
    flex-wrap: wrap;
}

.secondary-btn {
    padding: 10px 16px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    background: white;
    color: #374151;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 6px;
}

.secondary-btn:hover {
    background: #f9fafb;
    border-color: #9ca3af;
    color: #111827;
    transform: translateY(-1px);
}

.secondary-btn i {
    font-size: 12px;
}

/* Loading States */
.btn-loading {
    display: none;
}

.cta-btn:disabled .btn-text,
.cta-btn:disabled i:not(.fa-spinner) {
    display: none;
}

.cta-btn:disabled .btn-loading {
    display: inline-block;
}

.cta-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    transform: none !important;
}

/* Toast Notifications */
.toast {
    position: fixed;
    top: 20px;
    right: 20px;
    background: white;
    border-radius: 12px;
    padding: 16px 20px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    border-left: 4px solid #3b82f6;
    z-index: 9999;
    display: flex;
    align-items: center;
    gap: 12px;
    min-width: 320px;
    animation: slideInRight 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.toast-success {
    border-left-color: #10b981;
}

.toast-error {
    border-left-color: #ef4444;
}

.toast-warning {
    border-left-color: #f59e0b;
}

.toast-content {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
    font-weight: 500;
    color: #374151;
}

.toast-close {
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    color: #9ca3af;
    border-radius: 4px;
    transition: all 0.2s ease;
}

.toast-close:hover {
    background: #f3f4f6;
    color: #6b7280;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Dark Mode Support */
[data-theme="light"] .product-cta-container {
    background: linear-gradient(135deg, var(--dark-black-two) 0%, var(--dark-black-three) 100%) !important;
    border-color: var(--dark-black-five) !important;
}

[data-theme="light"] .quantity-label {
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .quantity-controls {
    border-color: var(--dark-black-five) !important;
    background: var(--dark-black-one) !important;
}

[data-theme="light"] .qty-btn {
    background: var(--dark-black-three) !important;
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .qty-btn:hover:not(:disabled) {
    background: hsl(var(--main)) !important;
}

[data-theme="light"] .qty-input {
    background: var(--dark-black-one) !important;
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .price-value,
[data-theme="light"] .total-value {
    color: hsl(var(--main)) !important;
}

[data-theme="light"] .total-price {
    background: var(--dark-black-four) !important;
    border-color: var(--dark-black-five) !important;
}

[data-theme="light"] .secondary-btn {
    background: var(--dark-black-three) !important;
    border-color: var(--dark-black-five) !important;
    color: hsl(var(--static-white)) !important;
}

[data-theme="light"] .secondary-btn:hover {
    background: var(--dark-black-four) !important;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .quantity-price-row {
        flex-direction: column;
        gap: 16px;
    }
    
    .quantity-selector {
        max-width: none;
    }
    
    .price-display {
        text-align: left;
    }
    
    .primary-btn-group {
        flex-direction: column;
    }
    
    .secondary-btn-group {
        justify-content: stretch;
    }
    
    .secondary-btn {
        flex: 1;
        justify-content: center;
    }
    
    .toast {
        left: 20px;
        right: 20px;
        min-width: auto;
    }
}

@media (max-width: 480px) {
    .product-cta-container {
        padding: 16px;
        margin-top: 16px;
    }
    
    .cta-btn {
        padding: 12px 20px;
        font-size: 14px;
    }
    
    .secondary-btn {
        padding: 8px 12px;
        font-size: 12px;
    }
}
</style>

<%- include('../partials/footer') %>

